.\" Man page generated from reStructuredText.
.
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.TH "FISH-RELEASENOTES" "1" "Feb 28, 2025" "4.0" "fish-shell"
.SH FISH 4.0.0 (RELEASED FEBRUARY 27, 2025)
.sp
fish\(aqs core code has been ported from C++ to Rust (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9512'\fI\%#9512\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9512\fP>\X'tty: link'). This means a large change in dependencies and how to build fish. However, there should be no direct impact on users. Packagers should see the \fI\%For Distributors\fP section at the end.
.SS Notable backwards\-incompatible changes
.INDENT 0.0
.IP \(bu 2
As part of a larger binding rework, \fBbind\fP gained a new key notation.
In most cases the old notation should keep working, but in rare cases you may have to change a \fBbind\fP invocation to use the new notation.
See \fI\%below\fP for details.
.IP \(bu 2
\fBctrl\fP\-\fBc\fP now calls a new bind function called \fBclear\-commandline\fP\&. The old behavior, which leaves a \(dq^C\(dq marker, is available as \fBcancel\-commandline\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10935'\fI\%#10935\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10935\fP>\X'tty: link')
.IP \(bu 2
\fBrandom\fP will produce different values from previous versions of fish when used with the same seed, and will work more sensibly with small seed numbers.
The seed was never guaranteed to give the same result across systems,
so we do not expect this to have a large impact (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9593'\fI\%#9593\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9593\fP>\X'tty: link').
.IP \(bu 2
Variables in command position that expand to a subcommand keyword are now forbidden to fix a likely user error.
For example, \fBset editor command emacs; $editor\fP is no longer allowed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10249'\fI\%#10249\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10249\fP>\X'tty: link').
.IP \(bu 2
\fBfunctions \-\-handlers\fP will now list handlers in a different order.
Now it is definition order, first to last, where before it was last to first.
This was never specifically defined, and we recommend not relying on a specific order (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9944'\fI\%#9944\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9944\fP>\X'tty: link').
.IP \(bu 2
The \fBqmark\-noglob\fP feature, introduced in fish 3.0, is enabled by default. That means \fB?\fP will no longer act as a single\-character glob.
You can, for the time being, turn it back on by adding \fBno\-qmark\-noglob\fP to \fBfish_features\fP and restarting fish:
.INDENT 2.0
.INDENT 3.5
.sp
.EX
set \-Ua fish_features no\-qmark\-noglob
.EE
.UNINDENT
.UNINDENT
.sp
The flag will eventually be made read\-only, making it impossible to turn off.
.IP \(bu 2
Terminals that fail to ignore unrecognized OSC or CSI sequences may display garbage. We know cool\-retro\-term and emacs\(aq ansi\-term are affected, but most mainstream terminals are not.
.IP \(bu 2
fish no longer searches directories from the Windows system/user \fB$PATH\fP environment variable for Linux executables. To execute Linux binaries by name (i.e. not with a relative or absolute path) from a Windows folder, make sure the \fB/mnt/c/...\fP path is explicitly added to \fB$fish_user_paths\fP and not just automatically appended to \fB$PATH\fP by \fBwsl.exe\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10506'\fI\%#10506\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10506\fP>\X'tty: link').
.IP \(bu 2
Under Microsoft Windows Subsystem for Linux 1 (not WSL 2), backgrounded jobs that have not been disowned and do not terminate on their own after a \fBSIGHUP\fP + \fBSIGCONT\fP sequence will be explicitly killed by fish on exit (after the usual prompt to close or disown them) to work around a WSL 1 deficiency that sees backgrounded processes that run into \fBSIGTTOU\fP remain in a suspended state indefinitely (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5263'\fI\%#5263\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5263\fP>\X'tty: link'). The workaround is to explicitly \fBdisown\fP processes you wish to outlive the shell session.
.UNINDENT
.SS Notable improvements and fixes
.INDENT 0.0
.IP \(bu 2
fish now requests XTerm\(aqs \fBmodifyOtherKeys\fP keyboard encoding and \X'tty: link https://sw.kovidgoyal.net/kitty/keyboard-protocol/'\fI\%kitty keyboard protocol\(aqs\fP <\fBhttps://sw.kovidgoyal.net/kitty/keyboard-protocol/\fP>\X'tty: link' progressive enhancements (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10359'\fI\%#10359\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10359\fP>\X'tty: link').
Depending on terminal support, this allows to binding more key combinations, including arbitrary combinations of modifiers \fBctrl\fP, \fBalt\fP and \fBshift\fP, and distinguishing (for example) \fBctrl\fP\-\fBi\fP from \fBtab\fP\&.
.sp
Additionally, \fBbind\fP now supports a human\-readable syntax in addition to byte sequences.
This includes modifier names, and names for keys like \fBenter\fP and \fBbackspace\fP\&.
For example
.INDENT 2.0
.IP \(bu 2
\fBbind up \(aqdo something\(aq\fP binds the up\-arrow key instead of a two\-key sequence (\(dqu\(dq and then \(dqp\(dq)
.IP \(bu 2
\fBbind ctrl\-x,alt\-c \(aqdo something\(aq\fP binds a sequence of two keys.
.UNINDENT
.sp
Any key argument that starts with an ASCII control character (like \fB\ee\fP or \fB\ecX\fP) or is up to 3 characters long, not a named key, and does not contain \fB,\fP or \fB\-\fP will be interpreted in the old syntax to keep compatibility for the majority of bindings.
.sp
Keyboard protocols can be turned off by disabling the \(dqkeyboard\-protocols\(dq feature flag:
.INDENT 2.0
.INDENT 3.5
.sp
.EX
set \-Ua fish_features no\-keyboard\-protocols
.EE
.UNINDENT
.UNINDENT
.sp
This is a temporary measure to work around buggy terminals (\X'tty: link https://github.com/fish-shell/fish-shell/issues/11056'\fI\%#11056\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/11056\fP>\X'tty: link'), which appear to be relatively rare.
Use this if something like \(dq=0\(dq or \(dq=5u\(dq appears in your commandline mysteriously.
.IP \(bu 2
fish can now be built as a self\-installing binary (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10367'\fI\%#10367\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10367\fP>\X'tty: link'). That means it can be easily built on one system and copied to another, where it can extract supporting files.
To do this, run:
.INDENT 2.0
.INDENT 3.5
.sp
.EX
cargo install \-\-path . # in a clone of the fish repository
# or \(gacargo build \-\-release\(ga and copy target/release/fish{,_indent,_key_reader} wherever you want
.EE
.UNINDENT
.UNINDENT
.sp
The first time it runs interactively, it will extract all the data files to  \fB~/.local/share/fish/install/\fP\&. A specific path can be used for the data files with \fBfish \-\-install=PATH\fP To uninstall, remove the fish binaries and that directory.
.sp
This build system is experimental; the main build system, using \fBcmake\fP, remains the recommended approach for packaging and installation to a prefix.
.IP \(bu 2
A new function \fBfish_should_add_to_history\fP can be overridden to decide whether a command should be added to the history (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10302'\fI\%#10302\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10302\fP>\X'tty: link').
.IP \(bu 2
Bindings can now mix special input functions and shell commands, so \fBbind ctrl\-g expand\-abbr \(dqcommandline \-i \en\(dq\fP works as expected (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8186'\fI\%#8186\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8186\fP>\X'tty: link').
.IP \(bu 2
Special input functions run from bindings via \fBcommandline \-f\fP are now applied immediately, instead of after the currently executing binding (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3031'\fI\%#3031\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3031\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/10126'\fI\%#10126\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10126\fP>\X'tty: link').
For example, \fBcommandline \-i foo; commandline | grep foo\fP succeeds now.
.IP \(bu 2
Undo history is no longer truncated after every command, but kept for the lifetime of the shell process.
.IP \(bu 2
The \fBctrl\fP\-\fBr\fP history search now uses glob syntax (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10131'\fI\%#10131\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10131\fP>\X'tty: link').
.IP \(bu 2
The \fBctrl\fP\-\fBr\fP history search now operates only on the line or command substitution at cursor, making it easier to combine commands from history (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9751'\fI\%#9751\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9751\fP>\X'tty: link').
.IP \(bu 2
Abbreviations can now be restricted to specific commands. For instance:
.INDENT 2.0
.INDENT 3.5
.sp
.EX
abbr \-\-add \-\-command git back \(aqreset \-\-hard HEAD^\(aq
.EE
.UNINDENT
.UNINDENT
.sp
will expand \(dqback\(dq to \fBreset \-\-hard HEAD^\fP, but only when the command is \fBgit\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9411'\fI\%#9411\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9411\fP>\X'tty: link').
.UNINDENT
.SS Deprecations and removed features
.INDENT 0.0
.IP \(bu 2
\fBcommandline \-\-tokenize\fP (short option \fB\-o\fP) has been deprecated in favor of \fBcommandline \-\-tokens\-expanded\fP (short option \fB\-x\fP) which expands variables and other shell syntax, removing the need to use \fI\%eval\fP in completion scripts (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10212'\fI\%#10212\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10212\fP>\X'tty: link').
.IP \(bu 2
Two new feature flags:
.INDENT 2.0
.IP \(bu 2
\fBremove\-percent\-self\fP (see \fBstatus features\fP) disables PID expansion of \fB%self\fP, which has been supplanted by \fB$fish_pid\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10262'\fI\%#10262\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10262\fP>\X'tty: link').
.IP \(bu 2
\fBtest\-require\-arg\fP disables \fBtest\fP\(aqs one\-argument mode. That means \fBtest \-n\fP without an additional argument will return false, \fBtest \-z\fP will keep returning true. Any other option without an argument, anything that is not an option and no argument will be an error. This also goes for \fB[\fP, test\(aqs alternate name.
This is a frequent source of confusion and so we are breaking with POSIX explicitly in this regard.
In addition to the feature flag, there is a debug category \(dqdeprecated\-test\(dq. Running fish with \fBfish \-d deprecated\-test\fP will show warnings whenever a \fBtest\fP invocation that would change is used. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10365'\fI\%#10365\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10365\fP>\X'tty: link').
.UNINDENT
.sp
These can be enabled with:
.INDENT 2.0
.INDENT 3.5
.sp
.EX
set \-Ua fish_features remove\-percent\-self test\-require\-arg
.EE
.UNINDENT
.UNINDENT
.sp
We intend to enable them by default in future, and after that eventually make them read\-only.
.IP \(bu 2
Specifying key names as terminfo names (using the \fBbind \-k\fP syntax) is deprecated and may be removed in a future version.
.IP \(bu 2
When a terminal pastes text into fish using bracketed paste, fish used to switch to a special \fBpaste\fP bind mode.
This bind mode has been removed. The behavior on paste is no longer configurable.
.IP \(bu 2
When an interactive fish is stopped or terminated by a signal that cannot be caught (SIGSTOP or SIGKILL), it may leave the terminal in a state where keypresses with modifiers are sent as CSI u sequences, instead of traditional control characters or escape sequences that are recognized by Readline and compatible programs, such as bash and python.
If this happens, you can use the \fBreset\fP command from \fBncurses\fP to restore the terminal state.
.IP \(bu 2
\fBfish_key_reader \-\-verbose\fP no longer shows timing information.
.IP \(bu 2
Terminal information is no longer read from hashed terminfo databases, or termcap databases (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10269'\fI\%#10269\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10269\fP>\X'tty: link'). The vast majority of systems use a non\-hashed terminfo database, which is still supported.
.IP \(bu 2
\fBsource\fP returns an error if used without a filename or pipe/redirection (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10774'\fI\%#10774\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10774\fP>\X'tty: link').
.UNINDENT
.SS Scripting improvements
.INDENT 0.0
.IP \(bu 2
\fBfor\fP loops will no longer remember local variables from the previous iteration (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10525'\fI\%#10525\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10525\fP>\X'tty: link').
.IP \(bu 2
A new \fBhistory append\fP subcommand appends a command to the history, without executing it (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4506'\fI\%#4506\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4506\fP>\X'tty: link').
.IP \(bu 2
A new redirection: \fB<? /path/to/file\fP will try opening the file as input, and if it doesn\(aqt succeed silently uses \fB/dev/null\fP instead.
This can help with checks like \fBtest \-f /path/to/file; and string replace foo bar < /path/to/file\fP\&. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10387'\fI\%#10387\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10387\fP>\X'tty: link')
.IP \(bu 2
A new option \fBcommandline \-\-tokens\-raw\fP prints a list of tokens without any unescaping (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10212'\fI\%#10212\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10212\fP>\X'tty: link').
.IP \(bu 2
A new option \fBcommandline \-\-showing\-suggestion\fP tests whether an autosuggestion is currently displayed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10586'\fI\%#10586\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10586\fP>\X'tty: link').
.IP \(bu 2
\fBfunctions\fP and \fBtype\fP now show that a function was copied and its source, rather than solely \fBDefined interactively\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6575'\fI\%#6575\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6575\fP>\X'tty: link').
.IP \(bu 2
Stack trace now shows line numbers for copied functions (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6575'\fI\%#6575\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6575\fP>\X'tty: link').
.IP \(bu 2
\fBfoo & && bar\fP is now a syntax error, like in other shells (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9911'\fI\%#9911\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9911\fP>\X'tty: link').
.IP \(bu 2
\fBif \-e foo; end\fP now prints a more accurate error (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10000'\fI\%#10000\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10000\fP>\X'tty: link').
.IP \(bu 2
\fBcd\fP into a directory that is not readable but accessible (permissions \fB\-\-x\fP) is now possible (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10432'\fI\%#10432\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10432\fP>\X'tty: link').
.IP \(bu 2
An integer overflow in \fBstring repeat\fP leading to a near\-infinite loop has been fixed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9899'\fI\%#9899\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9899\fP>\X'tty: link').
.IP \(bu 2
\fBstring shorten\fP behaves better in the presence of non\-printable characters, including fixing an integer overflow that shortened strings more than intended (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9854'\fI\%#9854\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9854\fP>\X'tty: link').
.IP \(bu 2
\fBstring pad\fP no longer allows non\-printable characters as padding (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9854'\fI\%#9854\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9854\fP>\X'tty: link').
.IP \(bu 2
\fBstring repeat\fP now allows omission of \fB\-n\fP when the first argument is an integer (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10282'\fI\%#10282\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10282\fP>\X'tty: link').
.IP \(bu 2
\fBstring match\fP and \fBreplace\fP have a new \fB\-\-max\-matches\fP option to return as soon as the specified number of matches have been identified, which can improve performance in scripts (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10587'\fI\%#10587\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10587\fP>\X'tty: link').
.IP \(bu 2
\fBfunctions \-\-handlers\-type caller\-exit\fP once again lists functions defined as \fBfunction \-\-on\-job\-exit caller\fP, rather than them being listed by \fBfunctions \-\-handlers\-type process\-exit\fP\&.
.IP \(bu 2
A new \fBset \-\-no\-event\fP option sets or erases variables without triggering a variable event. This can be useful to change a variable in an event handler (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10480'\fI\%#10480\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10480\fP>\X'tty: link').
.IP \(bu 2
Commas in command substitution output are no longer used as separators in brace expansion, preventing a surprising expansion in some cases (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5048'\fI\%#5048\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5048\fP>\X'tty: link').
.IP \(bu 2
Universal variables can now store strings containing invalid UTF\-8 (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10313'\fI\%#10313\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10313\fP>\X'tty: link').
.IP \(bu 2
A new \fBpath basename \-E\fP option that causes it to return the basename (\(dqfilename\(dq with the directory prefix removed) with the final extension (if any) also removed. This is a shorter version of \fBpath change\-extension \(dq\(dq (path basename $foo)\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10521'\fI\%#10521\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10521\fP>\X'tty: link').
.IP \(bu 2
A new \fBmath \-\-scale\-mode\fP option to select \fBtruncate\fP, \fBround\fP, \fBfloor\fP, \fBceiling\fP as you wish; the default value is \fBtruncate\fP\&. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9117'\fI\%#9117\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9117\fP>\X'tty: link').
.IP \(bu 2
\fBrandom\fP is now less strict about its arguments, allowing a start larger or equal to the end. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10879'\fI\%#10879\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10879\fP>\X'tty: link')
.IP \(bu 2
\fBfunction \-\-argument\-names\fP now produces an error if a read\-only variable name is used, rather than simply ignoring it (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10842'\fI\%#10842\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10842\fP>\X'tty: link').
.IP \(bu 2
Tilde expansion in braces (that is, \fB{~,}\fP) works correctly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10610'\fI\%#10610\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10610\fP>\X'tty: link').
.UNINDENT
.SS Interactive improvements
.INDENT 0.0
.IP \(bu 2
Autosuggestions were sometimes not shown after recalling a line from history, which has been fixed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10287'\fI\%#10287\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10287\fP>\X'tty: link').
.IP \(bu 2
Up\-arrow search matches \-\- which are highlighted in reverse colors \-\- are no longer syntax\-highlighted, to fix bad contrast with the search match highlighting.
.IP \(bu 2
Command abbreviations (those with \fB\-\-position command\fP or without a \fB\-\-position\fP) now also expand after decorators like \fBcommand\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10396'\fI\%#10396\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10396\fP>\X'tty: link').
.IP \(bu 2
Abbreviations now expand after process separators like \fB;\fP and \fB|\fP\&. This fixes a regression in version 3.6 (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9730'\fI\%#9730\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9730\fP>\X'tty: link').
.IP \(bu 2
When exporting interactively defined functions (using \fBtype\fP, \fBfunctions\fP or \fBfuncsave\fP) the function body is now indented, to match the interactive command line editor (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8603'\fI\%#8603\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8603\fP>\X'tty: link').
.IP \(bu 2
\fBctrl\fP\-\fBx\fP (\fBfish_clipboard_copy\fP) on multiline commands now includes indentation (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10437'\fI\%#10437\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10437\fP>\X'tty: link').
.IP \(bu 2
\fBctrl\fP\-\fBv\fP (\fBfish_clipboard_paste\fP) now strips ASCII control characters from the pasted text.
This is consistent with normal keyboard input (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5274'\fI\%#5274\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5274\fP>\X'tty: link').
.IP \(bu 2
When a command like \fBfg %2\fP fails to find the given job, it no longer behaves as if no job spec was given (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9835'\fI\%#9835\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9835\fP>\X'tty: link').
.IP \(bu 2
Redirection in command position like \fB>echo\fP is now highlighted as error (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8877'\fI\%#8877\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8877\fP>\X'tty: link').
.IP \(bu 2
\fBfish_vi_cursor\fP now works properly inside the prompt created by builtin \fBread\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10088'\fI\%#10088\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10088\fP>\X'tty: link').
.IP \(bu 2
fish no longer fails to open a FIFO if interrupted by a terminal resize signal (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10250'\fI\%#10250\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10250\fP>\X'tty: link').
.IP \(bu 2
\fBread \-\-help\fP and friends no longer ignore redirections. This fixes a regression in version 3.1 (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10274'\fI\%#10274\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10274\fP>\X'tty: link').
.IP \(bu 2
Measuring a command with \fBtime\fP now considers the time taken for command substitution (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9100'\fI\%#9100\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9100\fP>\X'tty: link').
.IP \(bu 2
\fBfish_add_path\fP now automatically enables verbose mode when used interactively (in the command line), in an effort to be clearer about what it does (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10532'\fI\%#10532\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10532\fP>\X'tty: link').
.IP \(bu 2
fish no longer adopts TTY modes of failed commands (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10603'\fI\%#10603\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10603\fP>\X'tty: link').
.IP \(bu 2
\fBcomplete \-e cmd\fP now prevents autoloading completions for \fBcmd\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6716'\fI\%#6716\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6716\fP>\X'tty: link').
.IP \(bu 2
fish\(aqs default color scheme no longer uses the color \(dqblue\(dq, as it has bad contrast against the background in a few terminal\(aqs default palettes (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10758'\fI\%#10758\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10758\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/10786'\fI\%#10786\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10786\fP>\X'tty: link')
The color scheme will not be upgraded for existing installs. If you want, you should select it again via \fBfish_config\fP\&.
.IP \(bu 2
Command lines which are larger than the terminal are now displayed correctly, instead of multiple blank lines being displayed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7296'\fI\%#7296\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7296\fP>\X'tty: link').
.IP \(bu 2
Prompts that use external commands will no longer produce an infinite loop if the command crashes (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9796'\fI\%#9796\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9796\fP>\X'tty: link').
.IP \(bu 2
Undo (\fBctrl\fP\-\fBz\fP) restores the cursor position too (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10838'\fI\%#10838\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10838\fP>\X'tty: link').
.IP \(bu 2
The output of \fBjobs\fP shows \(dq\-\(dq for jobs that have the same process group ID as the fish process, rather than \(dq\-2\(dq (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10833'\fI\%#10833\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10833\fP>\X'tty: link').
.IP \(bu 2
Job expansion (\fB%1\fP syntax) works properly for jobs that are a mixture of external commands and functions (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10832'\fI\%#10832\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10832\fP>\X'tty: link').
.IP \(bu 2
Command lines which have more lines than the terminal can be displayed and edited correctly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10827'\fI\%#10827\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10827\fP>\X'tty: link').
.IP \(bu 2
Functions that have been erased are no longer highlighted as valid commands (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10866'\fI\%#10866\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10866\fP>\X'tty: link').
.IP \(bu 2
\fBnot\fP, \fBtime\fP, and variable assignments (that is \fBnot time a=b env\fP) is correctly recognized as valid syntax (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10890'\fI\%#10890\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10890\fP>\X'tty: link').
.IP \(bu 2
The Web\-based configuration removes old right\-hand\-side prompts again, fixing a regression in fish 3.4.0 (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10675'\fI\%#10675\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10675\fP>\X'tty: link').
.IP \(bu 2
Further protection against programs which crash and leave the terminal in an inconsistent state (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10834'\fI\%#10834\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10834\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/11038'\fI\%#11038\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/11038\fP>\X'tty: link').
.IP \(bu 2
A workaround for git being very slow on macOS has been applied, improving performance after a fresh boot (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10535'\fI\%#10535\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10535\fP>\X'tty: link').
.UNINDENT
.SS New or improved bindings
.INDENT 0.0
.IP \(bu 2
When the cursor is on a command that resolves to an executable script, \fBalt\fP\-\fBo\fP will now open that script in your editor (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10266'\fI\%#10266\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10266\fP>\X'tty: link').
.IP \(bu 2
During up\-arrow history search, \fBshift\fP\-\fBdelete\fP will delete the current search item and move to the next older item. Previously this was only supported in the history pager.
.IP \(bu 2
\fBshift\fP\-\fBdelete\fP will also remove the currently\-displayed autosuggestion from history, and remove it as a suggestion.
.IP \(bu 2
\fBctrl\fP\-\fBZ\fP (also known as \fBctrl\fP\-\fBshift\fP\-\fBz\fP) is now bound to redo.
.IP \(bu 2
Some improvements to the \fBalt\fP\-\fBe\fP binding which edits the command line in an external editor:
\- The editor\(aqs cursor position is copied back to fish. This is currently supported for Vim and Kakoune.
\- Cursor position synchronization is only supported for a set of known editors, which are now also detected in aliases which use \fBcomplete \-\-wraps\fP\&. For example, use \fBcomplete \-\-wraps my\-vim vim\fP to synchronize cursors when \fBEDITOR=my\-vim\fP\&.
\- Multiline commands are indented before being sent to the editor, which matches how they are displayed in fish.
.IP \(bu 2
The \fB\&...\-path\-component\fP bindings, like \fBbackward\-kill\-path\-component\fP, now treat \fB#\fP as part of a path component (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10271'\fI\%#10271\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10271\fP>\X'tty: link').
.IP \(bu 2
Bindings like \fBalt\fP\-\fBl\fP that print output in between prompts now work correctly with multiline commandlines.
.IP \(bu 2
\fBalt\fP\-\fBd\fP on an empty command line lists the directory history again. This restores the behavior of version 2.1.
.IP \(bu 2
\fBhistory\-prefix\-search\-backward\fP and \fB\-forward\fP now maintain the cursor position, instead of moving the cursor to the end of the command line (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10430'\fI\%#10430\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10430\fP>\X'tty: link').
.IP \(bu 2
The following keys have refined behavior if the terminal supports \fI\%the new keyboard encodings\fP:
\- \fBshift\fP\-\fBenter\fP now inserts a newline instead of executing the command line.
\- \fBctrl\fP\-\fBbackspace\fP now deletes the last word instead of only one character (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10741'\fI\%#10741\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10741\fP>\X'tty: link').
\- \fBctrl\fP\-\fBdelete\fP deletes the next word (same as \fBalt\fP\-\fBd\fP).
.IP \(bu 2
New special input functions:
\- \fBforward\-char\-passive\fP and \fBbackward\-char\-passive\fP are like their non\-passive variants but do not accept autosuggestions or move focus in the completion pager (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10398'\fI\%#10398\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10398\fP>\X'tty: link').
\- \fBforward\-token\fP, \fBbackward\-token\fP, \fBkill\-token\fP, and \fBbackward\-kill\-token\fP are similar to the \fB*\-bigword\fP variants but for the whole argument token (which includes escaped spaces) (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2014'\fI\%#2014\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2014\fP>\X'tty: link').
\- \fBclear\-commandline\fP, which merely clears the command line, as an alternative to \fBcancel\-commandline\fP which prints \fB^C\fP and a new prompt (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10213'\fI\%#10213\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10213\fP>\X'tty: link').
.IP \(bu 2
The \fBaccept\-autosuggestion\fP special input function now returns false when there was nothing to accept (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10608'\fI\%#10608\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10608\fP>\X'tty: link').
.IP \(bu 2
Vi mode has seen some improvements but continues to suffer from the lack of people working on it.
\- New default cursor shapes for insert and replace mode.
\- \fBctrl\fP\-\fBn\fP in insert mode accepts autosuggestions (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10339'\fI\%#10339\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10339\fP>\X'tty: link').
\- Outside insert mode, the cursor will no longer be placed beyond the last character on the commandline.
\- When the cursor is at the end of the commandline, a single \fBl\fP will accept an autosuggestion (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10286'\fI\%#10286\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10286\fP>\X'tty: link').
\- The cursor position after pasting (\fBp\fP) has been corrected.
\- Added an additional binding, \fB_\fP, for moving to the beginning of the line (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10720'\fI\%#10720\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10720\fP>\X'tty: link').
\- When the cursor is at the start of a line, escaping from insert mode no longer moves the cursor to the previous line.
\- Added bindings for clipboard interaction, like \fB\(dq,\fP+\fB,p\fP and \fB\(dq,\fP+\fB,y,y\fP\&.
\- Deleting in visual mode now moves the cursor back, matching vi (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10394'\fI\%#10394\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10394\fP>\X'tty: link').
\- The \fB;\fP, \fB,\fP, \fBv\fP, \fBV\fP, \fBI\fP, and \fBgU\fP bindings work in visual mode (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10601'\fI\%#10601\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10601\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/10648'\fI\%#10648\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10648\fP>\X'tty: link').
\- Support \fB%\fP motion (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10593'\fI\%#10593\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10593\fP>\X'tty: link').
\- \fBctrl\fP\-\fBk\fP to remove the contents of the line beyond the cursor in all modes (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10648'\fI\%#10648\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10648\fP>\X'tty: link').
\- Support \fIab\fP and \fIib\fP vi text objects. New input functions are introduced \fBjump\-{to,till}\-matching\-bracket\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1842'\fI\%#1842\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1842\fP>\X'tty: link').
\- The \fBE\fP binding now correctly handles the last character of the word, by jumping to the next word (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9700'\fI\%#9700\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9700\fP>\X'tty: link').
.UNINDENT
.SS Completions
.INDENT 0.0
.IP \(bu 2
Command\-specific tab completions may now offer results whose first character is a period. For example, it is now possible to tab\-complete \fBgit add\fP for files with leading periods. The default file completions hide these files, unless the token itself has a leading period (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3707'\fI\%#3707\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3707\fP>\X'tty: link').
.IP \(bu 2
Option completion now uses fuzzy subsequence filtering, just like non\-option completion (\X'tty: link https://github.com/fish-shell/fish-shell/issues/830'\fI\%#830\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/830\fP>\X'tty: link').
This means that \fB\-\-fb\fP may be completed to \fB\-\-foobar\fP if there is no better match.
.IP \(bu 2
Completions that insert an entire token now use quotes instead of backslashes to escape special characters (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5433'\fI\%#5433\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5433\fP>\X'tty: link').
.IP \(bu 2
Normally, file name completions start after the last \fB:\fP  or \fB=\fP in a token.
This helps commands like \fBrsync \-\-files\-from=\fP\&.
This special meaning can now disabled by escaping these separators as \fB\e:\fP and \fB\e=\fP\&.
This matches Bash\(aqs behavior.
Note that this escaping is usually not necessary since the completion engine already tries
to guess whether the separator is actually part of a file name.
.IP \(bu 2
Various new completion scripts and numerous updates to existing ones.
.IP \(bu 2
Completions could hang if the \fBPAGER\fP environment variable was sent to certain editors on macOS, FreeBSD and some other platforms. This has been fixed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10820'\fI\%#10820\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10820\fP>\X'tty: link').
.IP \(bu 2
Generated completions are now stored in \fB$XDG_CACHE_HOME/fish\fP or \fB~/.cache/fish\fP by default (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10369'\fI\%#10369\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10369\fP>\X'tty: link')
.IP \(bu 2
A regression in fish 3.1, where completing a command line could change it completely, has been fixed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10904'\fI\%#10904\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10904\fP>\X'tty: link').
.UNINDENT
.SS Improved terminal support
.INDENT 0.0
.IP \(bu 2
fish now marks the prompt and command\-output regions (via OSC 133) to enable terminal shell integration (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10352'\fI\%#10352\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10352\fP>\X'tty: link').
Shell integration shortcuts can scroll to the next/previous prompt or show the last command output in a pager.
.IP \(bu 2
fish now reports the working directory (via OSC 7) unconditionally instead of only for some terminals (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9955'\fI\%#9955\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9955\fP>\X'tty: link').
.IP \(bu 2
fish now sets the terminal window title (via OSC 0) unconditionally instead of only for some terminals (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10037'\fI\%#10037\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10037\fP>\X'tty: link').
.IP \(bu 2
Focus reporting in tmux is no longer disabled on the first prompt.
.IP \(bu 2
Focus reporting is now disabled during commands run inside key bindings (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6942'\fI\%#6942\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6942\fP>\X'tty: link').
.IP \(bu 2
Cursor changes are applied to all terminals that support them, and the list of specifically\-supported terminals has been removed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10693'\fI\%#10693\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10693\fP>\X'tty: link').
.IP \(bu 2
If it cannot find the terminfo entry given by \fI\%TERM\fP environment variable, fish will now use an included \fBxterm\-256color\fP definition to match the vast majority of current terminal emulators (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10905'\fI\%#10905\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10905\fP>\X'tty: link'). If you need to have a specific terminfo profile for your terminal\(aqs \fBTERM\fP variable, install it into the terminfo database.
.IP \(bu 2
Further improvements to the correct display of prompts which fill the width of the terminal (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8164'\fI\%#8164\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8164\fP>\X'tty: link').
.UNINDENT
.SS Other improvements
.INDENT 0.0
.IP \(bu 2
\fBstatus\fP gained a \fBbuildinfo\fP subcommand, to print information on how fish was built, to help with debugging (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10896'\fI\%#10896\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10896\fP>\X'tty: link').
.IP \(bu 2
\fBfish_indent\fP will now collapse multiple empty lines into one (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10325'\fI\%#10325\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10325\fP>\X'tty: link').
.IP \(bu 2
\fBfish_indent\fP now preserves the modification time of files if there were no changes (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10624'\fI\%#10624\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10624\fP>\X'tty: link').
.IP \(bu 2
Performance in launching external processes has been improved for many cases (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10869'\fI\%#10869\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10869\fP>\X'tty: link').
.IP \(bu 2
Performance and interactivity under Windows Subsystem for Linux has been improved, with a workaround for Windows\-specific locations being appended to \fB$PATH\fP by default (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10506'\fI\%#10506\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10506\fP>\X'tty: link').
.IP \(bu 2
On macOS, paths from \fB/etc/paths\fP and \fB/etc/manpaths\fP containing colons are handled correctly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10684'\fI\%#10684\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10684\fP>\X'tty: link').
.IP \(bu 2
Additional filesystems such as AFS are properly detected as remote, which avoids certain hangs due to expensive filesystem locks (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10818'\fI\%#10818\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10818\fP>\X'tty: link').
.IP \(bu 2
A spurious error when launching multiple instances of fish for the first time has been removed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10813'\fI\%#10813\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10813\fP>\X'tty: link').
.UNINDENT
.SS For distributors
.sp
fish has been ported to Rust. This means a significant change in dependencies, which are listed in the README. In short, Rust 1.70 or greater is required, and a C++ compiler is no longer needed (although a C compiler is still required, for some C glue code and the tests).
.sp
CMake remains the recommended build system, because of cargo\(aqs limited support for installing support files. Version 3.5 remains the minimum supported version. The Xcode generator for CMake is not supported any longer (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9924'\fI\%#9924\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9924\fP>\X'tty: link'). CMake builds default to optimized release builds (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10799'\fI\%#10799\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10799\fP>\X'tty: link').
.sp
fish no longer depends on the ncurses library, but still uses a terminfo database. When packaging fish, please add a dependency on the package containing your terminfo database instead of curses.
.sp
The \fBtest\fP target was removed as it can no longer be defined in new CMake versions. Use \fBmake fish_run_tests\fP\&. Any existing test target will not print output if it fails (\X'tty: link https://github.com/fish-shell/fish-shell/issues/11116'\fI\%#11116\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/11116\fP>\X'tty: link').
.sp
The Web\-based configuration has been rewritten to use Alpine.js (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9554'\fI\%#9554\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9554\fP>\X'tty: link').

.sp
.ce
----

.ce 0
.sp
.SH FISH 4.0B1 (RELEASED DECEMBER 17, 2024)
.sp
A number of improvements were included in fish 4.0.0 following the beta release of 4.0b1. These include fixes for regressions, improvements to completions and documentation, and the removal of a small number of problematic changes.
.sp
The full list of fixed issues can be found on the \X'tty: link https://github.com/fish-shell/fish-shell/milestone/43'\fI\%GitHub milestone page for 4.0\-final\fP <\fBhttps://github.com/fish-shell/fish-shell/milestone/43\fP>\X'tty: link'\&.

.sp
.ce
----

.ce 0
.sp
.SH FISH 3.7.1 (RELEASED MARCH 19, 2024)
.sp
This release of fish fixes the following problems identified in fish 3.7.0:
.INDENT 0.0
.IP \(bu 2
Deleting the last history entry via \fBhistory delete\fP works again (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10190'\fI\%#10190\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10190\fP>\X'tty: link').
.IP \(bu 2
Wildcards (\fB*\fP) will no longer sometimes generate paths that did not exist (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10205'\fI\%#10205\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10205\fP>\X'tty: link').
.UNINDENT
.sp
This release also contains some improvements:
.INDENT 0.0
.IP \(bu 2
A crash when trying to run an ELF program with a missing interpreter has been fixed. This crashed in the process after fork, so did not affect the fish process that tried to start the program (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10199'\fI\%#10199\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10199\fP>\X'tty: link').
.IP \(bu 2
\fBfunced\fP will now always \fBsource\fP the file after it has written it, even if the contents did not change. This prevents issues if the file was otherwise modified (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10318'\fI\%#10318\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10318\fP>\X'tty: link').
.IP \(bu 2
The warning for when a builtin returns a negative exit code was improved, now mentioning the original status (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10187'\fI\%#10187\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10187\fP>\X'tty: link').
.IP \(bu 2
Added completions for
.INDENT 2.0
.IP \(bu 2
\fBcobra\-cli\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10293'\fI\%#10293\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10293\fP>\X'tty: link')
.IP \(bu 2
\fBdmidecode\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10368'\fI\%#10368\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10368\fP>\X'tty: link')
.IP \(bu 2
\fBmycli\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10309'\fI\%#10309\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10309\fP>\X'tty: link')
.IP \(bu 2
\fBollama\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10327'\fI\%#10327\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10327\fP>\X'tty: link')
.IP \(bu 2
\fBpstree\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10317'\fI\%#10317\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10317\fP>\X'tty: link')
.UNINDENT
.IP \(bu 2
Some improvements to documentation and completions.
.UNINDENT

.sp
.ce
----

.ce 0
.sp
.SH FISH 3.7.0 (RELEASED JANUARY 1, 2024)
.sp
This release of fish includes a number of improvements over fish 3.6.4, detailed below. Although work continues on the porting of fish internals to the Rust programming language, that work is not included in this release. fish 3.7.0 and any future releases in the 3.7 series remain C++ programs.
.SS Notable improvements and fixes
.INDENT 0.0
.IP \(bu 2
Improvements to the history pager, including:
.INDENT 2.0
.IP \(bu 2
The history pager will now also attempt subsequence matches (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9476'\fI\%#9476\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9476\fP>\X'tty: link'), so you can find a command line like \fBgit log 3.6.1..Integration_3.7.0\fP by searching for \fBgitInt\fP\&.
.IP \(bu 2
Opening the history pager will now fill the search field with a search string if you\(aqre already in a search (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10005'\fI\%#10005\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10005\fP>\X'tty: link'). This makes it nicer to search something with \fBup\fP and then later decide to switch to the full pager.
.IP \(bu 2
Closing the history pager with enter will now copy the search text to the commandline if there was no match, so you can continue editing the command you tried to find right away (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9934'\fI\%#9934\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9934\fP>\X'tty: link').
.UNINDENT
.IP \(bu 2
Performance improvements for command completions and globbing, where supported by the operating system, especially on slow filesystems such as NFS (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9891'\fI\%#9891\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9891\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/9931'\fI\%#9931\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9931\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/10032'\fI\%#10032\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10032\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/10052'\fI\%#10052\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10052\fP>\X'tty: link').
.IP \(bu 2
fish can now be configured to wait a specified amount of time for a multi\-key sequence to be completed,  instead of waiting indefinitely. For example, this makes binding \fBkj\fP to switching modes in vi mode possible.
The timeout can be set via the new \fI\%fish_sequence_key_delay_ms\fP variable (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7401'\fI\%#7401\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7401\fP>\X'tty: link'), and may be set by default in future versions.
.UNINDENT
.SS Deprecations and removed features
.INDENT 0.0
.IP \(bu 2
\fBLS_COLORS\fP is no longer set automatically by the \fBls\fP function (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10080'\fI\%#10080\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10080\fP>\X'tty: link'). Users
that set \fB\&.dircolors\fP should manually import it using other means. Typically this would be \fBset \-gx LS_COLORS (dircolors \-c .dircolors | string split \(aq \(aq)[3]\fP
.UNINDENT
.SS Scripting improvements
.INDENT 0.0
.IP \(bu 2
Running \fBexit\fP with a negative number no longer crashes fish (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9659'\fI\%#9659\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9659\fP>\X'tty: link').
.IP \(bu 2
\fBfish \-\-command\fP will now return a non\-zero status if parsing failed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9888'\fI\%#9888\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9888\fP>\X'tty: link').
.IP \(bu 2
The \fBjobs\fP builtin will now escape the commands it prints (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9808'\fI\%#9808\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9808\fP>\X'tty: link').
.IP \(bu 2
\fBstring repeat\fP no longer overflows if the count is a multiple of the chunk size (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9900'\fI\%#9900\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9900\fP>\X'tty: link').
.IP \(bu 2
The \fBbuiltin\fP builtin will now properly error out with invalid arguments instead of doing nothing and returning true (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9942'\fI\%#9942\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9942\fP>\X'tty: link').
.IP \(bu 2
\fBcommand time\fP in a pipeline is allowed again, as is \fBcommand and\fP and \fBcommand or\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9985'\fI\%#9985\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9985\fP>\X'tty: link').
.IP \(bu 2
\fBexec\fP will now also apply variable overrides, so \fBFOO=bar exec\fP will now set \fB$FOO\fP correctly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9995'\fI\%#9995\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9995\fP>\X'tty: link').
.IP \(bu 2
\fBumask\fP will now handle empty symbolic modes correctly, like \fBumask u=,g=rwx,o=\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10177'\fI\%#10177\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10177\fP>\X'tty: link').
.IP \(bu 2
Improved error messages for errors occurring in command substitutions (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10054'\fI\%#10054\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10054\fP>\X'tty: link').
.UNINDENT
.SS Interactive improvements
.INDENT 0.0
.IP \(bu 2
\fBread\fP no longer enables bracketed paste so it doesn\(aqt stay enabled in combined commandlines like \fBmysql \-p(read \-\-silent)\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8285'\fI\%#8285\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8285\fP>\X'tty: link').
.IP \(bu 2
Vi mode now uses \fBfish_cursor_external\fP to set the cursor shape for external commands (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4656'\fI\%#4656\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4656\fP>\X'tty: link').
.IP \(bu 2
Opening the history search in vi mode switches to insert mode correctly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10141'\fI\%#10141\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10141\fP>\X'tty: link').
.IP \(bu 2
Vi mode cursor shaping is now enabled in iTerm2 (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9698'\fI\%#9698\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9698\fP>\X'tty: link').
.IP \(bu 2
Completing commands as root includes commands not owned by root, fixing a regression introduced in fish 3.2.0 (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9699'\fI\%#9699\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9699\fP>\X'tty: link').
.IP \(bu 2
Selection uses \fBfish_color_selection\fP for the foreground and background colors, as intended, rather than just the background (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9717'\fI\%#9717\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9717\fP>\X'tty: link').
.IP \(bu 2
The completion pager will no longer sometimes skip the last entry when moving through a long list (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9833'\fI\%#9833\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9833\fP>\X'tty: link').
.IP \(bu 2
The interactive \fBhistory delete\fP interface now allows specifying index ranges like \(dq1..5\(dq (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9736'\fI\%#9736\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9736\fP>\X'tty: link'), and \fBhistory delete \-\-exact\fP now properly saves the history (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10066'\fI\%#10066\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10066\fP>\X'tty: link').
.IP \(bu 2
Command completion will now call the stock \fBmanpath\fP on macOS, instead of a potential Homebrew version. This prevents awkward error messages (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9817'\fI\%#9817\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9817\fP>\X'tty: link').
.IP \(bu 2
the \fBredo\fP special input function restores the pre\-undo cursor position.
.IP \(bu 2
A new bind function \fBhistory\-pager\-delete\fP, bound to \fBshift\fP\-\fBdelete\fP by default, will delete the currently\-selected history pager item from history (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9454'\fI\%#9454\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9454\fP>\X'tty: link').
.IP \(bu 2
\fBfish_key_reader\fP will now use printable characters as\-is, so pressing \(dqö\(dq no longer leads to it telling you to bind \fB\eu00F6\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9986'\fI\%#9986\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9986\fP>\X'tty: link').
.IP \(bu 2
\fBopen\fP can be used to launch terminal programs again, as an \fBxdg\-open\fP bug has been fixed and a workaround has been removed  (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10045'\fI\%#10045\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10045\fP>\X'tty: link').
.IP \(bu 2
The \fBrepaint\-mode\fP binding will now only move the cursor if there is repainting to be done. This fixes \fBalt\fP combination bindings in vi mode (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7910'\fI\%#7910\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7910\fP>\X'tty: link').
.IP \(bu 2
A new \fBclear\-screen\fP bind function is used for \fBctrl\fP\-\fBl\fP by default. This clears the screen and repaints the existing prompt at first,
so it eliminates visible flicker unless the terminal is very slow (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10044'\fI\%#10044\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10044\fP>\X'tty: link').
.IP \(bu 2
The \fBalias\fP convenience function has better support for commands with unusual characters, like \fB+\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8720'\fI\%#8720\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8720\fP>\X'tty: link').
.IP \(bu 2
A longstanding issue where items in the pager would sometimes display without proper formatting has been fixed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9617'\fI\%#9617\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9617\fP>\X'tty: link').
.IP \(bu 2
The \fBalt\fP\-\fBl\fP binding, which lists the directory of the token under the cursor, correctly expands tilde (\fB~\fP) to the home directory (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9954'\fI\%#9954\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9954\fP>\X'tty: link').
.IP \(bu 2
Various fish utilities that use an external pager will now try a selection of common pagers if the \fBPAGER\fP environment variable is not set, or write the output to the screen without a pager if there is not one available (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10074'\fI\%#10074\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10074\fP>\X'tty: link').
.IP \(bu 2
Command\-specific tab completions may now offer results whose first character is a period. For example, it is now possible to tab\-complete \fBgit add\fP for files with leading periods. The default file completions hide these files, unless the token itself has a leading period (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3707'\fI\%#3707\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3707\fP>\X'tty: link').
.UNINDENT
.SS Improved prompts
.INDENT 0.0
.IP \(bu 2
The default theme now only uses named colors, so it will track the terminal\(aqs palette (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9913'\fI\%#9913\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9913\fP>\X'tty: link').
.IP \(bu 2
The Dracula theme has now been synced with upstream (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9807'\fI\%#9807\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9807\fP>\X'tty: link'); use \fBfish_config\fP to re\-apply it to pick up the changes.
.IP \(bu 2
\fBfish_vcs_prompt\fP now also supports fossil (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9497'\fI\%#9497\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9497\fP>\X'tty: link').
.IP \(bu 2
Prompts which display the working directory using the \fBprompt_pwd\fP function correctly display directories beginning with dashes (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10169'\fI\%#10169\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10169\fP>\X'tty: link').
.UNINDENT
.SS Completions
.INDENT 0.0
.IP \(bu 2
Added completions for:
.INDENT 2.0
.IP \(bu 2
\fBage\fP and \fBage\-keygen\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9813'\fI\%#9813\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9813\fP>\X'tty: link')
.IP \(bu 2
\fBairmon\-ng\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10116'\fI\%#10116\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10116\fP>\X'tty: link')
.IP \(bu 2
\fBar\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9720'\fI\%#9720\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9720\fP>\X'tty: link')
.IP \(bu 2
\fBblender\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9905'\fI\%#9905\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9905\fP>\X'tty: link')
.IP \(bu 2
\fBbws\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10165'\fI\%#10165\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10165\fP>\X'tty: link')
.IP \(bu 2
\fBcalendar\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10138'\fI\%#10138\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10138\fP>\X'tty: link')
.IP \(bu 2
\fBcheckinstall\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10106'\fI\%#10106\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10106\fP>\X'tty: link')
.IP \(bu 2
\fBcrc\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10034'\fI\%#10034\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10034\fP>\X'tty: link')
.IP \(bu 2
\fBdoctl\fP
.IP \(bu 2
\fBgimp\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9904'\fI\%#9904\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9904\fP>\X'tty: link')
.IP \(bu 2
\fBgojq\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9740'\fI\%#9740\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9740\fP>\X'tty: link')
.IP \(bu 2
\fBhorcrux\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9922'\fI\%#9922\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9922\fP>\X'tty: link')
.IP \(bu 2
\fBibmcloud\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10004'\fI\%#10004\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10004\fP>\X'tty: link')
.IP \(bu 2
\fBiwctl\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6884'\fI\%#6884\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6884\fP>\X'tty: link')
.IP \(bu 2
\fBjava_home\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9998'\fI\%#9998\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9998\fP>\X'tty: link')
.IP \(bu 2
\fBkrita\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9903'\fI\%#9903\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9903\fP>\X'tty: link')
.IP \(bu 2
\fBoc\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10034'\fI\%#10034\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10034\fP>\X'tty: link')
.IP \(bu 2
\fBqjs\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9723'\fI\%#9723\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9723\fP>\X'tty: link')
.IP \(bu 2
\fBqjsc\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9731'\fI\%#9731\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9731\fP>\X'tty: link')
.IP \(bu 2
\fBrename\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10136'\fI\%#10136\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10136\fP>\X'tty: link')
.IP \(bu 2
\fBrpm\-ostool\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9669'\fI\%#9669\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9669\fP>\X'tty: link')
.IP \(bu 2
\fBsmerge\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10135'\fI\%#10135\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10135\fP>\X'tty: link')
.IP \(bu 2
\fBuserdel\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10056'\fI\%#10056\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10056\fP>\X'tty: link')
.IP \(bu 2
\fBwatchexec\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10027'\fI\%#10027\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10027\fP>\X'tty: link')
.IP \(bu 2
\fBwpctl\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10043'\fI\%#10043\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10043\fP>\X'tty: link')
.IP \(bu 2
\fBxxd\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10137'\fI\%#10137\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10137\fP>\X'tty: link')
.IP \(bu 2
\fBzabbix\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9647'\fI\%#9647\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9647\fP>\X'tty: link')
.UNINDENT
.IP \(bu 2
The \fBzfs\fP completions no longer print errors about setting a read\-only variable (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9705'\fI\%#9705\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9705\fP>\X'tty: link').
.IP \(bu 2
The \fBkitty\fP completions have been removed in favor of keeping them upstream (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9750'\fI\%#9750\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9750\fP>\X'tty: link').
.IP \(bu 2
\fBgit\fP completions now support aliases that reference other aliases (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9992'\fI\%#9992\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9992\fP>\X'tty: link').
.IP \(bu 2
The \fBgw\fP and \fBgradlew\fP completions are loaded properly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10127'\fI\%#10127\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10127\fP>\X'tty: link').
.IP \(bu 2
Improvements to many other completions.
.IP \(bu 2
Improvements to the manual page completion generator (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9787'\fI\%#9787\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9787\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/9814'\fI\%#9814\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9814\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/9961'\fI\%#9961\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9961\fP>\X'tty: link').
.UNINDENT
.SS Other improvements
.INDENT 0.0
.IP \(bu 2
Improvements and corrections to the documentation.
.IP \(bu 2
The Web\-based configuration now uses a more readable style when printed, such as for a keybinding reference (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9828'\fI\%#9828\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9828\fP>\X'tty: link').
.IP \(bu 2
Updates to the German translations (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9824'\fI\%#9824\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9824\fP>\X'tty: link').
.IP \(bu 2
The colors of the Nord theme better match their official style (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10168'\fI\%#10168\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10168\fP>\X'tty: link').
.UNINDENT
.SS For distributors
.INDENT 0.0
.IP \(bu 2
The licensing information for some of the derived code distributed with fish was incomplete. Though the license information was present in the source distribution, it was not present in the documentation. This has been corrected (\X'tty: link https://github.com/fish-shell/fish-shell/issues/10162'\fI\%#10162\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/10162\fP>\X'tty: link').
.IP \(bu 2
The CMake configure step will now also look for libterminfo as an alternative name for libtinfo, as used in NetBSD curses (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9794'\fI\%#9794\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9794\fP>\X'tty: link').
.UNINDENT

.sp
.ce
----

.ce 0
.sp
.SH FISH 3.6.4 (RELEASED DECEMBER 5, 2023)
.sp
This release contains a complete fix for the test suite failure in fish 3.6.2 and 3.6.3.

.sp
.ce
----

.ce 0
.sp
.SH FISH 3.6.3 (RELEASED DECEMBER 4, 2023)
.sp
This release contains a fix for a test suite failure in fish 3.6.2.

.sp
.ce
----

.ce 0
.sp
.SH FISH 3.6.2 (RELEASED DECEMBER 4, 2023)
.sp
This release of fish contains a security fix for CVE\-2023\-49284, a minor security problem identified
in fish 3.6.1 and previous versions (thought to affect all released versions of fish).
.sp
fish uses certain Unicode non\-characters internally for marking wildcards and expansions. It
incorrectly allowed these markers to be read on command substitution output, rather than
transforming them into a safe internal representation.
.sp
For example, \fBecho \eUFDD2HOME\fP has the same output as \fBecho $HOME\fP\&.
.sp
While this may cause unexpected behavior with direct input, this may become a minor security problem
if the output is being fed from an external program into a command substitution where this output
may not be expected.

.sp
.ce
----

.ce 0
.sp
.SH FISH 3.6.1 (RELEASED MARCH 25, 2023)
.sp
This release of fish contains a number of fixes for problems identified in fish 3.6.1, as well as some enhancements.
.SS Notable improvements and fixes
.INDENT 0.0
.IP \(bu 2
\fBabbr \-\-erase\fP now also erases the universal variables used by the old abbr function. That means:
.INDENT 2.0
.INDENT 3.5
.sp
.EX
abbr \-\-erase (abbr \-\-list)
.EE
.UNINDENT
.UNINDENT
.sp
can now be used to clean out all old abbreviations (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9468'\fI\%#9468\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9468\fP>\X'tty: link').
.IP \(bu 2
\fBabbr \-\-add \-\-universal\fP now warns about \fB\-\-universal\fP being non\-functional, to make it easier to detect old\-style \fBabbr\fP calls (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9475'\fI\%#9475\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9475\fP>\X'tty: link').
.UNINDENT
.SS Deprecations and removed features
.INDENT 0.0
.IP \(bu 2
The Web\-based configuration for abbreviations has been removed, as it was not functional with the changes abbreviations introduced in 3.6.0 (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9460'\fI\%#9460\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9460\fP>\X'tty: link').
.UNINDENT
.SS Scripting improvements
.INDENT 0.0
.IP \(bu 2
\fBabbr \-\-list\fP no longer escapes the abbr name, which is necessary to be able to pass it to \fBabbr \-\-erase\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9470'\fI\%#9470\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9470\fP>\X'tty: link').
.IP \(bu 2
\fBread\fP will now print an error if told to set a read\-only variable, instead of silently doing nothing (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9346'\fI\%#9346\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9346\fP>\X'tty: link').
.IP \(bu 2
\fBset_color \-v\fP no longer crashes fish (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9640'\fI\%#9640\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9640\fP>\X'tty: link').
.UNINDENT
.SS Interactive improvements
.INDENT 0.0
.IP \(bu 2
Using \fBfish_vi_key_bindings\fP in combination with fish\(aqs \fB\-\-no\-config\fP mode works without locking up the shell (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9443'\fI\%#9443\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9443\fP>\X'tty: link').
.IP \(bu 2
The history pager now uses more screen space, usually half the screen (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9458'\fI\%#9458\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9458\fP>\X'tty: link')
.IP \(bu 2
Variables that were set while the locale was C (the default ASCII\-only locale) will now properly be encoded if the locale is switched (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2613'\fI\%#2613\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2613\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/9473'\fI\%#9473\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9473\fP>\X'tty: link').
.IP \(bu 2
Escape during history search restores the original command line again (fixing a regression in 3.6.0).
.IP \(bu 2
Using \fB\-\-help\fP on builtins now respects the \fB$MANPAGER\fP variable, in preference to \fB$PAGER\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9488'\fI\%#9488\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9488\fP>\X'tty: link').
.IP \(bu 2
\fBctrl\fP\-\fBg\fP closes the history pager, like other shells (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9484'\fI\%#9484\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9484\fP>\X'tty: link').
.IP \(bu 2
The documentation for the \fB:\fP, \fB[\fP and \fB\&.\fP builtin commands can now be looked up with \fBman\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9552'\fI\%#9552\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9552\fP>\X'tty: link').
.IP \(bu 2
fish no longer crashes when searching history for non\-ASCII codepoints case\-insensitively (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9628'\fI\%#9628\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9628\fP>\X'tty: link').
.IP \(bu 2
The \fBalt\fP\-\fBs\fP binding will now also use \fBplease\fP if available (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9635'\fI\%#9635\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9635\fP>\X'tty: link').
.IP \(bu 2
Themes that don\(aqt specify every color option can be installed correctly in the Web\-based configuration (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9590'\fI\%#9590\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9590\fP>\X'tty: link').
.IP \(bu 2
Compatibility with Midnight Commander\(aqs prompt integration has been improved (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9540'\fI\%#9540\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9540\fP>\X'tty: link').
.IP \(bu 2
A spurious error, noted when using fish in Google Drive directories under WSL 2, has been silenced (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9550'\fI\%#9550\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9550\fP>\X'tty: link').
.IP \(bu 2
Using \fBread\fP in \fBfish_greeting\fP or similar functions will not trigger an infinite loop (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9564'\fI\%#9564\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9564\fP>\X'tty: link').
.IP \(bu 2
Compatibility when upgrading from old versions of fish (before 3.4.0) has been improved (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9569'\fI\%#9569\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9569\fP>\X'tty: link').
.UNINDENT
.SS Improved prompts
.INDENT 0.0
.IP \(bu 2
The git prompt will compute the stash count to be used independently of the informative status (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9572'\fI\%#9572\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9572\fP>\X'tty: link').
.UNINDENT
.SS Completions
.INDENT 0.0
.IP \(bu 2
Added completions for:
.INDENT 2.0
.IP \(bu 2
\fBapkanalyzer\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9558'\fI\%#9558\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9558\fP>\X'tty: link')
.IP \(bu 2
\fBneovim\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9543'\fI\%#9543\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9543\fP>\X'tty: link')
.IP \(bu 2
\fBotool\fP
.IP \(bu 2
\fBpre\-commit\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9521'\fI\%#9521\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9521\fP>\X'tty: link')
.IP \(bu 2
\fBproxychains\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9486'\fI\%#9486\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9486\fP>\X'tty: link')
.IP \(bu 2
\fBscrypt\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9583'\fI\%#9583\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9583\fP>\X'tty: link')
.IP \(bu 2
\fBstow\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9571'\fI\%#9571\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9571\fP>\X'tty: link')
.IP \(bu 2
\fBtrash\fP and helper utilities \fBtrash\-empty\fP, \fBtrash\-list\fP, \fBtrash\-put\fP, \fBtrash\-restore\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9560'\fI\%#9560\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9560\fP>\X'tty: link')
.IP \(bu 2
\fBssh\-copy\-id\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9675'\fI\%#9675\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9675\fP>\X'tty: link')
.UNINDENT
.IP \(bu 2
Improvements to many completions, including the speed of completing directories in WSL 2 (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9574'\fI\%#9574\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9574\fP>\X'tty: link').
.IP \(bu 2
Completions using \fB__fish_complete_suffix\fP are now offered in the correct order, fixing a regression in 3.6.0 (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8924'\fI\%#8924\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8924\fP>\X'tty: link').
.IP \(bu 2
\fBgit\fP completions for \fBgit\-foo\fP\-style commands was restored, fixing a regression in 3.6.0 (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9457'\fI\%#9457\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9457\fP>\X'tty: link').
.IP \(bu 2
File completion now offers \fB\&../\fP and \fB\&./\fP again, fixing a regression in 3.6.0 (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9477'\fI\%#9477\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9477\fP>\X'tty: link').
.IP \(bu 2
The behaviour of completions using \fB__fish_complete_path\fP matches standard path completions (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9285'\fI\%#9285\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9285\fP>\X'tty: link').
.UNINDENT
.SS Other improvements
.INDENT 0.0
.IP \(bu 2
Improvements and corrections to the documentation.
.UNINDENT
.SS For distributors
.INDENT 0.0
.IP \(bu 2
fish 3.6.1 builds correctly on Cygwin (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9502'\fI\%#9502\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9502\fP>\X'tty: link').
.UNINDENT

.sp
.ce
----

.ce 0
.sp
.SH FISH 3.6.0 (RELEASED JANUARY 7, 2023)
.SS Notable improvements and fixes
.INDENT 0.0
.IP \(bu 2
By default, \fBctrl\fP\-\fBr\fP now opens the command history in the pager (\X'tty: link https://github.com/fish-shell/fish-shell/issues/602'\fI\%#602\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/602\fP>\X'tty: link'). This is fully searchable and syntax\-highlighted, as an alternative to the incremental search seen in other shells. The new special input function \fBhistory\-pager\fP has been added for custom bindings.
.IP \(bu 2
Abbrevations are more flexible (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9313'\fI\%#9313\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9313\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/5003'\fI\%#5003\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5003\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/2287'\fI\%#2287\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2287\fP>\X'tty: link'):
.INDENT 2.0
.IP \(bu 2
They may optionally replace tokens anywhere on the command line, instead of only commands
.IP \(bu 2
Matching tokens may be described using a regular expression instead of a literal word
.IP \(bu 2
The replacement text may be produced by a fish function, instead of a literal word
.IP \(bu 2
They may position the cursor anywhere in the expansion, instead of at the end
.UNINDENT
.sp
For example:
.INDENT 2.0
.INDENT 3.5
.sp
.EX
function multicd
    echo cd (string repeat \-n (math (string length \-\- $argv[1]) \- 1) ../)
end

abbr \-\-add dotdot \-\-regex \(aq^\e.\e.+$\(aq \-\-function multicd
.EE
.UNINDENT
.UNINDENT
.sp
This expands \fB\&..\fP to \fBcd ../\fP, \fB\&...\fP to \fBcd ../../\fP and \fB\&....\fP to \fBcd ../../../\fP and so on.
.sp
Or:
.INDENT 2.0
.INDENT 3.5
.sp
.EX
function last_history_item; echo $history[1]; end
abbr \-a !! \-\-position anywhere \-\-function last_history_item
.EE
.UNINDENT
.UNINDENT
.sp
which expands \fB!!\fP to the last history item, anywhere on the command line, mimicking other shells\(aq history expansion.
.sp
See \fI\%the documentation\fP for more.
.IP \(bu 2
\fBpath\fP gained a new \fBmtime\fP subcommand to print the modification time stamp for files. For example, this can be used to handle cache file ages (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9057'\fI\%#9057\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9057\fP>\X'tty: link'):
.INDENT 2.0
.INDENT 3.5
.sp
.EX
> touch foo
> sleep 10
> path mtime \-\-relative foo
10
.EE
.UNINDENT
.UNINDENT
.IP \(bu 2
\fBstring\fP gained a new \fBshorten\fP subcommand to shorten strings to a given visible width (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9156'\fI\%#9156\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9156\fP>\X'tty: link'):
.INDENT 2.0
.INDENT 3.5
.sp
.EX
> string shorten \-\-max 10 \(dqHello this is a long string\(dq
Hello thi…
.EE
.UNINDENT
.UNINDENT
.IP \(bu 2
\fBtest\fP (aka \fB[\fP) gained \fB\-ot\fP (older than) and \fB\-nt\fP (newer than) operators to compare file modification times, and \fB\-ef\fP to compare whether the arguments are the same file (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3589'\fI\%#3589\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3589\fP>\X'tty: link').
.IP \(bu 2
fish will now mark the extent of many errors with a squiggly line, instead of just a caret (\fB^\fP) at the beginning (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9130'\fI\%#9130\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9130\fP>\X'tty: link'). For example:
.INDENT 2.0
.INDENT 3.5
.sp
.EX
checks/set.fish (line 471): for: a,b: invalid variable name. See \(gahelp identifiers\(ga
for a,b in y 1 z 3
    ^~^
.EE
.UNINDENT
.UNINDENT
.IP \(bu 2
A new function, \fBfish_delta\fP, shows changes that have been made in fish\(aqs configuration from the defaults (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9255'\fI\%#9255\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9255\fP>\X'tty: link').
.IP \(bu 2
\fBset \-\-erase\fP can now be used with multiple scopes at once, like \fBset \-efglU foo\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7711'\fI\%#7711\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7711\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/9280'\fI\%#9280\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9280\fP>\X'tty: link').
.IP \(bu 2
\fBstatus\fP gained a new subcommand, \fBcurrent\-commandline\fP, which retrieves the entirety of the currently\-executing command line when called from a function during execution. This allows easier job introspection (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8905'\fI\%#8905\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8905\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/9296'\fI\%#9296\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9296\fP>\X'tty: link').
.UNINDENT
.SS Deprecations and removed features
.INDENT 0.0
.IP \(bu 2
The \fB\ex\fP and \fB\eX\fP escape syntax is now equivalent. \fB\exAB\fP previously behaved the same as \fB\eXAB\fP, except that it would error if the value \(dqAB\(dq was larger than \(dq7f\(dq (127 in decimal, the highest ASCII value) (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9247'\fI\%#9247\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9247\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/9245'\fI\%#9245\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9245\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/1352'\fI\%#1352\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1352\fP>\X'tty: link').
.IP \(bu 2
The \fBfish_git_prompt\fP will now only turn on features if the appropriate variable has been set to a true value (of \(dq1\(dq, \(dqyes\(dq or \(dqtrue\(dq) instead of just checking if it is defined. This allows specifically turning features \fIoff\fP without having to erase variables, such as via universal variables. If you have defined a variable to a different value and expect it to count as true, you need to change it (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9274'\fI\%#9274\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9274\fP>\X'tty: link').
For example, \fBset \-g __fish_git_prompt_show_informative_status 0\fP previously would have enabled informative status (because any value would have done so), but now it turns it off.
.IP \(bu 2
Abbreviations are no longer stored in universal variables. Existing universal abbreviations are still imported, but new abbreviations should be added to \fBconfig.fish\fP\&.
.IP \(bu 2
The short option \fB\-r\fP for abbreviations has changed from \fBrename\fP to \fBregex\fP, for consistency with \fBstring\fP\&.
.UNINDENT
.SS Scripting improvements
.INDENT 0.0
.IP \(bu 2
\fBargparse\fP can now be used without option specifications, to allow using \fB\-\-min\-args\fP, \fB\-\-max\-args\fP or for commands that take no options (but might in future) (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9006'\fI\%#9006\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9006\fP>\X'tty: link'):
.INDENT 2.0
.INDENT 3.5
.sp
.EX
function my_copy
    argparse \-\-min\-args 2 \-\- $argv
    or return

    cp $argv
end
.EE
.UNINDENT
.UNINDENT
.IP \(bu 2
\fBset \-\-show\fP now shows when a variable was inherited from fish\(aqs parent process, which should help with debugging (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9029'\fI\%#9029\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9029\fP>\X'tty: link'):
.INDENT 2.0
.INDENT 3.5
.sp
.EX
> set \-\-show XDG_DATA_DIRS
$XDG_DATA_DIRS: set in global scope, exported, a path variable with 4 elements
$XDG_DATA_DIRS[1]: |/home/alfa/.local/share/flatpak/exports/share|
$XDG_DATA_DIRS[2]: |/var/lib/flatpak/exports/share|
$XDG_DATA_DIRS[3]: |/usr/local/share|
$XDG_DATA_DIRS[4]: |/usr/share|
$XDG_DATA_DIRS: originally inherited as |/home/alfa/.local/share/flatpak/exports/share:/var/lib/flatpak/exports/share:/usr/local/share/:/usr/share/|
.EE
.UNINDENT
.UNINDENT
.IP \(bu 2
The read limit is now restored to the default when \fI\%fish_read_limit\fP is unset (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9129'\fI\%#9129\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9129\fP>\X'tty: link').
.IP \(bu 2
\fBmath\fP produces an error for division\-by\-zero, as well as augmenting some errors with their extent (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9190'\fI\%#9190\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9190\fP>\X'tty: link'). This changes behavior in some limited cases, such as:
.INDENT 2.0
.INDENT 3.5
.sp
.EX
math min 1 / 0, 5
.EE
.UNINDENT
.UNINDENT
.sp
which would previously print \(dq5\(dq (because in floating point division \(dq1 / 0\(dq yields infinite, and 5 is smaller than infinite) but will now return an error.
.IP \(bu 2
\fBfish_clipboard_copy\fP and \fBfish_clipboard_paste\fP can now be used in pipes (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9271'\fI\%#9271\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9271\fP>\X'tty: link'):
.INDENT 2.0
.INDENT 3.5
.sp
.EX
git rev\-list 3.5.1 | fish_clipboard_copy

fish_clipboard_paste | string join + | math
.EE
.UNINDENT
.UNINDENT
.IP \(bu 2
\fBstatus fish\-path\fP returns a fully\-normalised path, particularly noticeable on NetBSD (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9085'\fI\%#9085\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9085\fP>\X'tty: link').
.UNINDENT
.SS Interactive improvements
.INDENT 0.0
.IP \(bu 2
If the terminal definition for \fI\%TERM\fP can\(aqt be found, fish now tries using the \(dqxterm\-256color\(dq and \(dqxterm\(dq definitions before \(dqansi\(dq and \(dqdumb\(dq. As the majority of terminal emulators in common use are now more or less xterm\-compatible (often even explicitly claiming the xterm\-256color entry), this should often result in a fully or almost fully usable terminal (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9026'\fI\%#9026\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9026\fP>\X'tty: link').
.IP \(bu 2
A new variable, \fI\%fish_cursor_selection_mode\fP, can be used to configure whether the command line selection includes the character under the cursor (\fBinclusive\fP) or not (\fBexclusive\fP). The new default is \fBexclusive\fP; use \fBset fish_cursor_selection_mode inclusive\fP to get the previous behavior back (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7762'\fI\%#7762\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7762\fP>\X'tty: link').
.IP \(bu 2
fish\(aqs completion pager now fills half the terminal on first tab press instead of only 4 rows, which should make results visible more often and save key presses, without constantly snapping fish to the top of the terminal (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9105'\fI\%#9105\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9105\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/2698'\fI\%#2698\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2698\fP>\X'tty: link').
.IP \(bu 2
The \fBcomplete\-and\-search\fP binding, used with \fBshift\fP\-\fBtab\fP by default, selects the first item in the results immediately (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9080'\fI\%#9080\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9080\fP>\X'tty: link').
.IP \(bu 2
\fBbind\fP output is now syntax\-highlighted when used interacively.
.IP \(bu 2
\fBalt\fP\-\fBh\fP (the default \fB__fish_man_page\fP binding) does a better job of showing the manual page of the command under cursor (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9020'\fI\%#9020\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9020\fP>\X'tty: link').
.IP \(bu 2
If \fI\%fish_color_valid_path\fP contains an actual color instead of just modifiers, those will be used for valid paths even if the underlying color isn\(aqt \(dqnormal\(dq (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9159'\fI\%#9159\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9159\fP>\X'tty: link').
.IP \(bu 2
The key combination for the QUIT terminal sequence, often \fBctrl\fP\-\fB\e\fP (\fB\ex1c\fP), can now be used as a binding (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9234'\fI\%#9234\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9234\fP>\X'tty: link').
.IP \(bu 2
fish\(aqs vi mode uses normal xterm\-style sequences to signal cursor change, instead of using the iTerm\(aqs proprietary escape sequences. This allows for a blinking cursor and makes it work in complicated scenarios with nested terminals. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3741'\fI\%#3741\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3741\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/9172'\fI\%#9172\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9172\fP>\X'tty: link')
.IP \(bu 2
When running fish on a remote system (such as inside SSH or a container), \fBctrl\fP\-\fBx\fP now copies to the local client system\(aqs clipboard if the terminal supports OSC 52.
.IP \(bu 2
\fBcommandline\fP gained two new options, \fB\-\-selection\-start\fP and \fB\-\-selection\-end\fP, to set the start/end of the current selection (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9197'\fI\%#9197\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9197\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/9215'\fI\%#9215\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9215\fP>\X'tty: link').
.IP \(bu 2
fish\(aqs builtins now handle keyboard interrupts (\fBctrl\fP\-\fBc\fP) correctly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9266'\fI\%#9266\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9266\fP>\X'tty: link').
.UNINDENT
.SS Completions
.INDENT 0.0
.IP \(bu 2
Added completions for:
.INDENT 2.0
.IP \(bu 2
\fBark\fP
.IP \(bu 2
\fBasciinema\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9257'\fI\%#9257\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9257\fP>\X'tty: link')
.IP \(bu 2
\fBclojure\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9272'\fI\%#9272\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9272\fP>\X'tty: link')
.IP \(bu 2
\fBcsh\fP
.IP \(bu 2
\fBdirenv\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9268'\fI\%#9268\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9268\fP>\X'tty: link')
.IP \(bu 2
\fBdive\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9082'\fI\%#9082\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9082\fP>\X'tty: link')
.IP \(bu 2
\fBdolphin\fP
.IP \(bu 2
\fBdua\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9277'\fI\%#9277\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9277\fP>\X'tty: link')
.IP \(bu 2
\fBefivar\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9318'\fI\%#9318\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9318\fP>\X'tty: link')
.IP \(bu 2
\fBeg\fP
.IP \(bu 2
\fBes\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9388'\fI\%#9388\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9388\fP>\X'tty: link')
.IP \(bu 2
\fBfirefox\-developer\-edition\fP and \fBfirefox\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9090'\fI\%#9090\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9090\fP>\X'tty: link')
.IP \(bu 2
\fBfortune\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9177'\fI\%#9177\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9177\fP>\X'tty: link')
.IP \(bu 2
\fBkb\fP
.IP \(bu 2
\fBkind\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9110'\fI\%#9110\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9110\fP>\X'tty: link')
.IP \(bu 2
\fBkonsole\fP
.IP \(bu 2
\fBksh\fP
.IP \(bu 2
\fBloadkeys\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9312'\fI\%#9312\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9312\fP>\X'tty: link')
.IP \(bu 2
\fBokular\fP
.IP \(bu 2
\fBop\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9300'\fI\%#9300\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9300\fP>\X'tty: link')
.IP \(bu 2
\fBouch\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9405'\fI\%#9405\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9405\fP>\X'tty: link')
.IP \(bu 2
\fBpix\fP
.IP \(bu 2
\fBreadelf\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8746'\fI\%#8746\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8746\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/9386'\fI\%#9386\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9386\fP>\X'tty: link')
.IP \(bu 2
\fBqshell\fP
.IP \(bu 2
\fBrc\fP
.IP \(bu 2
\fBsad\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9145'\fI\%#9145\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9145\fP>\X'tty: link')
.IP \(bu 2
\fBtcsh\fP
.IP \(bu 2
\fBtoot\fP
.IP \(bu 2
\fBtox\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9078'\fI\%#9078\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9078\fP>\X'tty: link')
.IP \(bu 2
\fBwish\fP
.IP \(bu 2
\fBxed\fP
.IP \(bu 2
\fBxonsh\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9389'\fI\%#9389\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9389\fP>\X'tty: link')
.IP \(bu 2
\fBxplayer\fP
.IP \(bu 2
\fBxreader\fP
.IP \(bu 2
\fBxviewer\fP
.IP \(bu 2
\fByash\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9391'\fI\%#9391\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9391\fP>\X'tty: link')
.IP \(bu 2
\fBzig\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9083'\fI\%#9083\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9083\fP>\X'tty: link')
.UNINDENT
.IP \(bu 2
Improvements to many completions, including making \fBcd\fP completion much faster (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9220'\fI\%#9220\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9220\fP>\X'tty: link').
.IP \(bu 2
Completion of tilde (\fB~\fP) works properly even when the file name contains an escaped character (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9073'\fI\%#9073\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9073\fP>\X'tty: link').
.IP \(bu 2
fish no longer loads completions if the command is used via a relative path and is not in \fI\%PATH\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9133'\fI\%#9133\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9133\fP>\X'tty: link').
.IP \(bu 2
fish no longer completes inside of comments (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9320'\fI\%#9320\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9320\fP>\X'tty: link').
.UNINDENT
.SS Improved terminal support
.INDENT 0.0
.IP \(bu 2
Opening \fBhelp\fP on WSL now uses PowerShell to open the browser if available, removing some awkward UNC path errors (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9119'\fI\%#9119\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9119\fP>\X'tty: link').
.UNINDENT
.SS Other improvements
.INDENT 0.0
.IP \(bu 2
The Web\-based configuration tool now works on systems with IPv6 disabled (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3857'\fI\%#3857\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3857\fP>\X'tty: link').
.IP \(bu 2
Aliases can ignore arguments by ending them with \fB#\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9199'\fI\%#9199\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9199\fP>\X'tty: link').
.IP \(bu 2
\fBstring\fP is now faster when reading large strings from stdin (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9139'\fI\%#9139\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9139\fP>\X'tty: link').
.IP \(bu 2
\fBstring repeat\fP uses less memory and is faster. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9124'\fI\%#9124\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9124\fP>\X'tty: link')
.IP \(bu 2
Builtins are much faster when writing to a pipe or file. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9229'\fI\%#9229\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9229\fP>\X'tty: link').
.IP \(bu 2
Performance improvements to highlighting (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9180'\fI\%#9180\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9180\fP>\X'tty: link') should make using fish more pleasant on slow systems.
.IP \(bu 2
On 32\-bit systems, globs like \fB*\fP will no longer fail to return some files, as large file support has been enabled.
.UNINDENT
.SS Fixed bugs
.INDENT 0.0
.IP \(bu 2
The history search text for a token search is now highlighted correctly if the line contains multiple instances of that text (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9066'\fI\%#9066\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9066\fP>\X'tty: link').
.IP \(bu 2
\fBprocess\-exit\fP and \fBjob\-exit\fP events are now generated for all background jobs, including those launched from event handlers (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9096'\fI\%#9096\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9096\fP>\X'tty: link').
.IP \(bu 2
A crash when completing a token that contained both a potential glob and a quoted variable expansion was fixed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9137'\fI\%#9137\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9137\fP>\X'tty: link').
.IP \(bu 2
\fBprompt_pwd\fP no longer accidentally overwrites a global or universal \fB$fish_prompt_pwd_full_dirs\fP when called with the \fB\-d\fP or \fB\-\-full\-length\-dirs\fP option (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9123'\fI\%#9123\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9123\fP>\X'tty: link').
.IP \(bu 2
A bug which caused fish to freeze or exit after running a command which does not preserve the foreground process group was fixed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9181'\fI\%#9181\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9181\fP>\X'tty: link').
.IP \(bu 2
The \(dqDisco\(dq sample prompt no longer prints an error in some working directories (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9164'\fI\%#9164\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9164\fP>\X'tty: link'). If you saved this prompt, you should run \fBfish_config prompt save disco\fP again.
.IP \(bu 2
fish launches external commands via the given path again, rather than always using an absolute path. This behaviour was inadvertently changed in 3.5.0 and is visible, for example, when launching a bash script which checks \fB$0\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9143'\fI\%#9143\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9143\fP>\X'tty: link').
.IP \(bu 2
\fBprintf\fP no longer tries to interpret the first argument as an option (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9132'\fI\%#9132\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9132\fP>\X'tty: link').
.IP \(bu 2
Interactive \fBread\fP in scripts will now have the correct keybindings again (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9227'\fI\%#9227\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9227\fP>\X'tty: link').
.IP \(bu 2
A possible stack overflow when recursively evaluating substitutions has been fixed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9302'\fI\%#9302\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9302\fP>\X'tty: link').
.IP \(bu 2
A crash with relative $CDPATH has been fixed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9407'\fI\%#9407\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9407\fP>\X'tty: link').
.IP \(bu 2
\fBprintf\fP now properly fills extra \fB%d\fP specifiers with 0 even on macOS and BSD (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9321'\fI\%#9321\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9321\fP>\X'tty: link').
.IP \(bu 2
\fBfish_key_reader\fP now correctly exits when receiving a SIGHUP (like after closing the terminal) (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9309'\fI\%#9309\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9309\fP>\X'tty: link').
.IP \(bu 2
\fBfish_config theme save\fP now works as documented instead of erroring out (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9088'\fI\%#9088\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9088\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/9273'\fI\%#9273\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9273\fP>\X'tty: link').
.IP \(bu 2
fish no longer triggers prompts to install command line tools when first run on macOS (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9343'\fI\%#9343\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9343\fP>\X'tty: link').
.IP \(bu 2
\fBfish_git_prompt\fP now quietly fails on macOS if the xcrun cache is not yet populated (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6625'\fI\%#6625\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6625\fP>\X'tty: link'), working around a potential hang.
.UNINDENT
.SS For distributors
.INDENT 0.0
.IP \(bu 2
The vendored PCRE2 sources have been removed. It is recommended to declare PCRE2 as a dependency when packaging fish. If the CMake variable FISH_USE_SYSTEM_PCRE2 is false, fish will now download and build PCRE2 from the official repo (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8355'\fI\%#8355\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8355\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/8363'\fI\%#8363\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8363\fP>\X'tty: link'). Note this variable defaults to true if PCRE2 is found installed on the system.
.UNINDENT

.sp
.ce
----

.ce 0
.sp
.SH FISH 3.5.1 (RELEASED JULY 20, 2022)
.sp
This release of fish introduces the following small enhancements:
.INDENT 0.0
.IP \(bu 2
Cursor shaping for Vi mode is enabled by default in tmux, and will be used if the outer terminal is capable (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8981'\fI\%#8981\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8981\fP>\X'tty: link').
.IP \(bu 2
\fBprintf\fP returns a better error when used with arguments interpreted as octal numbers (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9035'\fI\%#9035\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9035\fP>\X'tty: link').
.IP \(bu 2
\fBhistory merge\fP when in private mode is now an error, rather than wiping out other sessions\(aq history (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9050'\fI\%#9050\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9050\fP>\X'tty: link').
.IP \(bu 2
The error message when launching a command that is built for the wrong architecture on macOS is more helpful (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9052'\fI\%#9052\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9052\fP>\X'tty: link').
.IP \(bu 2
Added completions for:
.INDENT 2.0
.IP \(bu 2
\fBchoose\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9065'\fI\%#9065\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9065\fP>\X'tty: link')
.IP \(bu 2
\fBexpect\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9060'\fI\%#9060\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9060\fP>\X'tty: link')
.IP \(bu 2
\fBnavi\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9064'\fI\%#9064\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9064\fP>\X'tty: link')
.IP \(bu 2
\fBqdbus\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9031'\fI\%#9031\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9031\fP>\X'tty: link')
.IP \(bu 2
\fBreflector\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9027'\fI\%#9027\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9027\fP>\X'tty: link')
.UNINDENT
.IP \(bu 2
Improvements to some completions.
.UNINDENT
.sp
This release also fixes a number of problems identified in fish 3.5.0.
.INDENT 0.0
.IP \(bu 2
Completing \fBgit blame\fP or \fBgit \-C\fP works correctly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9053'\fI\%#9053\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9053\fP>\X'tty: link').
.IP \(bu 2
On terminals that emit a \fBCSI u\fP sequence for \fBshift\fP\-\fBspace\fP, fish inserts a space instead of printing an error. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9054'\fI\%#9054\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9054\fP>\X'tty: link').
.IP \(bu 2
\fBstatus fish\-path\fP on Linux\-based platforms could print the path with a \(dq (deleted)\(dq suffix (such as \fB/usr/bin/fish (deleted)\fP), which is now removed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9019'\fI\%#9019\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9019\fP>\X'tty: link').
.IP \(bu 2
Cancelling an initial command (from fish\(aqs \fB\-\-init\-command\fP option) with \fBctrl\fP\-\fBc\fP no longer prevents configuration scripts from running (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9024'\fI\%#9024\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9024\fP>\X'tty: link').
.IP \(bu 2
The job summary contained extra blank lines if the prompt used multiple lines, which is now fixed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9044'\fI\%#9044\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9044\fP>\X'tty: link').
.IP \(bu 2
Using special input functions in bindings, in combination with \fBand\fP/\fBor\fP conditionals, no longer crashes (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9051'\fI\%#9051\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9051\fP>\X'tty: link').
.UNINDENT

.sp
.ce
----

.ce 0
.sp
.SH FISH 3.5.0 (RELEASED JUNE 16, 2022)
.SS Notable improvements and fixes
.INDENT 0.0
.IP \(bu 2
A new \fBpath\fP builtin command to filter and transform paths (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7659'\fI\%#7659\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7659\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/8958'\fI\%#8958\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8958\fP>\X'tty: link'). For example, to list all the separate extensions used on files in /usr/share/man (after removing one extension, commonly a \(dq.gz\(dq):
.INDENT 2.0
.INDENT 3.5
.sp
.EX
path filter \-f /usr/share/man/** | path change\-extension \(aq\(aq | path extension | path sort \-u
.EE
.UNINDENT
.UNINDENT
.IP \(bu 2
Tab (or any key bound to \fBcomplete\fP) now expands wildcards instead of invoking completions, if there is a wildcard in the path component under the cursor (\X'tty: link https://github.com/fish-shell/fish-shell/issues/954'\fI\%#954\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/954\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/8593'\fI\%#8593\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8593\fP>\X'tty: link').
.IP \(bu 2
Scripts can now catch and handle the SIGINT and SIGTERM signals, either via \fBfunction \-\-on\-signal\fP or with \fBtrap\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6649'\fI\%#6649\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6649\fP>\X'tty: link').
.UNINDENT
.SS Deprecations and removed features
.INDENT 0.0
.IP \(bu 2
The \fBstderr\-nocaret\fP feature flag, introduced in fish 3.0 and enabled by default in fish 3.1, has been made read\-only.
That means it is no longer possible to disable it, and code supporting the \fB^\fP redirection has been removed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8857'\fI\%#8857\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8857\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/8865'\fI\%#8865\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8865\fP>\X'tty: link').
.sp
To recap: fish used to support \fB^\fP to redirect stderr, so you could use commands like:
.INDENT 2.0
.INDENT 3.5
.sp
.EX
test \(dq$foo\(dq \-gt 8 ^/dev/null
.EE
.UNINDENT
.UNINDENT
.sp
to ignore error messages. This made the \fB^\fP symbol require escaping and quoting, and was a bit of a weird shortcut considering \fB2>\fP already worked, which is only one character longer.
.sp
So the above can simply become:
.INDENT 2.0
.INDENT 3.5
.sp
.EX
test \(dq$foo\(dq \-gt 8 2>/dev/null
.EE
.UNINDENT
.UNINDENT
.IP \(bu 2
The following feature flags have been enabled by default:
.INDENT 2.0
.IP \(bu 2
\fBregex\-easyesc\fP, which makes \fBstring replace \-r\fP not do a superfluous round of unescaping in the replacement expression.
That means e.g. to escape any \(dqa\(dq or \(dqb\(dq in an argument you can use \fBstring replace \-ra \(aq([ab])\(aq \(aq\e\e\e\e$1\(aq foobar\fP instead of needing 8 backslashes.
.sp
This only affects the \fIreplacement\fP expression, not the \fImatch\fP expression (the \fB\(aq([ab])\(aq\fP part in the example).
A survey of plugins on GitHub did not turn up any affected code, so we do not expect this to affect many users.
.sp
This flag was introduced in fish 3.1.
.IP \(bu 2
\fBampersand\-nobg\-in\-token\fP, which means that \fB&\fP will not create a background job if it occurs in the middle of a word. For example, \fBecho foo&bar\fP will print \(dqfoo&bar\(dq instead of running \fBecho foo\fP in the background and then starting \fBbar\fP as a second job.
.sp
Reformatting with \fBfish_indent\fP would already introduce spaces, turning \fBecho foo&bar\fP into \fBecho foo & bar\fP\&.
.sp
This flag was introduced in fish 3.4.
.UNINDENT
.sp
To turn off these flags, add \fBno\-regex\-easyesc\fP or \fBno\-ampersand\-nobg\-in\-token\fP to \fBfish_features\fP and restart fish:
.INDENT 2.0
.INDENT 3.5
.sp
.EX
set \-Ua fish_features no\-regex\-easyesc
.EE
.UNINDENT
.UNINDENT
.sp
Like \fBstderr\-nocaret\fP, they will eventually be made read\-only.
.IP \(bu 2
Most \fBstring\fP subcommands no longer append a newline to their input if the input didn\(aqt have one (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8473'\fI\%#8473\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8473\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/3847'\fI\%#3847\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3847\fP>\X'tty: link')
.IP \(bu 2
Fish\(aqs escape sequence removal (like for \fBstring length \-\-visible\fP or to figure out how wide the prompt is) no longer has special support for non\-standard color sequences like from Data General terminals, e.g. the Data General Dasher D220 from 1984. This removes a bunch of work in the common case, allowing \fBstring length \-\-visible\fP to be much faster with unknown escape sequences. We don\(aqt expect anyone to have ever used fish with such a terminal (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8769'\fI\%#8769\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8769\fP>\X'tty: link').
.IP \(bu 2
Code to upgrade universal variables from fish before 3.0 has been removed. Users who upgrade directly from fish versions 2.7.1 or before will have to set their universal variables & abbreviations again. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8781'\fI\%#8781\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8781\fP>\X'tty: link')
.IP \(bu 2
The meaning of an empty color variable has changed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8793'\fI\%#8793\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8793\fP>\X'tty: link'). Previously, when a variable was set but empty, it would be interpreted as the \(dqnormal\(dq color. Now, empty color variables cause the same effect as unset variables \- the general highlighting variable for that type is used instead. For example:
.INDENT 2.0
.INDENT 3.5
.sp
.EX
set \-g fish_color_command blue
set \-g fish_color_keyword
.EE
.UNINDENT
.UNINDENT
.sp
would previously make keywords \(dqnormal\(dq (usually white in a dark terminal). Now it\(aqll make them blue. To achieve the previous behavior, use the normal color explicitly: \fBset \-g fish_color_keyword normal\fP\&.
.sp
This makes it easier to make self\-contained color schemes that don\(aqt accidentally use color that was set before.
\fBfish_config\fP has been adjusted to set known color variables that a theme doesn\(aqt explicitly set to empty.
.IP \(bu 2
\fBeval\fP is now a reserved keyword, so it can\(aqt be used as a function name. This follows \fBset\fP and \fBread\fP, and is necessary because it can\(aqt be cleanly shadowed by a function \- at the very least \fBeval set \-l argv foo\fP breaks. Fish will ignore autoload files for it, so left over \fBeval.fish\fP from previous fish versions won\(aqt be loaded.
.IP \(bu 2
The git prompt in informative mode now defaults to skipping counting untracked files, as this was extremely slow. To turn it on, set \fB__fish_git_prompt_showuntrackedfiles\fP or set the git config value \(dqbash.showuntrackedfiles\(dq to \fBtrue\fP explicitly (which can be done for individual repositories). The \(dqinformative+vcs\(dq sample prompt already skipped display of untracked files, but didn\(aqt do so in a way that skipped the computation, so it should be quite a bit faster in many cases (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8980'\fI\%#8980\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8980\fP>\X'tty: link').
.IP \(bu 2
The \fB__terlar_git_prompt\fP function, used by the \(dqTerlar\(dq sample prompt, has been rebuilt as a configuration of the normal \fBfish_git_prompt\fP to ease maintenance, improve performance and add features (like reading per\-repo git configuration). Some slight changes remain; users who absolutely must have the same behavior are encouraged to copy the old function (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9011'\fI\%#9011\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9011\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7918'\fI\%#7918\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7918\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/8979'\fI\%#8979\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8979\fP>\X'tty: link').
.UNINDENT
.SS Scripting improvements
.INDENT 0.0
.IP \(bu 2
Quoted command substitution that directly follow a variable expansion (like \fBecho \(dq$var$(echo x)\(dq\fP) no longer affect the variable expansion (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8849'\fI\%#8849\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8849\fP>\X'tty: link').
.IP \(bu 2
Fish now correctly expands command substitutions that are preceded by an escaped dollar (like \fBecho \e$(echo)\fP). This regressed in version 3.4.0.
.IP \(bu 2
\fBmath\fP can now handle underscores (\fB_\fP) as visual separators in numbers (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8611'\fI\%#8611\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8611\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/8496'\fI\%#8496\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8496\fP>\X'tty: link'):
.INDENT 2.0
.INDENT 3.5
.sp
.EX
math 5 + 2_123_252
.EE
.UNINDENT
.UNINDENT
.IP \(bu 2
\fBmath\fP\(aqs \fBmin\fP and \fBmax\fP functions now take a variable number of arguments instead of always requiring 2 (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8644'\fI\%#8644\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8644\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/8646'\fI\%#8646\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8646\fP>\X'tty: link'):
.INDENT 2.0
.INDENT 3.5
.sp
.EX
> math min 8,2,4
2
.EE
.UNINDENT
.UNINDENT
.IP \(bu 2
\fBread\fP is now faster as the last process in a pipeline (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8552'\fI\%#8552\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8552\fP>\X'tty: link').
.IP \(bu 2
\fBstring join\fP gained a new \fB\-\-no\-empty\fP flag to skip empty arguments (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8774'\fI\%#8774\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8774\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/8351'\fI\%#8351\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8351\fP>\X'tty: link').
.IP \(bu 2
\fBread\fP now only triggers the \fBfish_read\fP event, not the \fBfish_prompt\fP event (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8797'\fI\%#8797\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8797\fP>\X'tty: link'). It was supposed to work this way in fish 3.2.0 and later, but both events were emitted.
.IP \(bu 2
The TTY modes are no longer restored when non\-interactive shells exit. This fixes wrong tty modes in pipelines with interactive commands. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8705'\fI\%#8705\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8705\fP>\X'tty: link').
.IP \(bu 2
Some functions shipped with fish printed error messages to standard output, but they now they rightly go to standard error (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8855'\fI\%#8855\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8855\fP>\X'tty: link').
.IP \(bu 2
\fBjobs\fP now correctly reports CPU usage as a percentage, instead of as a number of clock ticks (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8919'\fI\%#8919\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8919\fP>\X'tty: link').
.IP \(bu 2
\fBprocess\-exit\fP events now fire when the process exits even if the job has not yet exited, fixing a regression in 3.4.1 (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8914'\fI\%#8914\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8914\fP>\X'tty: link').
.UNINDENT
.SS Interactive improvements
.INDENT 0.0
.IP \(bu 2
Fish now reports a special error if a command wasn\(aqt found and there is a non\-executable file by that name in \fI\%PATH\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8804'\fI\%#8804\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8804\fP>\X'tty: link').
.IP \(bu 2
\fBless\fP and other interactive commands would occasionally be stopped when run in a pipeline with fish functions; this has been fixed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8699'\fI\%#8699\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8699\fP>\X'tty: link').
.IP \(bu 2
Case\-changing autosuggestions generated mid\-token now correctly append only the suffix, instead of duplicating the token (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8820'\fI\%#8820\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8820\fP>\X'tty: link').
.IP \(bu 2
\fBulimit\fP learned a number of new options for the resource limits available on Linux, FreeBSD ande NetBSD, and returns a specific warning if the limit specified is not available on the active operating system (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8823'\fI\%#8823\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8823\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/8786'\fI\%#8786\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8786\fP>\X'tty: link').
.IP \(bu 2
The \fBvared\fP command can now successfully edit variables named \(dqtmp\(dq or \(dqprompt\(dq (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8836'\fI\%#8836\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8836\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/8837'\fI\%#8837\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8837\fP>\X'tty: link').
.IP \(bu 2
\fBtime\fP now emits an error if used after the first command in a pipeline (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8841'\fI\%#8841\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8841\fP>\X'tty: link').
.IP \(bu 2
\fBfish_add_path\fP now prints a message for skipped non\-existent paths when using the \fB\-v\fP flag (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8884'\fI\%#8884\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8884\fP>\X'tty: link').
.IP \(bu 2
Since fish 3.2.0, pressing \fBctrl\fP\-\fBd\fP while a command is running would end up inserting a space into the next commandline, which has been fixed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8871'\fI\%#8871\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8871\fP>\X'tty: link').
.IP \(bu 2
A bug that caused multi\-line prompts to be moved down a line when pasting or switching modes has been fixed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3481'\fI\%#3481\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3481\fP>\X'tty: link').
.IP \(bu 2
The Web\-based configuration system no longer strips too many quotes in the abbreviation display (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8917'\fI\%#8917\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8917\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/8918'\fI\%#8918\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8918\fP>\X'tty: link').
.IP \(bu 2
Fish started with \fB\-\-no\-config\fP will now use the default keybindings (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8493'\fI\%#8493\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8493\fP>\X'tty: link')
.IP \(bu 2
When fish inherits a \fI\%USER\fP environment variable value that doesn\(aqt correspond to the current effective user ID, it will now correct it in all cases (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8879'\fI\%#8879\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8879\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/8583'\fI\%#8583\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8583\fP>\X'tty: link').
.IP \(bu 2
Fish sets a new \fI\%EUID\fP variable containing the current effective user id (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8866'\fI\%#8866\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8866\fP>\X'tty: link').
.IP \(bu 2
\fBhistory search\fP no longer interprets the search term as an option (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8853'\fI\%#8853\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8853\fP>\X'tty: link')
.IP \(bu 2
The status message when a job terminates should no longer be erased by a multiline prompt (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8817'\fI\%#8817\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8817\fP>\X'tty: link')
.UNINDENT
.SS New or improved bindings
.INDENT 0.0
.IP \(bu 2
The \fBalt\fP\-\fBs\fP binding will now insert \fBdoas\fP instead of \fBsudo\fP if necessary (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8942'\fI\%#8942\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8942\fP>\X'tty: link').
.IP \(bu 2
The \fBkill\-whole\-line\fP special input function now kills the newline preceeding the last line. This makes \fBdd\fP in vi\-mode clear the last line properly.
.IP \(bu 2
The new \fBkill\-inner\-line\fP special input function kills the line without any newlines, allowing \fBcc\fP in vi\-mode to clear the line while preserving newlines (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8983'\fI\%#8983\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8983\fP>\X'tty: link').
.IP \(bu 2
On terminals that emit special sequences for these combinations, \fBshift\fP\-\fBspace\fP is bound like \fBspace\fP, and \fBctrl\fP\-\fBenter\fP is bound like \fBreturn\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8874'\fI\%#8874\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8874\fP>\X'tty: link').
.UNINDENT
.SS Improved prompts
.INDENT 0.0
.IP \(bu 2
A new \fBAstronaut\fP prompt (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8775'\fI\%#8775\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8775\fP>\X'tty: link'), a multi\-line prompt using plain text reminiscent of the Starship.rs prompt.
.UNINDENT
.SS Completions
.INDENT 0.0
.IP \(bu 2
Added completions for:
.INDENT 2.0
.IP \(bu 2
\fBarchlinux\-java\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8911'\fI\%#8911\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8911\fP>\X'tty: link')
.IP \(bu 2
\fBapk\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8951'\fI\%#8951\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8951\fP>\X'tty: link')
.IP \(bu 2
\fBbrightnessctl\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8758'\fI\%#8758\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8758\fP>\X'tty: link')
.IP \(bu 2
\fBefibootmgr\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/9010'\fI\%#9010\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/9010\fP>\X'tty: link')
.IP \(bu 2
\fBfastboot\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8904'\fI\%#8904\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8904\fP>\X'tty: link')
.IP \(bu 2
\fBoptimus\-manager\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8913'\fI\%#8913\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8913\fP>\X'tty: link')
.IP \(bu 2
\fBrclone\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8819'\fI\%#8819\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8819\fP>\X'tty: link')
.IP \(bu 2
\fBsops\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8821'\fI\%#8821\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8821\fP>\X'tty: link')
.IP \(bu 2
\fBtuned\-adm\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8760'\fI\%#8760\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8760\fP>\X'tty: link')
.IP \(bu 2
\fBwg\-quick\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8687'\fI\%#8687\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8687\fP>\X'tty: link')
.UNINDENT
.IP \(bu 2
\fBcomplete\fP can now be given multiple \fB\-\-condition\fP options. They will be attempted in the order they were given, and only if all succeed will the completion be made available (as if they were connected with \fB&&\fP). This helps with caching \- fish\(aqs complete system stores the return value of each condition as long as the commandline doesn\(aqt change, so this can reduce the number of conditions that need to be evaluated (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8536'\fI\%#8536\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8536\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/8967'\fI\%#8967\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8967\fP>\X'tty: link').
.UNINDENT
.SS Improved terminal support
.INDENT 0.0
.IP \(bu 2
Working directory reporting is enabled for kitty (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8806'\fI\%#8806\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8806\fP>\X'tty: link').
.IP \(bu 2
Changing the cursor shape is now enabled by default in iTerm2 (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3696'\fI\%#3696\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3696\fP>\X'tty: link').
.UNINDENT
.SS For distributors
.INDENT 0.0
.IP \(bu 2
libatomic is now correctly detected as necessary when building on RISC\-V (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8850'\fI\%#8850\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8850\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/8851'\fI\%#8851\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8851\fP>\X'tty: link').
.IP \(bu 2
In some cases, the build process found the wrong libintl on macOS. This has been corrected (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5244'\fI\%#5244\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5244\fP>\X'tty: link').
.IP \(bu 2
The paths for completions, functions, and configuration snippets now include
subdirectories \fBfish/vendor_completions.d\fP, \fBfish/vendor_functions.d\fP, and
\fBfish/vendor_conf.d\fP (respectively) within \fBXDG_DATA_HOME\fP (or \fB~/.local/share\fP
if not defined) (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8887'\fI\%#8887\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8887\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7816'\fI\%#7816\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7816\fP>\X'tty: link').
.UNINDENT

.sp
.ce
----

.ce 0
.sp
.SH FISH 3.4.1 (RELEASED MARCH 25, 2022)
.sp
This release of fish fixes the following problems identified in fish 3.4.0:
.INDENT 0.0
.IP \(bu 2
An error printed after upgrading, where old instances could pick up a newer version of the \fBfish_title\fP function, has been fixed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8778'\fI\%#8778\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8778\fP>\X'tty: link')
.IP \(bu 2
fish builds correctly on NetBSD (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8788'\fI\%#8788\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8788\fP>\X'tty: link') and OpenIndiana (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8780'\fI\%#8780\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8780\fP>\X'tty: link').
.IP \(bu 2
\fBnextd\-or\-forward\-word\fP, bound to \fBalt\fP\-\fBright\fP by default, was inadvertently changed to move like \fBforward\-bigword\fP\&. This has been corrected (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8790'\fI\%#8790\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8790\fP>\X'tty: link').
.IP \(bu 2
\fBfuncsave \-q\fP and \fBfuncsave \-\-quiet\fP now work correctly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8830'\fI\%#8830\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8830\fP>\X'tty: link').
.IP \(bu 2
Issues with the \fBcsharp\fP and \fBnmcli\fP completions were corrected.
.UNINDENT
.sp
If you are upgrading from version 3.3.1 or before, please also review the release notes for 3.4.0 (included below).

.sp
.ce
----

.ce 0
.sp
.SH FISH 3.4.0 (RELEASED MARCH 12, 2022)
.SS Notable improvements and fixes
.INDENT 0.0
.IP \(bu 2
fish\(aqs command substitution syntax has been extended: \fB$(cmd)\fP now has the same meaning as \fB(cmd)\fP but it can be used inside double quotes, to prevent line splitting of the results (\X'tty: link https://github.com/fish-shell/fish-shell/issues/159'\fI\%#159\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/159\fP>\X'tty: link'):
.INDENT 2.0
.INDENT 3.5
.sp
.EX
foo (bar | string collect)
# can now be written as
foo \(dq$(bar)\(dq

# and

foo (bar)
# can now be written as
foo $(bar)
# this will still split on newlines only.
.EE
.UNINDENT
.UNINDENT
.IP \(bu 2
Complementing the \fBprompt\fP command in 3.3.0, \fBfish_config\fP gained a \fBtheme\fP subcommand to show and pick from the sample themes (meaning color schemes) directly in the terminal, instead of having to open a Web browser. For example \fBfish_config theme choose Nord\fP loads the Nord theme in the current session (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8132'\fI\%#8132\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8132\fP>\X'tty: link'). The current theme can be saved with \fBfish_config theme dump\fP, and custom themes can be added by saving them in \fB~/.config/fish/themes/\fP\&.
.IP \(bu 2
\fBset\fP and \fBread\fP learned a new option, \fB\-\-function\fP, to set a variable in the function\(aqs top scope. This should be a more familiar way of scoping variables and avoids issues with \fB\-\-local\fP, which is actually block\-scoped (\X'tty: link https://github.com/fish-shell/fish-shell/issues/565'\fI\%#565\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/565\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/8145'\fI\%#8145\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8145\fP>\X'tty: link'):
.INDENT 2.0
.INDENT 3.5
.sp
.EX
function demonstration
    if true
        set \-\-function foo bar
        set \-\-local baz banana
    end
    echo $foo # prints \(dqbar\(dq because $foo is still valid
    echo $baz # prints nothing because $baz went out of scope
end
.EE
.UNINDENT
.UNINDENT
.IP \(bu 2
\fBstring pad\fP now excludes escape sequences like colors that fish knows about, and a new \fB\-\-visible\fP flag to \fBstring length\fP makes it use that kind of visible width. This is useful to get the number of terminal cells an already colored string would occupy, like in a prompt. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8182'\fI\%#8182\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8182\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7784'\fI\%#7784\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7784\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/4012'\fI\%#4012\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4012\fP>\X'tty: link'):
.INDENT 2.0
.INDENT 3.5
.sp
.EX
> string length \-\-visible (set_color red)foo
3
.EE
.UNINDENT
.UNINDENT
.IP \(bu 2
Performance improvements to globbing, especially on systems using glibc. In some cases (large directories with files with many numbers in the names) this almost halves the time taken to expand the glob.
.IP \(bu 2
Autosuggestions can now be turned off by setting \fB$fish_autosuggestion_enabled\fP to 0, and (almost) all highlighting can be turned off by choosing the new \(dqNone\(dq theme. The exception is necessary colors, like those which distinguish autosuggestions from the actual command line. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8376'\fI\%#8376\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8376\fP>\X'tty: link')
.IP \(bu 2
The \fBfish_git_prompt\fP function, which is included in the default prompts, now overrides \fBgit\fP to avoid running  commands set by per\-repository configuration. This avoids a potential security issue in some circumstances, and has been assigned CVE\-2022\-20001 (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8589'\fI\%#8589\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8589\fP>\X'tty: link').
.UNINDENT
.SS Deprecations and removed features
.INDENT 0.0
.IP \(bu 2
A new feature flag, \fBampersand\-nobg\-in\-token\fP makes \fB&\fP only act as background operator if followed by a separator. In combination with \fBqmark\-noglob\fP, this allows entering most URLs at the command line without quoting or escaping (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7991'\fI\%#7991\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7991\fP>\X'tty: link'). For example:
.INDENT 2.0
.INDENT 3.5
.sp
.EX
> echo foo&bar # will print \(dqfoo&bar\(dq, instead of running \(dqecho foo\(dq in the background and executing \(dqbar\(dq
> echo foo & bar # will still run \(dqecho foo\(dq in the background and then run \(dqbar\(dq
# with both ampersand\-nobg\-in\-token and qmark\-noglob, this argument has no special characters anymore
> open https://www.youtube.com/watch?v=dQw4w9WgXcQ&feature=youtu.be
.EE
.UNINDENT
.UNINDENT
.sp
As a reminder, feature flags can be set on startup with \fBfish \-\-features ampersand\-nobg\-in\-token,qmark\-noglob\fP or with a universal variable called \fBfish_features\fP:
.INDENT 2.0
.INDENT 3.5
.sp
.EX
> set \-Ua fish_features ampersand\-nobg\-in\-token
.EE
.UNINDENT
.UNINDENT
.IP \(bu 2
\fB$status\fP is now forbidden as a command, to prevent a surprisingly common error among new users: Running \fBif $status\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8171'\fI\%#8171\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8171\fP>\X'tty: link'). This applies \fIonly\fP to \fB$status\fP, other variables are still allowed.
.IP \(bu 2
\fBset \-\-query\fP now returns an exit status of 255 if given no variable names. This means \fBif set \-q $foo\fP will not enter the if\-block if \fB$foo\fP is empty or unset. To restore the previous behavior, use \fBif not set \-q foo; or set \-q $foo\fP \- but this is unlikely to be desireable (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8214'\fI\%#8214\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8214\fP>\X'tty: link').
.IP \(bu 2
\fB_\fP is now a reserved keyword (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8342'\fI\%#8342\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8342\fP>\X'tty: link').
.IP \(bu 2
The special input functions \fBdelete\-or\-exit\fP, \fBnextd\-or\-forward\-word\fP and \fBprevd\-or\-backward\-word\fP replace fish functions of the same names (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8538'\fI\%#8538\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8538\fP>\X'tty: link').
.IP \(bu 2
Mac OS X 10.9 is no longer supported. The minimum Mac version is now 10.10 \(dqYosemite.\(dq
.UNINDENT
.SS Scripting improvements
.INDENT 0.0
.IP \(bu 2
\fBstring collect\fP supports a new \fB\-\-allow\-empty\fP option, which will output one empty argument in a command substitution that has no output (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8054'\fI\%#8054\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8054\fP>\X'tty: link'). This allows commands like \fBtest \-n (echo \-n | string collect \-\-allow\-empty)\fP to work more reliably. Note this can also be written as \fBtest \-n \(dq$(echo \-n)\(dq\fP (see above).
.IP \(bu 2
\fBstring match\fP gained a \fB\-\-groups\-only\fP option, which makes it only output capturing groups, excluding the full match. This allows \fBstring match\fP to do simple transformations (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6056'\fI\%#6056\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6056\fP>\X'tty: link'):
.INDENT 2.0
.INDENT 3.5
.sp
.EX
> string match \-r \-\-groups\-only \(aq(.*)fish\(aq \(aqcatfish\(aq \(aqtwofish\(aq \(aqblue fish\(aq | string escape
cat
two
\(aqblue \(aq
.EE
.UNINDENT
.UNINDENT
.IP \(bu 2
\fB$fish_user_paths\fP is now automatically deduplicated to fix a common user error of appending to it in config.fish when it is universal (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8117'\fI\%#8117\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8117\fP>\X'tty: link'). \fI\%fish_add_path\fP remains the recommended way to add to $PATH.
.IP \(bu 2
\fBreturn\fP can now be used outside functions. In scripts, it does the same thing as \fBexit\fP\&. In interactive mode,it sets \fB$status\fP without exiting (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8148'\fI\%#8148\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8148\fP>\X'tty: link').
.IP \(bu 2
An oversight prevented all syntax checks from running on commands given to \fBfish \-c\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8171'\fI\%#8171\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8171\fP>\X'tty: link'). This includes checks such as \fBexec\fP not being allowed in a pipeline, and \fB$$\fP not being a valid variable. Generally, another error was generated anyway.
.IP \(bu 2
\fBfish_indent\fP now correctly reformats tokens that end with a backslash followed by a newline (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8197'\fI\%#8197\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8197\fP>\X'tty: link').
.IP \(bu 2
\fBcommandline\fP gained an \fB\-\-is\-valid\fP option to check if the command line is syntactically valid and complete. This allows basic implementation of transient prompts (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8142'\fI\%#8142\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8142\fP>\X'tty: link').
.IP \(bu 2
\fBcommandline\fP gained a \fB\-\-paging\-full\-mode\fP option to check if the pager is showing all the possible lines (no \(dq7 more rows\(dq message) (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8485'\fI\%#8485\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8485\fP>\X'tty: link').
.IP \(bu 2
List expansion correctly reports an error when used with all zero indexes (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8213'\fI\%#8213\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8213\fP>\X'tty: link').
.IP \(bu 2
Running \fBfish\fP with a directory instead of a script as argument (eg \fBfish .\fP) no longer leads to an infinite loop. Instead it errors out immediately (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8258'\fI\%#8258\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8258\fP>\X'tty: link')
.IP \(bu 2
Some error messages occuring after fork, like \(dqtext file busy\(dq have been replaced by bespoke error messages for fish (like \(dqFile is currently open for writing\(dq). This also restores error messages with current glibc versions that removed sys_errlist (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8234'\fI\%#8234\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8234\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/4183'\fI\%#4183\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4183\fP>\X'tty: link').
.IP \(bu 2
The \fBrealpath\fP builtin now also squashes leading slashes with the \fB\-\-no\-symlinks\fP option (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8281'\fI\%#8281\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8281\fP>\X'tty: link').
.IP \(bu 2
When trying to \fBcd\fP to a dangling (broken) symbolic link, fish will print an error noting that the target is a broken link (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8264'\fI\%#8264\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8264\fP>\X'tty: link').
.IP \(bu 2
On MacOS terminals that are not granted permissions to access a folder, \fBcd\fP would print a spurious \(dqrotten symlink\(dq error, which has been corrected to \(dqpermission denied\(dq (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8264'\fI\%#8264\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8264\fP>\X'tty: link').
.IP \(bu 2
Since fish 3.0, \fBfor\fP loops would trigger a variable handler function before the loop was entered. As the variable had not actually changed or been set, this was a spurious event and has been removed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8384'\fI\%#8384\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8384\fP>\X'tty: link').
.IP \(bu 2
\fBmath\fP now correctly prints negative values and values larger than \fB2**31\fP when in hex or octal bases (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8417'\fI\%#8417\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8417\fP>\X'tty: link').
.IP \(bu 2
\fBdirs\fP always produces an exit status of 0, instead of sometimes returning 1 (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8211'\fI\%#8211\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8211\fP>\X'tty: link').
.IP \(bu 2
\fBcd \(dq\(dq\fP no longer crashes fish (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8147'\fI\%#8147\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8147\fP>\X'tty: link').
.IP \(bu 2
\fBset \-\-query\fP can now query whether a variable is a path variable via \fB\-\-path\fP or \fB\-\-unpath\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8494'\fI\%#8494\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8494\fP>\X'tty: link').
.IP \(bu 2
Tilde characters (\fB~\fP) produced by custom completions are no longer escaped when applied to the command line, making it easier to use the output of a recursive \fBcomplete \-C\fP in completion scripts (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4570'\fI\%#4570\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4570\fP>\X'tty: link').
.IP \(bu 2
\fBset \-\-show\fP reports when a variable is read\-only (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8179'\fI\%#8179\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8179\fP>\X'tty: link').
.IP \(bu 2
Erasing \fB$fish_emoji_width\fP will reset fish to the default guessed emoji width (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8274'\fI\%#8274\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8274\fP>\X'tty: link').
.IP \(bu 2
The \fBla\fP function no longer lists entries for \(dq.\(dq and \(dq..\(dq, matching other systems defaults (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8519'\fI\%#8519\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8519\fP>\X'tty: link').
.IP \(bu 2
\fBabbr \-q\fP returns the correct exit status when given multiple abbreviation names as arguments (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8431'\fI\%#8431\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8431\fP>\X'tty: link').
.IP \(bu 2
\fBcommand \-v\fP returns an exit status of 127 instead of 1 if no command was found (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8547'\fI\%#8547\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8547\fP>\X'tty: link').
.IP \(bu 2
\fBargparse\fP with \fB\-\-ignore\-unknown\fP no longer breaks with multiple unknown options in a short option group (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8637'\fI\%#8637\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8637\fP>\X'tty: link').
.IP \(bu 2
Comments inside command substitutions or brackets now correctly ignore parentheses, quotes, and brackets (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7866'\fI\%#7866\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7866\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/8022'\fI\%#8022\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8022\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/8695'\fI\%#8695\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8695\fP>\X'tty: link').
.IP \(bu 2
\fBcomplete \-C\fP supports a new \fB\-\-escape\fP option, which turns on escaping in returned completion strings (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3469'\fI\%#3469\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3469\fP>\X'tty: link').
.IP \(bu 2
Invalid byte or unicode escapes like \fB\eUtest\fP or \fB\exNotHex\fP are now a tokenizer error instead of causing the token to be truncated (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8545'\fI\%#8545\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8545\fP>\X'tty: link').
.UNINDENT
.SS Interactive improvements
.INDENT 0.0
.IP \(bu 2
Vi mode cursors are now set properly after \fBctrl\fP\-\fBc\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8125'\fI\%#8125\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8125\fP>\X'tty: link').
.IP \(bu 2
\fBfunced\fP will try to edit the whole file containing a function definition, if there is one (\X'tty: link https://github.com/fish-shell/fish-shell/issues/391'\fI\%#391\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/391\fP>\X'tty: link').
.IP \(bu 2
Running a command line consisting of just spaces now deletes an ephemeral (starting with space) history item again (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8232'\fI\%#8232\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8232\fP>\X'tty: link').
.IP \(bu 2
Command substitutions no longer respect job control, instead running inside fish\(aqs own process group (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8172'\fI\%#8172\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8172\fP>\X'tty: link'). This more closely matches other shells, and improves \fBctrl\fP\-\fBc\fP reliability inside a command substitution.
.IP \(bu 2
\fBhistory\fP and \fB__fish_print_help\fP now properly support \fBless\fP before version 530, including the version that ships with macOS. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8157'\fI\%#8157\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8157\fP>\X'tty: link').
.IP \(bu 2
\fBhelp\fP now knows which section is in which document again (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8245'\fI\%#8245\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8245\fP>\X'tty: link').
.IP \(bu 2
fish\(aqs highlighter will now color options (starting with \fB\-\fP or \fB\-\-\fP) with the color given in the new $fish_color_option, up to the first \fB\-\-\fP\&. It falls back on $fish_color_param, so nothing changes for existing setups (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8292'\fI\%#8292\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8292\fP>\X'tty: link').
.IP \(bu 2
When executing a command, abbreviations are no longer expanded when the cursor is separated from the command by spaces, making it easier to suppress abbreviation expansion of commands without arguments. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8423'\fI\%#8423\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8423\fP>\X'tty: link').
.IP \(bu 2
\fBfish_key_reader\fP\(aqs output was simplified. By default, it now only prints a bind statement. The previous per\-character timing information can be seen with a new \fB\-\-verbose\fP switch (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8467'\fI\%#8467\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8467\fP>\X'tty: link').
.IP \(bu 2
Custom completions are now also loaded for commands that contain tildes or variables like \fB~/bin/fish\fP or \fB$PWD/fish\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8442'\fI\%#8442\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8442\fP>\X'tty: link').
.IP \(bu 2
Command lines spanning multiple lines will not be overwritten by the completion pager when it fills the entire terminal (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8509'\fI\%#8509\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8509\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/8405'\fI\%#8405\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8405\fP>\X'tty: link').
.IP \(bu 2
When redrawing a multiline prompt, the old prompt is now properly cleared (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8163'\fI\%#8163\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8163\fP>\X'tty: link').
.IP \(bu 2
Interactive completion would occasionally ignore the last word on the command line due to a race condition. This has been fixed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8175'\fI\%#8175\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8175\fP>\X'tty: link').
.IP \(bu 2
Propagation of universal variables from a fish process that is closing is faster (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8209'\fI\%#8209\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8209\fP>\X'tty: link').
.IP \(bu 2
The command line is drawn in the correct place if the prompt ends with a newline (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8298'\fI\%#8298\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8298\fP>\X'tty: link').
.IP \(bu 2
\fBhistory\fP learned a new subcommand \fBclear\-session\fP to erase all history from the current session (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5791'\fI\%#5791\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5791\fP>\X'tty: link').
.IP \(bu 2
Pressing \fBctrl\fP\-\fBc\fP in \fBfish_key_reader\fP will no longer print the incorrect \(dqPress [ctrl\-C] again to exit\(dq message (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8510'\fI\%#8510\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8510\fP>\X'tty: link').
.IP \(bu 2
The default command\-not\-found handler for Fedora/PackageKit now passes the whole command line, allowing for functionality such as running the suggested command directly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8579'\fI\%#8579\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8579\fP>\X'tty: link').
.IP \(bu 2
When looking for locale information, the Debian configuration is now used when available (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8557'\fI\%#8557\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8557\fP>\X'tty: link').
.IP \(bu 2
Pasting text containing quotes from the clipboard trims spaces more appropriately (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8550'\fI\%#8550\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8550\fP>\X'tty: link').
.IP \(bu 2
The clipboard bindings ignore X\-based clipboard programs if the \fBDISPLAY\fP environment variable is not set, which helps prefer the Windows clipboard when it is available (such as on WSL).
.IP \(bu 2
\fBfuncsave\fP will remove a saved copy of a function that has been erased with \fBfunctions \-\-erase\fP\&.
.IP \(bu 2
The Web\-based configuration tool gained a number of improvements, including the ability to set pager colors.
.IP \(bu 2
The default \fBfish_title\fP prints a shorter title with shortened $PWD and no more redundant \(dqfish\(dq (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8641'\fI\%#8641\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8641\fP>\X'tty: link').
.IP \(bu 2
Holding down an arrow key won\(aqt freeze the terminal with long periods of flashing (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8610'\fI\%#8610\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8610\fP>\X'tty: link').
.IP \(bu 2
Multi\-char bindings are no longer interrupted if a signal handler enqueues an event. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8628'\fI\%#8628\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8628\fP>\X'tty: link').
.UNINDENT
.SS New or improved bindings
.INDENT 0.0
.IP \(bu 2
\fBescape\fP can now bound without breaking arrow key bindings (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8428'\fI\%#8428\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8428\fP>\X'tty: link').
.IP \(bu 2
The \fBalt\fP\-\fBh\fP binding (to open a command’s manual page) now also ignores \fBcommand\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8447'\fI\%#8447\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8447\fP>\X'tty: link').
.UNINDENT
.SS Improved prompts
.INDENT 0.0
.IP \(bu 2
The \fBfish_status_to_signal\fP helper function returns the correct signal names for the current platform, rather than Linux (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8530'\fI\%#8530\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8530\fP>\X'tty: link').
.IP \(bu 2
The \fBprompt_pwd\fP helper function learned a \fB\-\-full\-length\-dirs N\fP option to keep the last N directory components unshortened. In addition the number of characters to shorten each component should be shortened to can now be given as \fB\-d N\fP or \fB\-\-dir\-length N\fP\&. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8208'\fI\%#8208\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8208\fP>\X'tty: link'):
.INDENT 2.0
.INDENT 3.5
.sp
.EX
> prompt_pwd \-\-full\-length\-dirs 2 \-d 1 ~/dev/fish\-shell/share/tools/web_config
~/d/f/s/tools/web_config
.EE
.UNINDENT
.UNINDENT
.UNINDENT
.SS Completions
.INDENT 0.0
.IP \(bu 2
Added completions for:
.INDENT 2.0
.IP \(bu 2
Apple\(aqs \fBshortcuts\fP
.IP \(bu 2
\fBargparse\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8434'\fI\%#8434\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8434\fP>\X'tty: link')
.IP \(bu 2
\fBasd\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8759'\fI\%#8759\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8759\fP>\X'tty: link')
.IP \(bu 2
\fBaz\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8141'\fI\%#8141\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8141\fP>\X'tty: link')
.IP \(bu 2
\fBblack\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8123'\fI\%#8123\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8123\fP>\X'tty: link')
.IP \(bu 2
\fBclasp\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8373'\fI\%#8373\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8373\fP>\X'tty: link')
.IP \(bu 2
\fBcpupower\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8302'\fI\%#8302\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8302\fP>\X'tty: link')
.IP \(bu 2
\fBdart\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8315'\fI\%#8315\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8315\fP>\X'tty: link')
.IP \(bu 2
\fBdscacheutil\fP
.IP \(bu 2
\fBelvish\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8416'\fI\%#8416\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8416\fP>\X'tty: link')
.IP \(bu 2
\fBethtool\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8283'\fI\%#8283\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8283\fP>\X'tty: link')
.IP \(bu 2
\fBexif\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8246'\fI\%#8246\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8246\fP>\X'tty: link')
.IP \(bu 2
\fBfindstr\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8481'\fI\%#8481\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8481\fP>\X'tty: link')
.IP \(bu 2
\fBgit\-sizer\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8156'\fI\%#8156\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8156\fP>\X'tty: link')
.IP \(bu 2
\fBgnome\-extensions\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8732'\fI\%#8732\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8732\fP>\X'tty: link')
.IP \(bu 2
\fBgping\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8181'\fI\%#8181\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8181\fP>\X'tty: link')
.IP \(bu 2
\fBisatty\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8609'\fI\%#8609\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8609\fP>\X'tty: link')
.IP \(bu 2
\fBistioctl\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8343'\fI\%#8343\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8343\fP>\X'tty: link')
.IP \(bu 2
\fBkmutil\fP
.IP \(bu 2
\fBkubectl\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8734'\fI\%#8734\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8734\fP>\X'tty: link')
.IP \(bu 2
\fBmatlab\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8505'\fI\%#8505\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8505\fP>\X'tty: link')
.IP \(bu 2
\fBmono\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8415'\fI\%#8415\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8415\fP>\X'tty: link') and related tools \fBcsharp\fP, \fBgacutil\fP, \fBgendarme\fP, \fBikdasm\fP, \fBilasm\fP, \fBmkbundle\fP, \fBmonodis\fP, \fBmonop\fP, \fBsqlsharp\fP and \fBxsp\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8452'\fI\%#8452\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8452\fP>\X'tty: link')
.IP \(bu 2
Angular\(aqs \fBng\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8111'\fI\%#8111\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8111\fP>\X'tty: link')
.IP \(bu 2
\fBnodeenv\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8533'\fI\%#8533\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8533\fP>\X'tty: link')
.IP \(bu 2
\fBoctave\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8505'\fI\%#8505\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8505\fP>\X'tty: link')
.IP \(bu 2
\fBpabcnet_clear\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8421'\fI\%#8421\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8421\fP>\X'tty: link')
.IP \(bu 2
\fBqmk\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8180'\fI\%#8180\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8180\fP>\X'tty: link')
.IP \(bu 2
\fBrakudo\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8113'\fI\%#8113\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8113\fP>\X'tty: link')
.IP \(bu 2
\fBrc\-status\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8757'\fI\%#8757\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8757\fP>\X'tty: link')
.IP \(bu 2
\fBroswell\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8330'\fI\%#8330\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8330\fP>\X'tty: link')
.IP \(bu 2
\fBsbcl\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8330'\fI\%#8330\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8330\fP>\X'tty: link')
.IP \(bu 2
\fBstarship\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8520'\fI\%#8520\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8520\fP>\X'tty: link')
.IP \(bu 2
\fBtopgrade\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8651'\fI\%#8651\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8651\fP>\X'tty: link')
.IP \(bu 2
\fBwine\fP, \fBwineboot\fP and \fBwinemaker\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8411'\fI\%#8411\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8411\fP>\X'tty: link')
.IP \(bu 2
Windows Subsystem for Linux (WSL)\(aqs \fBwslpath\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8364'\fI\%#8364\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8364\fP>\X'tty: link')
.IP \(bu 2
Windows\(aq \fBcolor\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8483'\fI\%#8483\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8483\fP>\X'tty: link'), \fBattrib\fP, \fBattributes\fP, \fBchoice\fP, \fBclean\fP, \fBcleanmgr\fP, \fBcmd\fP, \fBcmdkey\fP, \fBcomp\fP, \fBforfiles\fP, \fBpowershell\fP, \fBreg\fP, \fBschtasks\fP, \fBsetx\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8486'\fI\%#8486\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8486\fP>\X'tty: link')
.IP \(bu 2
\fBzef\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8114'\fI\%#8114\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8114\fP>\X'tty: link')
.UNINDENT
.IP \(bu 2
Improvements to many completions, especially for \fBgit\fP aliases (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8129'\fI\%#8129\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8129\fP>\X'tty: link'), subcommands (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8134'\fI\%#8134\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8134\fP>\X'tty: link') and submodules (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8716'\fI\%#8716\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8716\fP>\X'tty: link').
.IP \(bu 2
Many adjustments to complete correct options for system utilities on BSD and macOS.
.IP \(bu 2
When evaluating custom completions, the command line state no longer includes variable overrides (\fBvar=val\fP). This unbreaks completions that read \fBcommandline \-op\fP\&.
.UNINDENT
.SS Improved terminal support
.INDENT 0.0
.IP \(bu 2
Dynamic terminal titles are enabled on WezTerm (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8121'\fI\%#8121\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8121\fP>\X'tty: link').
.IP \(bu 2
Directory history navigation works out of the box with Apple Terminal\(aqs default key settings (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2330'\fI\%#2330\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2330\fP>\X'tty: link').
.IP \(bu 2
fish now assumes Unicode 9+ widths for emoji under iTerm 2 (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8200'\fI\%#8200\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8200\fP>\X'tty: link').
.IP \(bu 2
Skin\-tone emoji modifiers (U+1F3FB through U+1F3FF) are now measured as width 0 (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8275'\fI\%#8275\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8275\fP>\X'tty: link').
.IP \(bu 2
fish\(aqs escape sequence removal now also knows Tmux\(aqs wrapped escapes.
.IP \(bu 2
Vi mode cursors are enabled in Apple Terminal.app (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8167'\fI\%#8167\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8167\fP>\X'tty: link').
.IP \(bu 2
Vi cursor shaping and $PWD reporting is now also enabled on foot (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8422'\fI\%#8422\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8422\fP>\X'tty: link').
.IP \(bu 2
\fBls\fP will use colors also on newer versions of Apple Terminal.app (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8309'\fI\%#8309\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8309\fP>\X'tty: link').
.IP \(bu 2
The \fBdelete\fP and \fBshift\fP\-\fBtab\fP keys work more reliably under \fBst\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8352'\fI\%#8352\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8352\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/8354'\fI\%#8354\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8354\fP>\X'tty: link').
.UNINDENT
.SS Other improvements
.INDENT 0.0
.IP \(bu 2
Fish\(aqs test suite now uses \fBctest\fP, and has become much faster to run. It is now also possible to run only specific tests with targets named \fBtest_$filename\fP \- \fBmake test_set.fish\fP only runs the set.fish test. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7851'\fI\%#7851\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7851\fP>\X'tty: link')
.IP \(bu 2
The HTML version of the documentation now includes copy buttons for code examples (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8218'\fI\%#8218\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8218\fP>\X'tty: link').
.IP \(bu 2
The HTML version of the documentation and the web\-based configuration tool now pick more modern system fonts instead of falling back to Arial and something like Courier New most of the time (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8632'\fI\%#8632\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8632\fP>\X'tty: link').
.IP \(bu 2
The Debian & Ubuntu package linked from fishshell.com is now a single package, rather than split into \fBfish\fP and \fBfish\-common\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7845'\fI\%#7845\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7845\fP>\X'tty: link').
.IP \(bu 2
The macOS installer does not assert that Rosetta is required to install fish on machines with Apple Silicon (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8566'\fI\%#8566\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8566\fP>\X'tty: link').
.IP \(bu 2
The macOS installer now cleans up previous .pkg installations when upgrading. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2963'\fI\%#2963\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2963\fP>\X'tty: link').
.UNINDENT
.SS For distributors
.INDENT 0.0
.IP \(bu 2
The minimum version of CMake required to build fish is now 3.5.0.
.IP \(bu 2
The CMake installation supports absolute paths for \fBCMAKE_INSTALL_DATADIR\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8150'\fI\%#8150\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8150\fP>\X'tty: link').
.IP \(bu 2
Building using NetBSD curses works on any platform (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8087'\fI\%#8087\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8087\fP>\X'tty: link').
.IP \(bu 2
The build system now uses the default linker instead of forcing use of the gold or lld linker (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8152'\fI\%#8152\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8152\fP>\X'tty: link').
.UNINDENT

.sp
.ce
----

.ce 0
.sp
.SH FISH 3.3.1 (RELEASED JULY 6, 2021)
.sp
This release of fish fixes the following problems identified in fish 3.3.0:
.INDENT 0.0
.IP \(bu 2
The prompt and command line are redrawn correctly in response to universal variable changes (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8088'\fI\%#8088\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8088\fP>\X'tty: link').
.IP \(bu 2
A superfluous error that was produced when setting the \fBPATH\fP or \fBCDPATH\fP environment variables to include colon\-delimited components that do not exist was removed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8095'\fI\%#8095\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8095\fP>\X'tty: link').
.IP \(bu 2
The Vi mode indicator in the prompt is repainted correctly after \fBctrl\fP\-\fBc\fP cancels the current command (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8103'\fI\%#8103\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8103\fP>\X'tty: link').
.IP \(bu 2
fish builds correctly on platforms that do not have a \fBspawn.h\fP header, such as old versions of OS X (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8097'\fI\%#8097\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8097\fP>\X'tty: link').
.UNINDENT
.sp
A number of improvements to the documentation, and fixes for completions, are included as well.
.sp
If you are upgrading from version 3.2.2 or before, please also review the release notes for 3.3.0 (included below).

.sp
.ce
----

.ce 0
.sp
.SH FISH 3.3.0 (RELEASED JUNE 28, 2021)
.SS Notable improvements and fixes
.INDENT 0.0
.IP \(bu 2
\fBfish_config\fP gained a \fBprompt\fP subcommand to show and pick from the sample prompts directly in the terminal, instead of having to open a webbrowser. For example \fBfish_config prompt choose default\fP loads the default prompt in the current session (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7958'\fI\%#7958\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7958\fP>\X'tty: link').
.IP \(bu 2
The documentation has been reorganized to be easier to understand (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7773'\fI\%#7773\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7773\fP>\X'tty: link').
.UNINDENT
.SS Deprecations and removed features
.INDENT 0.0
.IP \(bu 2
The \fB$fish_history\fP value \(dqdefault\(dq is no longer special. It used to be treated the same as \(dqfish\(dq (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7650'\fI\%#7650\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7650\fP>\X'tty: link').
.IP \(bu 2
Redirection to standard error with the \fB^\fP character has been disabled by default. It can be turned back on using the \fBstderr\-nocaret\fP feature flag, but will eventually be disabled completely (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7105'\fI\%#7105\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7105\fP>\X'tty: link').
.IP \(bu 2
Specifying an initial tab to \fBfish_config\fP now only works with \fBfish_config browse\fP (eg \fBfish_config browse variables\fP), otherwise it would interfere with the new \fBprompt\fP subcommand (see below) (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7958'\fI\%#7958\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7958\fP>\X'tty: link').
.UNINDENT
.SS Scripting improvements
.INDENT 0.0
.IP \(bu 2
\fBmath\fP gained new functions \fBlog2\fP (like the documentation claimed), \fBmax\fP and \fBmin\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7856'\fI\%#7856\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7856\fP>\X'tty: link'). \fBmath\fP functions can be used without the parentheses (eg \fBmath sin 2 + 6\fP), and functions have the lowest precedence in the order of operations (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7877'\fI\%#7877\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7877\fP>\X'tty: link').
.IP \(bu 2
Shebang (\fB#!\fP) lines are no longer required within shell scripts, improving support for scripts with concatenated binary contents. If a file fails to execute and passes a (rudimentary) binary safety check, fish will re\-invoke it using \fB/bin/sh\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7802'\fI\%#7802\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7802\fP>\X'tty: link').
.IP \(bu 2
Exit codes are better aligned with bash. A failed execution now reports \fB$status\fP of 127 if the file is not found, and 126 if it is not executable.
.IP \(bu 2
\fBecho\fP no longer writes its output one byte at a time, improving performance and allowing use with Linux\(aqs special API files (\fB/proc\fP, \fB/sys\fP and such) (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7836'\fI\%#7836\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7836\fP>\X'tty: link').
.IP \(bu 2
fish should now better handle \fBcd\fP on filesystems with broken \fBstat(3)\fP responses (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7577'\fI\%#7577\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7577\fP>\X'tty: link').
.IP \(bu 2
Builtins now properly report a \fB$status\fP of 1 upon unsuccessful writes (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7857'\fI\%#7857\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7857\fP>\X'tty: link').
.IP \(bu 2
\fBstring match\fP with unmatched capture groups and without the \fB\-\-all\fP flag now sets an empty variable instead of a variable containing the empty string. It also correctly imports the first match if multiple arguments are provided, matching the documentation. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7938'\fI\%#7938\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7938\fP>\X'tty: link').
.IP \(bu 2
fish produces more specific errors when a command in a command substitution wasn\(aqt found or is not allowed. This now prints something like \(dqUnknown command\(dq instead of \(dqUnknown error while evaluating command substitution\(dq.
.IP \(bu 2
\fBfish_indent\fP allows inline variable assignments (\fBFOO=BAR command\fP) to use line continuation, instead of joining them into one line (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7955'\fI\%#7955\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7955\fP>\X'tty: link').
.IP \(bu 2
fish gained a \fB\-\-no\-config\fP option to disable configuration files. This applies to user\-specific and the systemwide \fBconfig.fish\fP (typically in \fB/etc/fish/config.fish\fP), and configuration snippets (typically in \fBconf.d\fP directories). It also disables universal variables, history, and loading of functions from system or user configuration directories (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7921'\fI\%#7921\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7921\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/1256'\fI\%#1256\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1256\fP>\X'tty: link').
.IP \(bu 2
When universal variables are unavailable for some reason, setting a universal variable now sets a global variable instead (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7921'\fI\%#7921\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7921\fP>\X'tty: link').
.IP \(bu 2
\fB$last_pid\fP now contains the process ID of the last process in the pipeline, allowing it to be used in scripts (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5036'\fI\%#5036\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5036\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/5832'\fI\%#5832\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5832\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7721'\fI\%#7721\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7721\fP>\X'tty: link'). Previously, this value contained the process group ID, but in scripts this was the same as the running fish\(aqs process ID.
.IP \(bu 2
\fBprocess\-exit\fP event handlers now receive the same value as \fB$status\fP in all cases, instead of receiving \-1 when the exit was due to a signal.
.IP \(bu 2
\fBprocess\-exit\fP event handlers for PID 0 also received \fBJOB_EXIT\fP events; this has been fixed.
.IP \(bu 2
\fBjob\-exit\fP event handlers may now be created with any of the PIDs from the job. The handler is passed the last PID in the job as its second argument, instead of the process group.
.IP \(bu 2
Trying to set an empty variable name with \fBset\fP no longer works (these variables could not be used in expansions anyway).
.IP \(bu 2
\fBfish_add_path\fP handles an undefined \fBPATH\fP environment variable correctly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8082'\fI\%#8082\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8082\fP>\X'tty: link').
.UNINDENT
.SS Interactive improvements
.INDENT 0.0
.IP \(bu 2
Commands entered before the previous command finishes will now be properly syntax highlighted.
.IP \(bu 2
fish now automatically creates \fBconfig.fish\fP and the configuration directories in \fB$XDG_CONFIG_HOME/fish\fP (by default \fB~/.config/fish\fP) if they do not already exist (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7402'\fI\%#7402\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7402\fP>\X'tty: link').
.IP \(bu 2
\fB$SHLVL\fP is no longer incremented in non\-interactive shells. This means it won\(aqt be set to values larger than 1 just because your environment happens to run some scripts in $SHELL in its startup path (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7864'\fI\%#7864\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7864\fP>\X'tty: link').
.IP \(bu 2
fish no longer rings the bell when flashing the command line. The flashing should already be enough notification and the bell can be annoying (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7875'\fI\%#7875\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7875\fP>\X'tty: link').
.IP \(bu 2
\fBfish \-\-help\fP is more helpful if the documentation isn\(aqt installed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7824'\fI\%#7824\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7824\fP>\X'tty: link').
.IP \(bu 2
\fBfunced\fP won\(aqt include an entry on where a function is defined, thanks to the new \fBfunctions \-\-no\-details\fP option (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7879'\fI\%#7879\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7879\fP>\X'tty: link').
.IP \(bu 2
A new variable, \fBfish_killring\fP, containing entries from the killring, is now available (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7445'\fI\%#7445\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7445\fP>\X'tty: link').
.IP \(bu 2
\fBfish \-\-private\fP prints a note on private mode on startup even if \fB$fish_greeting\fP is an empty list (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7974'\fI\%#7974\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7974\fP>\X'tty: link').
.IP \(bu 2
fish no longer attempts to lock history or universal variable files on remote filesystems, including NFS and Samba mounts. In rare cases, updates to these files may be dropped if separate fish instances modify them simultaneously. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7968'\fI\%#7968\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7968\fP>\X'tty: link').
.IP \(bu 2
\fBwait\fP and \fBon\-process\-exit\fP work correctly with jobs that have already exited (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7210'\fI\%#7210\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7210\fP>\X'tty: link').
.IP \(bu 2
\fB__fish_print_help\fP (used for \fB\-\-help\fP output for fish\(aqs builtins) now respects the \fBLESS\fP environment variable, and if not set, uses better default pager settings (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7997'\fI\%#7997\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7997\fP>\X'tty: link').
.IP \(bu 2
Errors from \fBalias\fP are now printed to standard error, matching other builtins and functions (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7925'\fI\%#7925\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7925\fP>\X'tty: link').
.IP \(bu 2
\fBls\fP output is colorized on OpenBSD if colorls utility is installed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8035'\fI\%#8035\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8035\fP>\X'tty: link')
.IP \(bu 2
The default pager color looks better in terminals with light backgrounds (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3412'\fI\%#3412\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3412\fP>\X'tty: link').
.IP \(bu 2
Further robustness improvements to the bash history import (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7874'\fI\%#7874\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7874\fP>\X'tty: link').
.IP \(bu 2
fish now tries to find a Unicode\-aware locale for encoding (\fBLC_CTYPE\fP) if started without any locale information, improving the display of emoji and other non\-ASCII text on misconfigured systems (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8031'\fI\%#8031\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8031\fP>\X'tty: link'). To allow a C locale, set the variable \fBfish_allow_singlebyte_locale\fP to 1.
.IP \(bu 2
The Web\-based configuration and documentation now feature a dark mode if the browser requests it (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8043'\fI\%#8043\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8043\fP>\X'tty: link').
.IP \(bu 2
Color variables can now also be given like \fB\-\-background red\fP and \fB\-b red\fP, not just \fB\-\-background=red\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8053'\fI\%#8053\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8053\fP>\X'tty: link').
.IP \(bu 2
\fBexit\fP run within \fBfish_prompt\fP now exits properly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8033'\fI\%#8033\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8033\fP>\X'tty: link').
.IP \(bu 2
When attempting to execute the unsupported POSIX\-style brace command group (\fB{ ... }\fP) fish will suggest its equivalent \fBbegin; ...; end\fP commands (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6415'\fI\%#6415\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6415\fP>\X'tty: link').
.UNINDENT
.SS New or improved bindings
.INDENT 0.0
.IP \(bu 2
Pasting in Vi mode puts text in the right place in normal mode (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7847'\fI\%#7847\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7847\fP>\X'tty: link').
.IP \(bu 2
Vi mode\(aqs \fBu\fP is bound to \fBundo\fP instead of \fBhistory\-search\-backward\fP, following GNU readline\(aqs behavior. Similarly, \fBctrl\fP\-\fBr\fP is bound to \fBredo\fP instead of \fBhistory\-search\-backward\fP, following Vim (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7908'\fI\%#7908\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7908\fP>\X'tty: link').
.IP \(bu 2
\fBs\fP in Vi visual mode now does the same thing as \fBc\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8039'\fI\%#8039\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8039\fP>\X'tty: link').
.IP \(bu 2
The binding for \fB\(dq,*,y\fP now uses \fBfish_clipboard_copy\fP, allowing it to support more than just \fBxsel\fP\&.
.IP \(bu 2
The \fBctrl\fP\-\fBspace\fP binding can be correctly customised (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7922'\fI\%#7922\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7922\fP>\X'tty: link').
.IP \(bu 2
\fBexit\fP works correctly in bindings (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7967'\fI\%#7967\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7967\fP>\X'tty: link').
.IP \(bu 2
The \fBf1\fP binding, which opens the manual page for the current command, now works around a bug in certain \fBless\fP versions that fail to clear the screen (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7863'\fI\%#7863\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7863\fP>\X'tty: link').
.IP \(bu 2
The binding for \fBalt\fP\-\fBs\fP now toggles whether \fBsudo\fP is prepended, even when it took the commandline from history instead of only adding it.
.IP \(bu 2
The new functions \fBfish_commandline_prepend\fP and \fBfish_commandline_append\fP allow toggling the presence of a prefix/suffix on the current commandline. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7905'\fI\%#7905\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7905\fP>\X'tty: link').
.IP \(bu 2
\fBbackward\-kill\-path\-component\fP \fBctrl\fP\-\fBw\fP) no longer erases parts of two tokens when the cursor is positioned immediately after \fB/\fP\&. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6258'\fI\%#6258\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6258\fP>\X'tty: link').
.UNINDENT
.SS Improved prompts
.INDENT 0.0
.IP \(bu 2
The default Vi mode prompt now uses foreground instead of background colors, making it less obtrusive (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7880'\fI\%#7880\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7880\fP>\X'tty: link').
.IP \(bu 2
Performance of the \(dqinformative\(dq git prompt is improved somewhat (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7871'\fI\%#7871\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7871\fP>\X'tty: link'). This is still slower than the non\-informative version by its very nature. In particular it is IO\-bound, so it will be very slow on slow disks or network mounts.
.IP \(bu 2
The sample prompts were updated. Some duplicated prompts, like the various classic variants, or less useful ones, like the \(dqjustadollar\(dq prompt were removed, some prompts were cleaned up, and in some cases renamed. A new \(dqsimple\(dq and \(dqdisco\(dq prompt were added (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7884'\fI\%#7884\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7884\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7897'\fI\%#7897\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7897\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7930'\fI\%#7930\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7930\fP>\X'tty: link'). The new prompts will only take effect when selected and existing installed prompts will remain unchanged.
.IP \(bu 2
A new \fBprompt_login\fP helper function to describe the kind of \(dqlogin\(dq (user, host and chroot status) for use in prompts. This replaces the old \(dqdebian chroot\(dq prompt and has been added to the default and terlar prompts (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7932'\fI\%#7932\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7932\fP>\X'tty: link').
.IP \(bu 2
The Web\-based configuration\(aqs prompt picker now shows and installs right prompts (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7930'\fI\%#7930\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7930\fP>\X'tty: link').
.IP \(bu 2
The git prompt now has the same symbol order in normal and \(dqinformative\(dq mode, and it\(aqs customizable via \fB$__fish_git_prompt_status_order\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7926'\fI\%#7926\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7926\fP>\X'tty: link').
.UNINDENT
.SS Completions
.INDENT 0.0
.IP \(bu 2
Added completions for:
.INDENT 2.0
.IP \(bu 2
\fBfirewall\-cmd\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7900'\fI\%#7900\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7900\fP>\X'tty: link')
.IP \(bu 2
\fBsv\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8069'\fI\%#8069\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8069\fP>\X'tty: link')
.UNINDENT
.IP \(bu 2
Improvements to plenty of completions!
.IP \(bu 2
Commands that wrap \fBcd\fP (using \fBcomplete \-\-wraps cd\fP) get the same completions as \fBcd\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4693'\fI\%#4693\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4693\fP>\X'tty: link').
.IP \(bu 2
The \fB\-\-force\-files\fP option to \fBcomplete\fP works for bare arguments, not just options (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7920'\fI\%#7920\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7920\fP>\X'tty: link').
.IP \(bu 2
Completion descriptions for functions don\(aqt include the function definition, making them more concise (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7911'\fI\%#7911\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7911\fP>\X'tty: link').
.IP \(bu 2
The \fBkill\fP completions no longer error on MSYS2 (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8046'\fI\%#8046\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8046\fP>\X'tty: link').
.IP \(bu 2
Completion scripts are now loaded when calling a command via a relative path (like \fB\&./git\fP) (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6001'\fI\%#6001\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6001\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7992'\fI\%#7992\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7992\fP>\X'tty: link').
.IP \(bu 2
When there are multiple completion candidates, fish inserts their shared prefix. This prefix was computed in a case\-insensitive way, resulting in wrong case in the completion pager. This was fixed by only inserting prefixes with matching case (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7744'\fI\%#7744\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7744\fP>\X'tty: link').
.UNINDENT
.SS Improved terminal support
.INDENT 0.0
.IP \(bu 2
fish no longer tries to detect a missing new line during startup, preventing an erroneous \fB⏎\fP from appearing if the terminal is resized at the wrong time, which can happen in tiling window managers (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7893'\fI\%#7893\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7893\fP>\X'tty: link').
.IP \(bu 2
fish behaves better when it disagrees with the terminal on the width of characters. In particular, staircase effects with right prompts should be gone in most cases (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8011'\fI\%#8011\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8011\fP>\X'tty: link').
.IP \(bu 2
If the prompt takes up the entire line, the last character should no longer be chopped off in certain terminals (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8002'\fI\%#8002\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8002\fP>\X'tty: link').
.IP \(bu 2
fish\(aqs reflow handling has been disabled by default for kitty (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7961'\fI\%#7961\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7961\fP>\X'tty: link').
.IP \(bu 2
The default prompt no longer produces errors when used with a dumb terminal (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7904'\fI\%#7904\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7904\fP>\X'tty: link').
.IP \(bu 2
Terminal size variables are updated for window size change signal handlers (\fBSIGWINCH\fP).
.IP \(bu 2
Pasting within a multi\-line command using a terminal that supports bracketed paste works correctly, instead of producing an error (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7782'\fI\%#7782\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7782\fP>\X'tty: link').
.IP \(bu 2
\fBset_color\fP produces an error when used with invalid arguments, rather than empty output which interacts badly with Cartesian product expansion.
.UNINDENT
.SS For distributors
.INDENT 0.0
.IP \(bu 2
fish runs correctly on platforms without the \fBO_CLOEXEC\fP flag for \fBopen(2)\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8023'\fI\%#8023\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8023\fP>\X'tty: link').
.UNINDENT

.sp
.ce
----

.ce 0
.sp
.SH FISH 3.2.2 (RELEASED APRIL 7, 2021)
.sp
This release of fish fixes a number of additional issues identified in the fish 3.2 series:
.INDENT 0.0
.IP \(bu 2
The command\-not\-found handler used suggestions from \fBpacman\fP on Arch Linux, but this caused major slowdowns on some systems and has been disabled (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7841'\fI\%#7841\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7841\fP>\X'tty: link').
.IP \(bu 2
fish will no longer hang on exit if another process is in the foreground on macOS (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7901'\fI\%#7901\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7901\fP>\X'tty: link').
.IP \(bu 2
Certain programs (such as \fBlazygit\fP) could create situations where fish would not receive keystrokes correctly, but it is now more robust in these situations (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7853'\fI\%#7853\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7853\fP>\X'tty: link').
.IP \(bu 2
Arguments longer than 1024 characters no longer trigger excessive CPU usage on macOS (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7837'\fI\%#7837\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7837\fP>\X'tty: link').
.IP \(bu 2
fish builds correctly on macOS when using new versions of Xcode (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7838'\fI\%#7838\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7838\fP>\X'tty: link').
.IP \(bu 2
Completions for \fBaura\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7865'\fI\%#7865\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7865\fP>\X'tty: link') and \fBtshark\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7858'\fI\%#7858\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7858\fP>\X'tty: link') should no longer produce errors.
.IP \(bu 2
Background jobs no longer interfere with syntax highlighting (a regression introduced in fish 3.2.1, \X'tty: link https://github.com/fish-shell/fish-shell/issues/7842'\fI\%#7842\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7842\fP>\X'tty: link').
.UNINDENT
.sp
If you are upgrading from version 3.1.2 or before, please also review the release notes for 3.2.1 and 3.2.0 (included below).

.sp
.ce
----

.ce 0
.sp
.SH FISH 3.2.1 (RELEASED MARCH 18, 2021)
.sp
This release of fish fixes the following problems identified in fish 3.2.0:
.INDENT 0.0
.IP \(bu 2
Commands in key bindings are run with fish\(aqs internal terminal modes, instead of the terminal modes typically used for commands. This fixes a bug introduced in 3.2.0, where text would unexpectedly appear on the terminal, especially when pasting (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7770'\fI\%#7770\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7770\fP>\X'tty: link').
.IP \(bu 2
Prompts which use the internal \fB__fish_print_pipestatus\fP function will display correctly rather than carrying certain modifiers (such as bold) further than intended (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7771'\fI\%#7771\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7771\fP>\X'tty: link').
.IP \(bu 2
Redirections to internal file descriptors is allowed again, reversing the changes in 3.2.0. This fixes a problem with Midnight Commander (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7769'\fI\%#7769\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7769\fP>\X'tty: link').
.IP \(bu 2
Universal variables should be fully reliable regardless of operating system again (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7774'\fI\%#7774\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7774\fP>\X'tty: link').
.IP \(bu 2
\fBfish_git_prompt\fP no longer causes screen flickering in certain terminals (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7775'\fI\%#7775\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7775\fP>\X'tty: link').
.IP \(bu 2
\fBfish_add_path\fP manipulates the \fBfish_user_paths\fP variable correctly when moving multiple paths (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7776'\fI\%#7776\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7776\fP>\X'tty: link').
.IP \(bu 2
Pasting with a multi\-line command no longer causes a \fB__fish_tokenizer_state\fP error (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7782'\fI\%#7782\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7782\fP>\X'tty: link').
.IP \(bu 2
\fBpsub\fP inside event handlers cleans up temporary files properly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7792'\fI\%#7792\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7792\fP>\X'tty: link').
.IP \(bu 2
Event handlers declared with \fB\-\-on\-job\-exit $fish_pid\fP no longer run constantly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7721'\fI\%#7721\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7721\fP>\X'tty: link'), although these functions should use \fB\-\-on\-event fish_exit\fP instead.
.IP \(bu 2
Changing terminal modes inside \fBconfig.fish\fP works (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7783'\fI\%#7783\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7783\fP>\X'tty: link').
.IP \(bu 2
\fBset_color \-\-print\-colors\fP no longer prints all colors in bold (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7805'\fI\%#7805\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7805\fP>\X'tty: link')
.IP \(bu 2
Completing commands starting with a \fB\-\fP no longer prints an error (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7809'\fI\%#7809\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7809\fP>\X'tty: link').
.IP \(bu 2
Running \fBfish_command_not_found\fP directly no longer produces an error on macOS or other OSes which do not have a handler available (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7777'\fI\%#7777\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7777\fP>\X'tty: link').
.IP \(bu 2
The new \fBtype\fP builtin now has the (deprecated) \fB\-\-quiet\fP long form of \fB\-q\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7766'\fI\%#7766\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7766\fP>\X'tty: link').
.UNINDENT
.sp
It also includes some small enhancements:
.INDENT 0.0
.IP \(bu 2
\fBhelp\fP and \fBfish_config\fP work correctly when fish is running in a Chrome OS Crostini Linux VM (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7789'\fI\%#7789\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7789\fP>\X'tty: link').
.IP \(bu 2
The history file can be made a symbolic link without it being overwritten (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7754'\fI\%#7754\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7754\fP>\X'tty: link'), matching a similar improvement for the universal variable file in 3.2.0.
.IP \(bu 2
An unhelpful error (\(dqaccess: No error\(dq), seen on Cygwin, is no longer produced (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7785'\fI\%#7785\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7785\fP>\X'tty: link').
.IP \(bu 2
Improvements to the \fBrsync\fP completions (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7763'\fI\%#7763\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7763\fP>\X'tty: link'), some completion descriptions (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7788'\fI\%#7788\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7788\fP>\X'tty: link'), and completions that use IP address (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7787'\fI\%#7787\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7787\fP>\X'tty: link').
.IP \(bu 2
Improvements to the appearance of \fBfish_config\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7811'\fI\%#7811\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7811\fP>\X'tty: link').
.UNINDENT
.sp
If you are upgrading from version 3.1.2 or before, please also review
the release notes for 3.2.0 (included below).

.sp
.ce
----

.ce 0
.sp
.SH FISH 3.2.0 (RELEASED MARCH 1, 2021)
.SS Notable improvements and fixes
.INDENT 0.0
.IP \(bu 2
\fBUndo and redo support\fP for the command\-line editor and pager search (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1367'\fI\%#1367\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1367\fP>\X'tty: link'). By default, undo is bound to Control+Z, and redo to Alt+/.
.IP \(bu 2
\fBBuiltins can now output before all data is read\fP\&. For example, \fBstring replace\fP no longer has to read all of stdin before it can begin to output.
This makes it usable also for pipes where the previous command hasn\(aqt finished yet, like:
.INDENT 2.0
.INDENT 3.5
.sp
.EX
# Show all dmesg lines related to \(dqusb\(dq
dmesg \-w | string match \(aq*usb*\(aq
.EE
.UNINDENT
.UNINDENT
.IP \(bu 2
\fBPrompts will now be truncated\fP instead of replaced with \fB\(dq> \(dq\fP if they are wider than the terminal (\X'tty: link https://github.com/fish-shell/fish-shell/issues/904'\fI\%#904\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/904\fP>\X'tty: link').
For example:
.INDENT 2.0
.INDENT 3.5
.sp
.EX
~/dev/build/fish\-shell\-git/src/fish\-shell/build (makepkg)>
.EE
.UNINDENT
.UNINDENT
.sp
will turn into:
.INDENT 2.0
.INDENT 3.5
.sp
.EX
…h\-shell/build (makepkg)>
.EE
.UNINDENT
.UNINDENT
.sp
It is still possible to react to the \fBCOLUMNS\fP variable inside the prompt to implement smarter behavior.
.IP \(bu 2
\fBfish completes ambiguous completions\fP after pressing \fBtab\fP even when they
have a common prefix, without the user having to press \fBtab\fP again
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/6924'\fI\%#6924\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6924\fP>\X'tty: link').
.IP \(bu 2
fish is less aggressive about resetting terminal modes, such as flow control, after every command.
Although flow control remains off by default, enterprising users can now enable it with
\fBstty\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2315'\fI\%#2315\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2315\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7704'\fI\%#7704\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7704\fP>\X'tty: link').
.IP \(bu 2
A new \fB\(dqfish_add_path\(dq helper function to add paths to $PATH\fP without producing duplicates,
to be used interactively or in \fBconfig.fish\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6960'\fI\%#6960\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6960\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7028'\fI\%#7028\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7028\fP>\X'tty: link').
For example:
.INDENT 2.0
.INDENT 3.5
.sp
.EX
fish_add_path /opt/mycoolthing/bin
.EE
.UNINDENT
.UNINDENT
.sp
will add /opt/mycoolthing/bin to the beginning of $fish_user_path without creating duplicates,
so it can be called safely from config.fish or interactively, and the path will just be there, once.
.IP \(bu 2
\fBBetter errors with \(dqtest\(dq\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6030'\fI\%#6030\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6030\fP>\X'tty: link'):
.INDENT 2.0
.INDENT 3.5
.sp
.EX
> test 1 = 2 and echo true or false
test: Expected a combining operator like \(aq\-a\(aq at index 4
1 = 2 and echo true or echo false
      ^
.EE
.UNINDENT
.UNINDENT
.sp
This includes numbering the index from 1 instead of 0, like fish lists.
.IP \(bu 2
\fBA new theme for the documentation and Web\-based configuration\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6500'\fI\%#6500\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6500\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7371'\fI\%#7371\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7371\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7523'\fI\%#7523\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7523\fP>\X'tty: link'), matching the design on fishshell.com.
.IP \(bu 2
\fBfish \-\-no\-execute\fP \fBwill no longer complain about unknown commands\fP
or non\-matching wildcards, as these could be defined differently at
runtime (especially for functions). This makes it usable as a static syntax checker (\X'tty: link https://github.com/fish-shell/fish-shell/issues/977'\fI\%#977\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/977\fP>\X'tty: link').
.IP \(bu 2
\fBstring match \-\-regex\fP now integrates \fBnamed PCRE2 capture groups as fish variables\fP, allowing variables to be set directly from \fBstring match\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7459'\fI\%#7459\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7459\fP>\X'tty: link'). To support this functionality, \fBstring\fP is now a reserved word and can no longer be wrapped in a function.
.IP \(bu 2
Globs and other \fBexpansions are limited to 512,288 results\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7226'\fI\%#7226\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7226\fP>\X'tty: link'). Because operating systems limit the number of arguments to commands, larger values are unlikely to work anyway, and this helps to avoid hangs.
.IP \(bu 2
A new \fB\(dqfish for bash users\(dq documentation page\fP gives a quick overview of the scripting differences between bash and fish (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2382'\fI\%#2382\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2382\fP>\X'tty: link'), and the completion tutorial has also been moved out into its own document (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6709'\fI\%#6709\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6709\fP>\X'tty: link').
.UNINDENT
.SS Syntax changes and new commands
.INDENT 0.0
.IP \(bu 2
Range limits in index range expansions like \fB$x[$start..$end]\fP may be omitted: \fB$start\fP and \fB$end\fP default to 1 and \-1 (the last item) respectively (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6574'\fI\%#6574\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6574\fP>\X'tty: link'):
.INDENT 2.0
.INDENT 3.5
.sp
.EX
echo $var[1..]
echo $var[..\-1]
echo $var[..]
.EE
.UNINDENT
.UNINDENT
.sp
All print the full list \fB$var\fP\&.
.IP \(bu 2
When globbing, a segment which is exactly \fB**\fP may now match zero directories. For example \fB**/foo\fP may match \fBfoo\fP in the current directory (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7222'\fI\%#7222\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7222\fP>\X'tty: link').
.UNINDENT
.SS Scripting improvements
.INDENT 0.0
.IP \(bu 2
The \fBtype\fP, \fB_\fP (gettext), \fB\&.\fP (source) and \fB:\fP (no\-op) functions
are now implemented builtins for performance purposes (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7342'\fI\%#7342\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7342\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7036'\fI\%#7036\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7036\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/6854'\fI\%#6854\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6854\fP>\X'tty: link').
.IP \(bu 2
\fBset\fP and backgrounded jobs no longer overwrite \fB$pipestatus\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6820'\fI\%#6820\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6820\fP>\X'tty: link'), improving its use in command substitutions (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6998'\fI\%#6998\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6998\fP>\X'tty: link').
.IP \(bu 2
Computed (\(dqelectric\(dq) variables such as \fBstatus\fP are now only global in scope, so \fBset \-Uq status\fP returns false (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7032'\fI\%#7032\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7032\fP>\X'tty: link').
.IP \(bu 2
The output for \fBset \-\-show\fP has been shortened, only mentioning the scopes in which a variable exists (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6944'\fI\%#6944\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6944\fP>\X'tty: link').
In addition, it now shows if a variable is a path variable.
.IP \(bu 2
A new variable, \fBfish_kill_signal\fP, is set to the signal that terminated the last foreground job, or \fB0\fP if the job exited normally (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6824'\fI\%#6824\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6824\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/6822'\fI\%#6822\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6822\fP>\X'tty: link').
.IP \(bu 2
A new subcommand, \fBstring pad\fP, allows extending strings to a given width (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7340'\fI\%#7340\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7340\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7102'\fI\%#7102\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7102\fP>\X'tty: link').
.IP \(bu 2
\fBstring sub\fP has a new \fB\-\-end\fP option to specify the end index of
a substring (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6765'\fI\%#6765\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6765\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/5974'\fI\%#5974\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5974\fP>\X'tty: link').
.IP \(bu 2
\fBstring split\fP has a new \fB\-\-fields\fP option to specify fields to
output, similar to \fBcut \-f\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6770'\fI\%#6770\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6770\fP>\X'tty: link').
.IP \(bu 2
\fBstring trim\fP now also trims vertical tabs by default (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6795'\fI\%#6795\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6795\fP>\X'tty: link').
.IP \(bu 2
\fBstring replace\fP no longer prints an error if a capturing group wasn\(aqt matched, instead treating it as empty (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7343'\fI\%#7343\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7343\fP>\X'tty: link').
.IP \(bu 2
\fBstring\fP subcommands now quit early when used with \fB\-\-quiet\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7495'\fI\%#7495\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7495\fP>\X'tty: link').
.IP \(bu 2
\fBstring repeat\fP now handles multiple arguments, repeating each one (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5988'\fI\%#5988\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5988\fP>\X'tty: link').
.IP \(bu 2
\fBprintf\fP no longer prints an error if not given an argument (not
even a format string).
.IP \(bu 2
The \fBtrue\fP and \fBfalse\fP builtins ignore any arguments, like other shells (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7030'\fI\%#7030\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7030\fP>\X'tty: link').
.IP \(bu 2
\fBfish_indent\fP now removes unnecessary quotes in simple cases (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6722'\fI\%#6722\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6722\fP>\X'tty: link')
and gained a \fB\-\-check\fP option to just check if a file is indented correctly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7251'\fI\%#7251\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7251\fP>\X'tty: link').
.IP \(bu 2
\fBfish_indent\fP indents continuation lines that follow a line ending in a backslash, \fB|\fP, \fB&&\fP or \fB||\fP\&.
.IP \(bu 2
\fBpushd\fP only adds a directory to the stack if changing to it was successful (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6947'\fI\%#6947\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6947\fP>\X'tty: link').
.IP \(bu 2
A new \fBfish_job_summary\fP function is called whenever a
background job stops or ends, or any job terminates from a signal (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6959'\fI\%#6959\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6959\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/2727'\fI\%#2727\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2727\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/4319'\fI\%#4319\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4319\fP>\X'tty: link').
The default behaviour can now be customized by redefining it.
.IP \(bu 2
\fBstatus\fP gained new \fBdirname\fP and \fBbasename\fP convenience subcommands
to get just the directory to the running script or the name of it,
to simplify common tasks such as running \fB(dirname (status filename))\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7076'\fI\%#7076\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7076\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/1818'\fI\%#1818\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1818\fP>\X'tty: link').
.IP \(bu 2
Broken pipelines are now handled more smoothly; in particular, bad redirection mid\-pipeline
results in the job continuing to run but with the broken file descriptor replaced with a closed
file descriptor. This allows better error recovery and is more in line with other shells\(aq
behaviour (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7038'\fI\%#7038\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7038\fP>\X'tty: link').
.IP \(bu 2
\fBjobs \-\-quiet PID\fP no longer prints \(dqno suitable job\(dq if the job for PID does not exist (eg\ because it has finished) (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6809'\fI\%#6809\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6809\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/6812'\fI\%#6812\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6812\fP>\X'tty: link').
.IP \(bu 2
\fBjobs\fP now shows continued child processes correctly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6818'\fI\%#6818\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6818\fP>\X'tty: link')
.IP \(bu 2
\fBdisown\fP should no longer create zombie processes when job control is off, such as in \fBconfig.fish\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7183'\fI\%#7183\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7183\fP>\X'tty: link').
.IP \(bu 2
\fBcommand\fP, \fBjobs\fP and \fBtype\fP builtins support \fB\-\-query\fP as the long form of \fB\-q\fP, matching other builtins.
The long form \fB\-\-quiet\fP is deprecated (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7276'\fI\%#7276\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7276\fP>\X'tty: link').
.IP \(bu 2
\fBargparse\fP no longer requires a short flag letter for long\-only options (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7585'\fI\%#7585\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7585\fP>\X'tty: link')
and only prints a backtrace with invalid options to argparse itself (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6703'\fI\%#6703\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6703\fP>\X'tty: link').
.IP \(bu 2
\fBargparse\fP now passes the validation variables (e.g. \fB$_flag_value\fP) as local\-exported variables,
avoiding the need for \fB\-\-no\-scope\-shadowing\fP in validation functions.
.IP \(bu 2
\fBcomplete\fP takes the first argument as the name of the command if the \fB\-\-command\fP/\fB\-c\fP option is not used,
so \fBcomplete git\fP is treated like \fBcomplete \-\-command git\fP,
and it can show the loaded completions for specific commands with \fBcomplete COMMANDNAME\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7321'\fI\%#7321\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7321\fP>\X'tty: link').
.IP \(bu 2
\fBset_color \-b\fP (without an argument) no longer prints an error message, matching other invalid invocations of this command (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7154'\fI\%#7154\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7154\fP>\X'tty: link').
.IP \(bu 2
\fBexec\fP no longer produces a syntax error when the command cannot be found (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6098'\fI\%#6098\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6098\fP>\X'tty: link').
.IP \(bu 2
\fBset \-\-erase\fP and \fBabbr \-\-erase\fP can now erase multiple things in one go, matching \fBfunctions \-\-erase\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7377'\fI\%#7377\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7377\fP>\X'tty: link').
.IP \(bu 2
\fBabbr \-\-erase\fP no longer prints errors when used with no arguments or on an unset abbreviation (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7376'\fI\%#7376\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7376\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7732'\fI\%#7732\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7732\fP>\X'tty: link').
.IP \(bu 2
\fBtest \-t\fP, for testing whether file descriptors are connected to a terminal, works for file descriptors 0, 1, and 2 (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4766'\fI\%#4766\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4766\fP>\X'tty: link').
It can still return incorrect results in other cases (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1228'\fI\%#1228\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1228\fP>\X'tty: link').
.IP \(bu 2
Trying to execute scripts with Windows line endings (CRLF) produces a sensible error (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2783'\fI\%#2783\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2783\fP>\X'tty: link').
.IP \(bu 2
Trying to execute commands with arguments that exceed the operating system limit now produces a specific error (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6800'\fI\%#6800\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6800\fP>\X'tty: link').
.IP \(bu 2
An \fBalias\fP that delegates to a command with the same name no longer triggers an error about recursive completion (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7389'\fI\%#7389\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7389\fP>\X'tty: link').
.IP \(bu 2
\fBmath\fP now has a \fB\-\-base\fP option to output the result in hexadecimal or octal (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7496'\fI\%#7496\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7496\fP>\X'tty: link') and produces more specific error messages (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7508'\fI\%#7508\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7508\fP>\X'tty: link').
.IP \(bu 2
\fBmath\fP learned bitwise functions \fBbitand\fP, \fBbitor\fP and \fBbitxor\fP, used like \fBmath \(dqbitand(0xFE, 5)\(dq\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7281'\fI\%#7281\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7281\fP>\X'tty: link').
.IP \(bu 2
\fBmath\fP learned tau for those who don\(aqt like typing \(dq2 * pi\(dq.
.IP \(bu 2
Failed redirections will now set \fB$status\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7540'\fI\%#7540\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7540\fP>\X'tty: link').
.IP \(bu 2
fish sets exit status in a more consistent manner after errors, including invalid expansions like \fB$foo[\fP\&.
.IP \(bu 2
Using \fBread \-\-silent\fP while fish is in private mode was adding these potentially\-sensitive entries to the history; this has been fixed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7230'\fI\%#7230\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7230\fP>\X'tty: link').
.IP \(bu 2
\fBread\fP can now read interactively from other files, and can be used to read from the terminal via \fBread </dev/tty\fP (if the operating system provides \fB/dev/tty\fP) (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7358'\fI\%#7358\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7358\fP>\X'tty: link').
.IP \(bu 2
A new \fBfish_status_to_signal\fP function for transforming exit statuses to signal names has been added (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7597'\fI\%#7597\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7597\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7595'\fI\%#7595\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7595\fP>\X'tty: link').
.IP \(bu 2
The fallback \fBrealpath\fP builtin supports the \fB\-s\fP/\fB\-\-no\-symlinks\fP option, like GNU realpath (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7574'\fI\%#7574\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7574\fP>\X'tty: link').
.IP \(bu 2
\fBfunctions\fP and \fBtype\fP now explain when a function was defined via \fBsource\fP instead of just saying \fBDefined in \-\fP\&.
.IP \(bu 2
Significant performance improvements when globbing, appending to variables or in \fBmath\fP\&.
.IP \(bu 2
\fBecho\fP no longer interprets options at the beginning of an argument (eg \fBecho \(dq\-n foo\(dq\fP) (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7614'\fI\%#7614\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7614\fP>\X'tty: link').
.IP \(bu 2
fish now finds user configuration even if the \fBHOME\fP environment variable is not set (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7620'\fI\%#7620\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7620\fP>\X'tty: link').
.IP \(bu 2
fish no longer crashes when started from a Windows\-style working directory (eg \fBF:\epath\fP) (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7636'\fI\%#7636\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7636\fP>\X'tty: link').
.IP \(bu 2
\fBfish \-c\fP now reads the remaining arguments into \fB$argv\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2314'\fI\%#2314\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2314\fP>\X'tty: link').
.IP \(bu 2
The \fBpwd\fP command supports the long options \fB\-\-logical\fP and \fB\-\-physical\fP, matching other implementations (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6787'\fI\%#6787\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6787\fP>\X'tty: link').
.IP \(bu 2
\fBfish \-\-profile\fP now only starts profiling after fish is ready to execute commands (all configuration is completed). There is a new \fB\-\-profile\-startup\fP option that only profiles the startup and configuration process (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7648'\fI\%#7648\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7648\fP>\X'tty: link').
.IP \(bu 2
Builtins return a maximum exit status of 255, rather than potentially overflowing. In particular, this affects \fBexit\fP, \fBreturn\fP, \fBfunctions \-\-query\fP, and \fBset \-\-query\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7698'\fI\%#7698\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7698\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7702'\fI\%#7702\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7702\fP>\X'tty: link').
.IP \(bu 2
It is no longer an error to run builtin with closed stdin. For example \fBcount <&\-\fP now prints 0, instead of failing.
.IP \(bu 2
Blocks, functions, and builtins no longer permit redirecting to file descriptors other than 0 (standard input), 1 (standard output) and 2 (standard error). For example, \fBecho hello >&5\fP is now an error. This prevents corruption of internal state (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3303'\fI\%#3303\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3303\fP>\X'tty: link').
.UNINDENT
.SS Interactive improvements
.INDENT 0.0
.IP \(bu 2
fish will now always attempt to become process group leader in interactive mode (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7060'\fI\%#7060\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7060\fP>\X'tty: link'). This helps avoid hangs in certain circumstances, and allows tmux\(aqs current directory introspection to work (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5699'\fI\%#5699\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5699\fP>\X'tty: link').
.IP \(bu 2
The interactive reader now allows ending a line in a logical operators (\fB&&\fP and \fB||\fP) instead of complaining about a missing command. (This was already syntactically valid, but interactive sessions didn\(aqt know about it yet).
.IP \(bu 2
The prompt is reprinted after a background job exits (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1018'\fI\%#1018\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1018\fP>\X'tty: link').
.IP \(bu 2
fish no longer inserts a space after a completion ending in \fB\&.\fP, \fB,\fP or \fB\-\fP is accepted, improving completions for tools that provide dynamic completions (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6928'\fI\%#6928\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6928\fP>\X'tty: link').
.IP \(bu 2
If a filename is invalid when first pressing \fBtab\fP, but becomes valid, it will be completed properly on the next attempt (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6863'\fI\%#6863\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6863\fP>\X'tty: link').
.IP \(bu 2
\fBhelp string match/replace/<subcommand>\fP will show the help for string subcommands (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6786'\fI\%#6786\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6786\fP>\X'tty: link').
.IP \(bu 2
\fBfish_key_reader\fP sets the exit status to 0 when used with \fB\-\-help\fP or \fB\-\-version\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6964'\fI\%#6964\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6964\fP>\X'tty: link').
.IP \(bu 2
\fBfish_key_reader\fP and \fBfish_indent\fP send output from \fB\-\-version\fP to standard output, matching other fish binaries (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6964'\fI\%#6964\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6964\fP>\X'tty: link').
.IP \(bu 2
A new variable \fB$status_generation\fP is incremented only when the previous command produces an exit status (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6815'\fI\%#6815\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6815\fP>\X'tty: link'). This can be used, for example, to check whether a failure status is a holdover due to a background job, or actually produced by the last run command.
.IP \(bu 2
\fBfish_greeting\fP is now a function that reads a variable of the same name, and defaults to setting it globally.
This removes a universal variable by default and helps with updating the greeting.
However, to disable the greeting it is now necessary to explicitly specify universal scope (\fBset \-U fish_greeting\fP) or to disable it in config.fish (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7265'\fI\%#7265\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7265\fP>\X'tty: link').
.IP \(bu 2
Events are properly emitted after a job is cancelled (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2356'\fI\%#2356\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2356\fP>\X'tty: link').
.IP \(bu 2
\fBfish_preexec\fP and \fBfish_postexec\fP events are no longer triggered for empty commands (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4829'\fI\%#4829\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4829\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7085'\fI\%#7085\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7085\fP>\X'tty: link').
.IP \(bu 2
Functions triggered by the \fBfish_exit\fP event are correctly run when the terminal is closed or the shell receives SIGHUP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7014'\fI\%#7014\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7014\fP>\X'tty: link').
.IP \(bu 2
The \fBfish_prompt\fP event no longer fires when \fBread\fP is used. If
you need a function to run any time \fBread\fP is invoked by a script,
use the new \fBfish_read\fP event instead (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7039'\fI\%#7039\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7039\fP>\X'tty: link').
.IP \(bu 2
A new \fBfish_posterror\fP event is emitted when attempting to execute a command with syntax errors (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6880'\fI\%#6880\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6880\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/6816'\fI\%#6816\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6816\fP>\X'tty: link').
.IP \(bu 2
The debugging system has now fully switched from the old numbered level to the new named category system introduced in 3.1. A number of new debugging categories have been added, including \fBconfig\fP, \fBpath\fP, \fBreader\fP and \fBscreen\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6511'\fI\%#6511\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6511\fP>\X'tty: link'). See the output of \fBfish \-\-print\-debug\-categories\fP for the full list.
.IP \(bu 2
The warning about read\-only filesystems has been moved to a new \(dqwarning\-path\(dq debug category
and can be disabled by setting a debug category of \fB\-warning\-path\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6630'\fI\%#6630\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6630\fP>\X'tty: link'):
.INDENT 2.0
.INDENT 3.5
.sp
.EX
fish \-\-debug=\-warning\-path
.EE
.UNINDENT
.UNINDENT
.IP \(bu 2
The enabled debug categories are now printed on shell startup (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7007'\fI\%#7007\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7007\fP>\X'tty: link').
.IP \(bu 2
The \fB\-o\fP short option to fish, for \fB\-\-debug\-output\fP, works correctly instead of producing an
invalid option error (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7254'\fI\%#7254\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7254\fP>\X'tty: link').
.IP \(bu 2
fish\(aqs debugging can now also be enabled via \fBFISH_DEBUG\fP and \fBFISH_DEBUG_OUTPUT\fP environment variables.
This helps with debugging when no commandline options can be passed, like when fish is called in a shebang (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7359'\fI\%#7359\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7359\fP>\X'tty: link').
.IP \(bu 2
Abbreviations are now expanded after all command terminators (eg \fB;\fP or \fB|\fP), not just space,
as in fish 2.7.1 and before (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6970'\fI\%#6970\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6970\fP>\X'tty: link'), and after closing a command substitution (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6658'\fI\%#6658\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6658\fP>\X'tty: link').
.IP \(bu 2
The history file is now created with user\-private permissions,
matching other shells (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6926'\fI\%#6926\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6926\fP>\X'tty: link'). The directory containing the history
file was already private, so there should not have been any private data
revealed.
.IP \(bu 2
The output of \fBtime\fP is now properly aligned in all cases (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6726'\fI\%#6726\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6726\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/6714'\fI\%#6714\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6714\fP>\X'tty: link') and no longer depends on locale (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6757'\fI\%#6757\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6757\fP>\X'tty: link').
.IP \(bu 2
The command\-not\-found handling has been simplified.
When it can\(aqt find a command, fish now just executes a function called \fBfish_command_not_found\fP
instead of firing an event, making it easier to replace and reason about.
Previously\-defined \fB__fish_command_not_found_handler\fP functions with an appropriate event listener will still work (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7293'\fI\%#7293\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7293\fP>\X'tty: link').
.IP \(bu 2
\fBctrl\fP\-\fBc\fP handling has been reimplemented in C++ and is therefore quicker (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5259'\fI\%#5259\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5259\fP>\X'tty: link'), no longer occasionally prints an \(dqunknown command\(dq error (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7145'\fI\%#7145\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7145\fP>\X'tty: link') or overwrites multiline prompts (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3537'\fI\%#3537\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3537\fP>\X'tty: link').
.IP \(bu 2
\fBctrl\fP\-\fBc\fP no longer kills background jobs for which job control is
disabled, matching POSIX semantics (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6828'\fI\%#6828\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6828\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/6861'\fI\%#6861\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6861\fP>\X'tty: link').
.IP \(bu 2
Autosuggestions work properly after \fBctrl\fP\-\fBc\fP cancels the current commmand line (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6937'\fI\%#6937\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6937\fP>\X'tty: link').
.IP \(bu 2
History search is now case\-insensitive unless the search string contains an uppercase character (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7273'\fI\%#7273\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7273\fP>\X'tty: link').
.IP \(bu 2
\fBfish_update_completions\fP gained a new \fB\-\-keep\fP option, which improves speed by skipping completions that already exist (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6775'\fI\%#6775\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6775\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/6796'\fI\%#6796\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6796\fP>\X'tty: link').
.IP \(bu 2
Aliases containing an embedded backslash appear properly in the output of \fBalias\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6910'\fI\%#6910\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6910\fP>\X'tty: link').
.IP \(bu 2
\fBopen\fP no longer hangs indefinitely on certain systems, as a bug in \fBxdg\-open\fP has been worked around (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7215'\fI\%#7215\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7215\fP>\X'tty: link').
.IP \(bu 2
Long command lines no longer add a blank line after execution (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6826'\fI\%#6826\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6826\fP>\X'tty: link') and behave better with \fBbackspace\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6951'\fI\%#6951\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6951\fP>\X'tty: link').
.IP \(bu 2
\fBfunctions \-t\fP works like the long option \fB\-\-handlers\-type\fP, as documented, instead of producing an error (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6985'\fI\%#6985\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6985\fP>\X'tty: link').
.IP \(bu 2
History search now flashes when it found no more results (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7362'\fI\%#7362\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7362\fP>\X'tty: link')
.IP \(bu 2
fish now creates the path in the environment variable \fBXDG_RUNTIME_DIR\fP if it does not exist, before using it for runtime data storage (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7335'\fI\%#7335\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7335\fP>\X'tty: link').
.IP \(bu 2
\fBset_color \-\-print\-colors\fP now also respects the bold, dim, underline, reverse, italic and background modifiers, to better show their effect (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7314'\fI\%#7314\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7314\fP>\X'tty: link').
.IP \(bu 2
The fish Web configuration tool (\fBfish_config\fP) shows prompts correctly on Termux for Android (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7298'\fI\%#7298\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7298\fP>\X'tty: link') and detects Windows Services for Linux 2 properly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7027'\fI\%#7027\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7027\fP>\X'tty: link'). It no longer shows the \fBhistory\fP variable as it may be too large (one can use the History tab instead). It also starts the browser in another thread, avoiding hangs in some circumstances, especially with Firefox\(aqs Developer Edition (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7158'\fI\%#7158\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7158\fP>\X'tty: link'). Finally, a bug in the Source Code Pro font may cause browsers to hang, so this font is no longer chosen by default (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7714'\fI\%#7714\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7714\fP>\X'tty: link').
.IP \(bu 2
\fBfuncsave\fP gained a new \fB\-\-directory\fP option to specify the location of the saved function (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7041'\fI\%#7041\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7041\fP>\X'tty: link').
.IP \(bu 2
\fBhelp\fP works properly on MSYS2 (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7113'\fI\%#7113\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7113\fP>\X'tty: link') and only uses \fBcmd.exe\fP if running on WSL (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6797'\fI\%#6797\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6797\fP>\X'tty: link').
.IP \(bu 2
Resuming a piped job by its number, like \fBfg %1\fP, works correctly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7406'\fI\%#7406\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7406\fP>\X'tty: link'). Resumed jobs show the correct title in the terminal emulator (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7444'\fI\%#7444\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7444\fP>\X'tty: link').
.IP \(bu 2
Commands run from key bindings now use the same TTY modes as normal commands (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7483'\fI\%#7483\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7483\fP>\X'tty: link').
.IP \(bu 2
Autosuggestions from history are now case\-sensitive (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3978'\fI\%#3978\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3978\fP>\X'tty: link').
.IP \(bu 2
\fB$status\fP from completion scripts is no longer passed outside the completion, which keeps the status display in the prompt as the last command\(aqs status (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7555'\fI\%#7555\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7555\fP>\X'tty: link').
.IP \(bu 2
Updated localisations for pt_BR (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7480'\fI\%#7480\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7480\fP>\X'tty: link').
.IP \(bu 2
\fBfish_trace\fP output now starts with \fB\->\fP (like \fBfish \-\-profile\fP), making the depth more visible (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7538'\fI\%#7538\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7538\fP>\X'tty: link').
.IP \(bu 2
Resizing the terminal window no longer produces a corrupted prompt (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6532'\fI\%#6532\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6532\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7404'\fI\%#7404\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7404\fP>\X'tty: link').
.IP \(bu 2
\fBfunctions\fP produces an error rather than crashing on certain invalid arguments (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7515'\fI\%#7515\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7515\fP>\X'tty: link').
.IP \(bu 2
A crash in completions with inline variable assignment (eg \fBA= b\fP) has been fixed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7344'\fI\%#7344\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7344\fP>\X'tty: link').
.IP \(bu 2
\fBfish_private_mode\fP may now be changed dynamically using \fBset\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7589'\fI\%#7589\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7589\fP>\X'tty: link'), and history is kept in memory in private mode (but not stored permanently) (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7590'\fI\%#7590\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7590\fP>\X'tty: link').
.IP \(bu 2
Commands with leading spaces may be retrieved from history with up\-arrow until a new command is run, matching zsh\(aqs \fBHIST_IGNORE_SPACE\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1383'\fI\%#1383\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1383\fP>\X'tty: link').
.IP \(bu 2
Importing bash history or reporting errors with recursive globs (\fB**\fP) no longer hangs (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7407'\fI\%#7407\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7407\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7497'\fI\%#7497\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7497\fP>\X'tty: link').
.IP \(bu 2
\fBbind\fP now shows \fB\ex7f\fP for the del key instead of a literal DEL character (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7631'\fI\%#7631\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7631\fP>\X'tty: link')
.IP \(bu 2
Paths containing variables or tilde expansion are only suggested when they are still valid (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7582'\fI\%#7582\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7582\fP>\X'tty: link').
.IP \(bu 2
Syntax highlighting can now color a command as invalid even if executed quickly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5912'\fI\%#5912\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5912\fP>\X'tty: link').
.IP \(bu 2
Redirection targets are no longer highlighted as error if they contain variables which will likely be defined by the current commandline (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6654'\fI\%#6654\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6654\fP>\X'tty: link').
.IP \(bu 2
fish is now more resilient against broken terminal modes (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7133'\fI\%#7133\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7133\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/4873'\fI\%#4873\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4873\fP>\X'tty: link').
.IP \(bu 2
fish handles being in control of the TTY without owning its own process group better, avoiding some hangs in special configurations (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7388'\fI\%#7388\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7388\fP>\X'tty: link').
.IP \(bu 2
Keywords can now be colored differently by setting the \fBfish_color_keyword\fP variable (\fBfish_color_command\fP is used as a fallback) (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7678'\fI\%#7678\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7678\fP>\X'tty: link').
.IP \(bu 2
Just like \fBfish_indent\fP, the interactive reader will indent continuation lines that follow a line ending in a backslash, \fB|\fP, \fB&&\fP or \fB||\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7694'\fI\%#7694\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7694\fP>\X'tty: link').
.IP \(bu 2
Commands with a trailing escaped space are saved in history correctly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7661'\fI\%#7661\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7661\fP>\X'tty: link').
.IP \(bu 2
\fBfish_prompt\fP no longer mangles Unicode characters in the private\-use range U+F600\-U+F700. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7723'\fI\%#7723\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7723\fP>\X'tty: link').
.IP \(bu 2
The universal variable file, \fBfish_variables\fP, can be made a symbolic link without it being overwritten (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7466'\fI\%#7466\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7466\fP>\X'tty: link').
.IP \(bu 2
fish is now more resilient against \fBmktemp\fP failing (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7482'\fI\%#7482\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7482\fP>\X'tty: link').
.UNINDENT
.SS New or improved bindings
.INDENT 0.0
.IP \(bu 2
As mentioned above, new special input functions \fBundo\fP (\fBctrl\fP\-\fB_\fP or \fBctrl\fP\-\fBz\fP) and \fBredo\fP (\fBalt\fP\-\fB/\fP) can be used to revert changes to the command line or the pager search field (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6570'\fI\%#6570\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6570\fP>\X'tty: link').
.IP \(bu 2
\fBctrl\fP\-\fBz\fP is now available for binding (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7152'\fI\%#7152\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7152\fP>\X'tty: link').
.IP \(bu 2
Additionally, using the \fBcancel\fP special input function (bound to \fBescape\fP by default) right after fish picked an unambiguous completion will undo that (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7433'\fI\%#7433\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7433\fP>\X'tty: link').
.IP \(bu 2
\fBfish_clipboard_paste\fP (\fBctrl\fP\-\fBv\fP) trims indentation from multiline commands, because fish already indents (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7662'\fI\%#7662\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7662\fP>\X'tty: link').
.IP \(bu 2
Vi mode bindings now support \fBdh\fP, \fBdl\fP, \fBc0\fP, \fBcf\fP, \fBct\fP, \fBcF\fP, \fBcT\fP, \fBch\fP, \fBcl\fP, \fBy0\fP, \fBci\fP, \fBca\fP, \fByi\fP, \fBya\fP, \fBdi\fP, \fBda\fP, \fBd;\fP, \fBd,\fP, \fBo\fP, \fBO\fP and Control+left/right keys to navigate by word (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6648'\fI\%#6648\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6648\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/6755'\fI\%#6755\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6755\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/6769'\fI\%#6769\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6769\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7442'\fI\%#7442\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7442\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7516'\fI\%#7516\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7516\fP>\X'tty: link').
.IP \(bu 2
Vi mode bindings support \fB~\fP (tilde) to toggle the case of the selected character (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6908'\fI\%#6908\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6908\fP>\X'tty: link').
.IP \(bu 2
Functions \fBup\-or\-search\fP and \fBdown\-or\-search\fP (\fBup\fP and \fBdown\fP) can cross empty lines, and don\(aqt activate search mode if the search fails, which makes them easier to use to move between lines in some situations.
.IP \(bu 2
If history search fails to find a match, the cursor is no longer moved. This is useful when accidentally starting a history search on a multi\-line commandline.
.IP \(bu 2
The special input function \fBbeginning\-of\-history\fP (\fBpageup\fP) now moves to the oldest search instead of the youngest \- that\(aqs \fBend\-of\-history\fP (\fBpagedown\fP).
.IP \(bu 2
A new special input function \fBforward\-single\-char\fP moves one character to the right, and if an autosuggestion is available, only take a single character from it (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7217'\fI\%#7217\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7217\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/4984'\fI\%#4984\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4984\fP>\X'tty: link').
.IP \(bu 2
Special input functions can now be joined with \fBor\fP as a modifier (adding to \fBand\fP), though only some commands set an exit status (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7217'\fI\%#7217\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7217\fP>\X'tty: link'). This includes \fBsuppress\-autosuggestion\fP to reflect whether an autosuggestion was suppressed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1419'\fI\%#1419\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1419\fP>\X'tty: link')
.IP \(bu 2
A new function \fB__fish_preview_current_file\fP, bound to \fBalt\fP\-\fBo\fP, opens the
current file at the cursor in a pager (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6838'\fI\%#6838\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6838\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/6855'\fI\%#6855\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6855\fP>\X'tty: link').
.IP \(bu 2
\fBedit_command_buffer\fP (\fBalt\fP\-\fBe\fP and \fBalt\fP\-\fBv\fP) passes the cursor position
to the external editor if the editor is recognized (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6138'\fI\%#6138\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6138\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/6954'\fI\%#6954\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6954\fP>\X'tty: link').
.IP \(bu 2
\fB__fish_prepend_sudo\fP (\fBalt\fP\-\fBs\fP) now toggles a \fBsudo\fP prefix (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7012'\fI\%#7012\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7012\fP>\X'tty: link') and avoids shifting the cursor (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6542'\fI\%#6542\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6542\fP>\X'tty: link').
.IP \(bu 2
\fB__fish_prepend_sudo\fP (\fBalt\fP\-\fBs\fP) now uses the previous commandline if the current one is empty,
to simplify rerunning the previous command with \fBsudo\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7079'\fI\%#7079\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7079\fP>\X'tty: link').
.IP \(bu 2
\fB__fish_toggle_comment_commandline\fP (\fBalt\fP\-\fB#\fP) now uncomments and presents the last comment
from history if the commandline is empty (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7137'\fI\%#7137\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7137\fP>\X'tty: link').
.IP \(bu 2
\fB__fish_whatis_current_token\fP (\fBalt\fP\-\fBw\fP) prints descriptions for functions and builtins (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7191'\fI\%#7191\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7191\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/2083'\fI\%#2083\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2083\fP>\X'tty: link').
.IP \(bu 2
The definition of \(dqword\(dq and \(dqbigword\(dq for movements was refined, fixing (eg) vi mode\(aqs behavior with \fBe\fP on the second\-to\-last char, and bigword\(aqs behavior with single\-character words and non\-blank non\-graphical characters (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7353'\fI\%#7353\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7353\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7354'\fI\%#7354\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7354\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/4025'\fI\%#4025\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4025\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7328'\fI\%#7328\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7328\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7325'\fI\%#7325\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7325\fP>\X'tty: link')
.IP \(bu 2
fish\(aqs clipboard bindings now also support Windows Subsystem for Linux via PowerShell and clip.exe (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7455'\fI\%#7455\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7455\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7458'\fI\%#7458\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7458\fP>\X'tty: link') and will properly copy newlines in multi\-line commands.
.IP \(bu 2
Using the \fB*\-jump\fP special input functions before typing anything else no longer crashes fish.
.IP \(bu 2
Completing variable overrides (\fBfoo=bar\fP) could replace the entire thing with just the completion in some circumstances. This has been fixed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7398'\fI\%#7398\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7398\fP>\X'tty: link').
.UNINDENT
.SS Improved prompts
.INDENT 0.0
.IP \(bu 2
The default and example prompts print the correct exit status for
commands prefixed with \fBnot\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6566'\fI\%#6566\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6566\fP>\X'tty: link').
.IP \(bu 2
git prompts include all untracked files in the repository, not just those in the current
directory (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6086'\fI\%#6086\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6086\fP>\X'tty: link').
.IP \(bu 2
The git prompts correctly show stash states (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6876'\fI\%#6876\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6876\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7136'\fI\%#7136\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7136\fP>\X'tty: link') and clean states (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7471'\fI\%#7471\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7471\fP>\X'tty: link').
.IP \(bu 2
The Mercurial prompt correctly shows untracked status (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6906'\fI\%#6906\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6906\fP>\X'tty: link'), and by default only shows the branch for performance reasons.
A new variable \fB$fish_prompt_hg_show_informative_status\fP can be set to enable more information.
.IP \(bu 2
The \fBfish_vcs_prompt\fP passes its arguments to the various VCS prompts that it calls (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7033'\fI\%#7033\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7033\fP>\X'tty: link').
.IP \(bu 2
The Subversion prompt was broken in a number of ways in 3.1.0 and has been restored (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6715'\fI\%#6715\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6715\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7278'\fI\%#7278\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7278\fP>\X'tty: link').
.IP \(bu 2
A new helper function \fBfish_is_root_user\fP simplifies checking for superuser privilege (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7031'\fI\%#7031\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7031\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7123'\fI\%#7123\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7123\fP>\X'tty: link').
.IP \(bu 2
New colorschemes \- \fBayu Light\fP, \fBayu Dark\fP and \fBayu Mirage\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7596'\fI\%#7596\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7596\fP>\X'tty: link').
.IP \(bu 2
Bugs related to multiline prompts, including repainting (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5860'\fI\%#5860\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5860\fP>\X'tty: link') or navigating directory history (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3550'\fI\%#3550\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3550\fP>\X'tty: link') leading to graphical glitches have been fixed.
.IP \(bu 2
The \fBnim\fP prompt now handles vi mode better (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6802'\fI\%#6802\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6802\fP>\X'tty: link')
.UNINDENT
.SS Improved terminal support
.INDENT 0.0
.IP \(bu 2
A new variable, \fBfish_vi_force_cursor\fP, can be set to force \fBfish_vi_cursor\fP to attempt changing the cursor
shape in vi mode, regardless of terminal (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6968'\fI\%#6968\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6968\fP>\X'tty: link'). The \fBfish_vi_cursor\fP option \fB\-\-force\-iterm\fP has been deprecated.
.IP \(bu 2
\fBdiff\fP will now colourize output, if supported (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7308'\fI\%#7308\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7308\fP>\X'tty: link').
.IP \(bu 2
Autosuggestions appear when the cursor passes the right prompt (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6948'\fI\%#6948\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6948\fP>\X'tty: link') or wraps to the next line (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7213'\fI\%#7213\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7213\fP>\X'tty: link').
.IP \(bu 2
The cursor shape in Vi mode changes properly in Windows Terminal (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6999'\fI\%#6999\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6999\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/6478'\fI\%#6478\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6478\fP>\X'tty: link').
.IP \(bu 2
The spurious warning about terminal size in small terminals has been removed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6980'\fI\%#6980\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6980\fP>\X'tty: link').
.IP \(bu 2
Dynamic titles are now enabled in Alacritty (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7073'\fI\%#7073\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7073\fP>\X'tty: link') and emacs\(aq vterm (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7122'\fI\%#7122\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7122\fP>\X'tty: link').
.IP \(bu 2
Current working directory updates are enabled in foot (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7099'\fI\%#7099\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7099\fP>\X'tty: link') and WezTerm (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7649'\fI\%#7649\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7649\fP>\X'tty: link').
.IP \(bu 2
The width computation for certain emoji agrees better with terminals (especially flags). (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7237'\fI\%#7237\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7237\fP>\X'tty: link').
.IP \(bu 2
Long command lines are wrapped in all cases, instead of sometimes being put on a new line (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5118'\fI\%#5118\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5118\fP>\X'tty: link').
.IP \(bu 2
The pager is properly rendered with long command lines selected (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2557'\fI\%#2557\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2557\fP>\X'tty: link').
.IP \(bu 2
Sessions with right prompts can be resized correctly in terminals that handle reflow, like GNOME Terminal (and other VTE\-based terminals), upcoming Konsole releases and Alacritty. This detection can be overridden with the new \fBfish_handle_reflow\fP variable (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7491'\fI\%#7491\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7491\fP>\X'tty: link').
.IP \(bu 2
fish now sets terminal modes sooner, which stops output from appearing before the greeting and prompt are ready (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7489'\fI\%#7489\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7489\fP>\X'tty: link').
.IP \(bu 2
Better detection of new Konsole versions for true color support and cursor shape changing.
.IP \(bu 2
fish no longer attempts to modify the terminal size via \fBTIOCSWINSZ\fP, improving compatibility with Kitty (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6994'\fI\%#6994\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6994\fP>\X'tty: link').
.UNINDENT
.SS Completions
.INDENT 0.0
.IP \(bu 2
Added completions for
.INDENT 2.0
.IP \(bu 2
\fB7z\fP, \fB7za\fP and \fB7zr\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7220'\fI\%#7220\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7220\fP>\X'tty: link')
.IP \(bu 2
\fBalias\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7035'\fI\%#7035\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7035\fP>\X'tty: link')
.IP \(bu 2
\fBalternatives\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7616'\fI\%#7616\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7616\fP>\X'tty: link')
.IP \(bu 2
\fBapk\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7108'\fI\%#7108\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7108\fP>\X'tty: link')
.IP \(bu 2
\fBasciidoctor\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7000'\fI\%#7000\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7000\fP>\X'tty: link')
.IP \(bu 2
\fBavifdec\fP and \fBavifenc\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7674'\fI\%#7674\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7674\fP>\X'tty: link')
.IP \(bu 2
\fBbluetoothctl\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7438'\fI\%#7438\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7438\fP>\X'tty: link')
.IP \(bu 2
\fBcjxl\fP and \fBdjxl\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7673'\fI\%#7673\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7673\fP>\X'tty: link')
.IP \(bu 2
\fBcmark\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7000'\fI\%#7000\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7000\fP>\X'tty: link')
.IP \(bu 2
\fBcreate_ap\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7096'\fI\%#7096\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7096\fP>\X'tty: link')
.IP \(bu 2
\fBdeno\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7138'\fI\%#7138\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7138\fP>\X'tty: link')
.IP \(bu 2
\fBdhclient\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6684'\fI\%#6684\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6684\fP>\X'tty: link')
.IP \(bu 2
Postgres\-related commands \fBdropdb\fP, \fBcreatedb\fP, \fBpg_restore\fP, \fBpg_dump\fP and
\fBpg_dumpall\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6620'\fI\%#6620\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6620\fP>\X'tty: link')
.IP \(bu 2
\fBdotnet\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7558'\fI\%#7558\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7558\fP>\X'tty: link')
.IP \(bu 2
\fBdowngrade\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6751'\fI\%#6751\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6751\fP>\X'tty: link')
.IP \(bu 2
\fBgapplication\fP, \fBgdbus\fP, \fBgio\fP and \fBgresource\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7300'\fI\%#7300\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7300\fP>\X'tty: link')
.IP \(bu 2
\fBgh\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7112'\fI\%#7112\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7112\fP>\X'tty: link')
.IP \(bu 2
\fBgitk\fP
.IP \(bu 2
\fBgroups\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6889'\fI\%#6889\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6889\fP>\X'tty: link')
.IP \(bu 2
\fBhashcat\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7746'\fI\%#7746\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7746\fP>\X'tty: link')
.IP \(bu 2
\fBhikari\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7083'\fI\%#7083\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7083\fP>\X'tty: link')
.IP \(bu 2
\fBicdiff\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7503'\fI\%#7503\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7503\fP>\X'tty: link')
.IP \(bu 2
\fBimv\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6675'\fI\%#6675\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6675\fP>\X'tty: link')
.IP \(bu 2
\fBjohn\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7746'\fI\%#7746\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7746\fP>\X'tty: link')
.IP \(bu 2
\fBjulia\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7468'\fI\%#7468\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7468\fP>\X'tty: link')
.IP \(bu 2
\fBk3d\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7202'\fI\%#7202\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7202\fP>\X'tty: link')
.IP \(bu 2
\fBldapsearch\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7578'\fI\%#7578\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7578\fP>\X'tty: link')
.IP \(bu 2
\fBlightdm\fP and \fBdm\-tool\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7624'\fI\%#7624\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7624\fP>\X'tty: link')
.IP \(bu 2
\fBlosetup\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7621'\fI\%#7621\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7621\fP>\X'tty: link')
.IP \(bu 2
\fBmicro\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7339'\fI\%#7339\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7339\fP>\X'tty: link')
.IP \(bu 2
\fBmpc\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7169'\fI\%#7169\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7169\fP>\X'tty: link')
.IP \(bu 2
Metasploit\(aqs \fBmsfconsole\fP, \fBmsfdb\fP and \fBmsfvenom\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6930'\fI\%#6930\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6930\fP>\X'tty: link')
.IP \(bu 2
\fBmtr\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7638'\fI\%#7638\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7638\fP>\X'tty: link')
.IP \(bu 2
\fBmysql\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6819'\fI\%#6819\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6819\fP>\X'tty: link')
.IP \(bu 2
\fBncat\fP, \fBnc.openbsd\fP, \fBnc.traditional\fP and \fBnmap\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6873'\fI\%#6873\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6873\fP>\X'tty: link')
.IP \(bu 2
\fBopenssl\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6845'\fI\%#6845\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6845\fP>\X'tty: link')
.IP \(bu 2
\fBprime\-run\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7241'\fI\%#7241\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7241\fP>\X'tty: link')
.IP \(bu 2
\fBps2pdf{12,13,14,wr}\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6673'\fI\%#6673\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6673\fP>\X'tty: link')
.IP \(bu 2
\fBpyenv\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6551'\fI\%#6551\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6551\fP>\X'tty: link')
.IP \(bu 2
\fBrst2html\fP, \fBrst2html4\fP, \fBrst2html5\fP, \fBrst2latex\fP,
\fBrst2man\fP, \fBrst2odt\fP, \fBrst2pseudoxml\fP, \fBrst2s5\fP,
\fBrst2xetex\fP, \fBrst2xml\fP and \fBrstpep2html\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7019'\fI\%#7019\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7019\fP>\X'tty: link')
.IP \(bu 2
\fBspago\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7381'\fI\%#7381\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7381\fP>\X'tty: link')
.IP \(bu 2
\fBsphinx\-apidoc\fP, \fBsphinx\-autogen\fP, \fBsphinx\-build\fP and
\fBsphinx\-quickstart\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7000'\fI\%#7000\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7000\fP>\X'tty: link')
.IP \(bu 2
\fBstrace\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6656'\fI\%#6656\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6656\fP>\X'tty: link')
.IP \(bu 2
systemd\(aqs \fBbootctl\fP, \fBcoredumpctl\fP, \fBhostnamectl\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7428'\fI\%#7428\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7428\fP>\X'tty: link'), \fBhomectl\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7435'\fI\%#7435\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7435\fP>\X'tty: link'), \fBnetworkctl\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7668'\fI\%#7668\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7668\fP>\X'tty: link') and \fBuserdbctl\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7667'\fI\%#7667\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7667\fP>\X'tty: link')
.IP \(bu 2
\fBtcpdump\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6690'\fI\%#6690\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6690\fP>\X'tty: link')
.IP \(bu 2
\fBtig\fP
.IP \(bu 2
\fBtraceroute\fP and \fBtracepath\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6803'\fI\%#6803\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6803\fP>\X'tty: link')
.IP \(bu 2
\fBwindscribe\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6788'\fI\%#6788\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6788\fP>\X'tty: link')
.IP \(bu 2
\fBwireshark\fP, \fBtshark\fP, and \fBdumpcap\fP
.IP \(bu 2
\fBxbps\-*\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7239'\fI\%#7239\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7239\fP>\X'tty: link')
.IP \(bu 2
\fBxxhsum\fP, \fBxxh32sum\fP, \fBxxh64sum\fP and \fBxxh128sum\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7103'\fI\%#7103\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7103\fP>\X'tty: link')
.IP \(bu 2
\fByadm\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7100'\fI\%#7100\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7100\fP>\X'tty: link')
.IP \(bu 2
\fBzopfli\fP and \fBzopflipng\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6872'\fI\%#6872\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6872\fP>\X'tty: link')
.UNINDENT
.IP \(bu 2
Lots of improvements to completions, including:
.INDENT 2.0
.IP \(bu 2
\fBgit\fP completions can complete the right and left parts of a commit range like \fBfrom..to\fP or \fBleft...right\fP\&.
.IP \(bu 2
Completion scripts for custom Git subcommands like \fBgit\-xyz\fP are now loaded with Git completions. The completions can now be defined directly on the subcommand (using \fBcomplete git\-xyz\fP), and completion for \fBgit xyz\fP will work. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7075'\fI\%#7075\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7075\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7652'\fI\%#7652\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7652\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/4358'\fI\%#4358\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4358\fP>\X'tty: link')
.IP \(bu 2
\fBmake\fP completions no longer second\-guess make\(aqs file detection, fixing target completion in some cases (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7535'\fI\%#7535\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7535\fP>\X'tty: link').
.IP \(bu 2
Command completions now correctly print the description even if the command was fully matched (like in \fBls<TAB>\fP).
.IP \(bu 2
\fBset\fP completions no longer hide variables starting with \fB__\fP, they are sorted last instead.
.UNINDENT
.IP \(bu 2
Improvements to the manual page completion generator (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7086'\fI\%#7086\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7086\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/6879'\fI\%#6879\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6879\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7187'\fI\%#7187\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7187\fP>\X'tty: link').
.IP \(bu 2
Significant performance improvements to completion of the available commands (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7153'\fI\%#7153\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7153\fP>\X'tty: link'), especially on macOS Big Sur where there was a significant regression (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7365'\fI\%#7365\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7365\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7511'\fI\%#7511\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7511\fP>\X'tty: link').
.IP \(bu 2
Suffix completion using \fB__fish_complete_suffix\fP uses the same fuzzy matching logic as normal file completion, and completes any file but sorts files with matching suffix first (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7040'\fI\%#7040\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7040\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7547'\fI\%#7547\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7547\fP>\X'tty: link'). Previously, it only completed files with matching suffix.
.UNINDENT
.SS For distributors
.INDENT 0.0
.IP \(bu 2
fish has a new interactive test driver based on pexpect, removing the optional dependency on expect (and adding an optional dependency on pexpect) (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5451'\fI\%#5451\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5451\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/6825'\fI\%#6825\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6825\fP>\X'tty: link').
.IP \(bu 2
The CHANGELOG was moved to restructured text, allowing it to be included in the documentation (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7057'\fI\%#7057\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7057\fP>\X'tty: link').
.IP \(bu 2
fish handles ncurses installed in a non\-standard prefix better (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6600'\fI\%#6600\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6600\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/7219'\fI\%#7219\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7219\fP>\X'tty: link'), and uses variadic tparm on NetBSD curses (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6626'\fI\%#6626\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6626\fP>\X'tty: link').
.IP \(bu 2
The Web\-based configuration tool no longer uses an obsolete Angular version (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7147'\fI\%#7147\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7147\fP>\X'tty: link').
.IP \(bu 2
The fish project has adopted the Contributor Covenant code of conduct (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7151'\fI\%#7151\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7151\fP>\X'tty: link').
.UNINDENT
.SS Deprecations and removed features
.INDENT 0.0
.IP \(bu 2
The \fBfish_color_match\fP variable is no longer used. (Previously this controlled the color of matching quotes and parens when using \fBread\fP).
.IP \(bu 2
fish 3.2.0 will be the last release in which the redirection to standard error with the \fB^\fP character is enabled.
The \fBstderr\-nocaret\fP feature flag will be changed to \(dqon\(dq in future releases.
.IP \(bu 2
\fBstring\fP is now a reserved word and cannot be used for function names (see above).
.IP \(bu 2
\fBfish_vi_cursor\fP\(aqs option \fB\-\-force\-iterm\fP has been deprecated (see above).
.IP \(bu 2
\fBcommand\fP, \fBjobs\fP and \fBtype\fP long\-form option \fB\-\-quiet\fP is deprecated in favor of \fB\-\-query\fP (see above).
.IP \(bu 2
The \fBfish_command_not_found\fP event is no longer emitted, instead there is a function of that name.
By default it will call a previously\-defined \fB__fish_command_not_found_handler\fP\&. To emit the event manually use \fBemit fish_command_not_found\fP\&.
.IP \(bu 2
The \fBfish_prompt\fP event no longer fires when \fBread\fP is used. If
you need a function to run any time \fBread\fP is invoked by a script,
use the new \fBfish_read\fP event instead (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7039'\fI\%#7039\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7039\fP>\X'tty: link').
.IP \(bu 2
To disable the greeting message permanently it is no longer enough to just run \fBset fish_greeting\fP interactively as it is
no longer implicitly a universal variable. Use \fBset \-U fish_greeting\fP or disable it in config.fish with \fBset \-g fish_greeting\fP\&.
.IP \(bu 2
The long\-deprecated and non\-functional \fB\-m\fP/\fB\-\-read\-mode\fP options to \fBread\fP were removed in 3.1b1. Using the short form, or a never\-implemented \fB\-B\fP option, no longer crashes fish (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7659'\fI\%#7659\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7659\fP>\X'tty: link').
.IP \(bu 2
With the addition of new categories for debug options, the old numbered debugging levels have been removed.
.UNINDENT
.SS For distributors and developers
.INDENT 0.0
.IP \(bu 2
fish source tarballs are now distributed using the XZ compression
method (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5460'\fI\%#5460\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5460\fP>\X'tty: link').
.IP \(bu 2
The fish source tarball contains an example FreeDesktop entry and icon.
.IP \(bu 2
The CMake variable \fBMAC_CODESIGN_ID\fP can now be set to \(dqoff\(dq to disable code\-signing (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6952'\fI\%#6952\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6952\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/6792'\fI\%#6792\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6792\fP>\X'tty: link').
.IP \(bu 2
Building on on macOS earlier than 10.13.6 succeeds, instead of failing on code\-signing (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6791'\fI\%#6791\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6791\fP>\X'tty: link').
.IP \(bu 2
The pkg\-config file now uses variables to ensure paths used are portable across prefixes.
.IP \(bu 2
The default values for the \fBextra_completionsdir\fP, \fBextra_functionsdir\fP
and \fBextra_confdir\fP options now use the installation prefix rather than \fB/usr/local\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6778'\fI\%#6778\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6778\fP>\X'tty: link').
.IP \(bu 2
A new CMake variable \fBFISH_USE_SYSTEM_PCRE2\fP controls whether fish
builds with the system\-installed PCRE2, or the version it bundles. By
default it prefers the system library if available, unless Mac
codesigning is enabled (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6952'\fI\%#6952\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6952\fP>\X'tty: link').
.IP \(bu 2
Running the full interactive test suite now requires Python 3.5+ and the pexpect package (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6825'\fI\%#6825\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6825\fP>\X'tty: link'); the expect package is no longer required.
.IP \(bu 2
Support for Python 2 in fish\(aqs tools (\fBfish_config\fP and the manual page completion generator) is no longer guaranteed. Please use Python 3.5 or later (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6537'\fI\%#6537\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6537\fP>\X'tty: link').
.IP \(bu 2
The Web\-based configuration tool is compatible with Python 3.10  (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7600'\fI\%#7600\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7600\fP>\X'tty: link') and no longer requires Python\(aqs distutils package (\X'tty: link https://github.com/fish-shell/fish-shell/issues/7514'\fI\%#7514\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/7514\fP>\X'tty: link').
.IP \(bu 2
fish 3.2 is the last release to support Red Hat Enterprise Linux & CentOS version 6.
.UNINDENT

.sp
.ce
----

.ce 0
.sp
.SH FISH 3.1.2 (RELEASED APRIL 29, 2020)
.sp
This release of fish fixes a major issue discovered in fish 3.1.1:
.INDENT 0.0
.IP \(bu 2
Commands such as \fBfzf\fP and \fBenhancd\fP, when used with \fBeval\fP,
would hang. \fBeval\fP buffered output too aggressively, which has been
fixed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6955'\fI\%#6955\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6955\fP>\X'tty: link').
.UNINDENT
.sp
If you are upgrading from version 3.0.0 or before, please also review
the release notes for 3.1.1, 3.1.0 and 3.1b1 (included below).

.sp
.ce
----

.ce 0
.sp
.SH FISH 3.1.1 (RELEASED APRIL 27, 2020)
.sp
This release of fish fixes a number of major issues discovered in fish
3.1.0.
.INDENT 0.0
.IP \(bu 2
Commands which involve \fB\&. ( ... | psub)\fP now work correctly, as a
bug in the \fBfunction \-\-on\-job\-exit\fP option has been fixed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6613'\fI\%#6613\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6613\fP>\X'tty: link').
.IP \(bu 2
Conflicts between upstream packages for ripgrep and bat, and the fish
packages, have been resolved (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5822'\fI\%#5822\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5822\fP>\X'tty: link').
.IP \(bu 2
Starting fish in a directory without read access, such as via \fBsu\fP,
no longer crashes (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6597'\fI\%#6597\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6597\fP>\X'tty: link').
.IP \(bu 2
Glob ordering changes which were introduced in 3.1.0 have been
reverted, returning the order of globs to the previous state (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6593'\fI\%#6593\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6593\fP>\X'tty: link').
.IP \(bu 2
Redirections using the deprecated caret syntax to a file descriptor
(eg \fB^&2\fP) work correctly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6591'\fI\%#6591\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6591\fP>\X'tty: link').
.IP \(bu 2
Redirections that append to a file descriptor (eg \fB2>>&1\fP) work
correctly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6614'\fI\%#6614\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6614\fP>\X'tty: link').
.IP \(bu 2
Building fish on macOS (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6602'\fI\%#6602\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6602\fP>\X'tty: link') or with new versions of GCC (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6604'\fI\%#6604\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6604\fP>\X'tty: link',
\X'tty: link https://github.com/fish-shell/fish-shell/issues/6609'\fI\%#6609\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6609\fP>\X'tty: link') is now successful.
.IP \(bu 2
\fBtime\fP is now correctly listed in the output of \fBbuiltin \-n\fP, and
\fBtime \-\-help\fP works correctly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6598'\fI\%#6598\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6598\fP>\X'tty: link').
.IP \(bu 2
Exported universal variables now update properly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6612'\fI\%#6612\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6612\fP>\X'tty: link').
.IP \(bu 2
\fBstatus current\-command\fP gives the expected output when used with
an environment override \- that is, \fBF=B status current\-command\fP
returns \fBstatus\fP instead of \fBF=B\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6635'\fI\%#6635\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6635\fP>\X'tty: link').
.IP \(bu 2
\fBtest\fP no longer crashes when used with “\fBnan\fP” or “\fBinf\fP”
arguments, erroring out instead (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6655'\fI\%#6655\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6655\fP>\X'tty: link').
.IP \(bu 2
Copying from the end of the command line no longer crashes fish
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/6680'\fI\%#6680\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6680\fP>\X'tty: link').
.IP \(bu 2
\fBread\fP no longer removes multiple separators when splitting a
variable into a list, restoring the previous behaviour from fish 3.0
and before (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6650'\fI\%#6650\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6650\fP>\X'tty: link').
.IP \(bu 2
Functions using \fB\-\-on\-job\-exit\fP and \fB\-\-on\-process\-exit\fP work
reliably again (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6679'\fI\%#6679\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6679\fP>\X'tty: link').
.IP \(bu 2
Functions using \fB\-\-on\-signal INT\fP work reliably in interactive
sessions, as they did in fish 2.7 and before (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6649'\fI\%#6649\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6649\fP>\X'tty: link'). These handlers
have never worked in non\-interactive sessions, and making them work
is an ongoing process.
.IP \(bu 2
Functions using \fB\-\-on\-variable\fP work reliably with variables which
are set implicitly (rather than with \fBset\fP), such as
“\fBfish_bind_mode\fP” and “\fBPWD\fP” (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6653'\fI\%#6653\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6653\fP>\X'tty: link').
.IP \(bu 2
256 colors are properly enabled under certain conditions that were
incorrectly detected in fish 3.1.0 (\fB$TERM\fP begins with xterm, does
not include “\fB256color\fP”, and \fB$TERM_PROGRAM\fP is not set)
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/6701'\fI\%#6701\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6701\fP>\X'tty: link').
.IP \(bu 2
The Mercurial (\fBhg\fP) prompt no longer produces an error when the
current working directory is removed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6699'\fI\%#6699\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6699\fP>\X'tty: link'). Also, for performance
reasons it shows only basic information by default; to restore the
detailed status, set \fB$fish_prompt_hg_show_informative_status\fP\&.
.IP \(bu 2
The VCS prompt, \fBfish_vcs_prompt\fP, no longer displays Subversion
(\fBsvn\fP) status by default, due to the potential slowness of this
operation (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6681'\fI\%#6681\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6681\fP>\X'tty: link').
.IP \(bu 2
Pasting of commands has been sped up (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6713'\fI\%#6713\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6713\fP>\X'tty: link').
.IP \(bu 2
Using extended Unicode characters, such as emoji, in a non\-Unicode
capable locale (such as the \fBC\fP or \fBPOSIX\fP locale) no longer
renders all output blank (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6736'\fI\%#6736\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6736\fP>\X'tty: link').
.IP \(bu 2
\fBhelp\fP prefers to use \fBxdg\-open\fP, avoiding the use of \fBopen\fP on
Debian systems where this command is actually \fBopenvt\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6739'\fI\%#6739\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6739\fP>\X'tty: link').
.IP \(bu 2
Command lines starting with a space, which are not saved in history,
now do not get autosuggestions. This fixes an issue with Midnight
Commander integration (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6763'\fI\%#6763\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6763\fP>\X'tty: link'), but may be changed in a future
version.
.IP \(bu 2
Copying to the clipboard no longer inserts a newline at the end of
the content, matching fish 2.7 and earlier (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6927'\fI\%#6927\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6927\fP>\X'tty: link').
.IP \(bu 2
\fBfzf\fP in complex pipes no longer hangs. More generally, code run as
part of command substitutions or \fBeval\fP will no longer have
separate process groups. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6624'\fI\%#6624\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6624\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/6806'\fI\%#6806\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6806\fP>\X'tty: link').
.UNINDENT
.sp
This release also includes:
.INDENT 0.0
.IP \(bu 2
several changes to improve macOS compatibility with code signing
and notarization;
.IP \(bu 2
several improvements to completions; and
.IP \(bu 2
several content and formatting improvements to the documentation.
.UNINDENT
.sp
If you are upgrading from version 3.0.0 or before, please also review
the release notes for 3.1.0 and 3.1b1 (included below).
.SS Errata for fish 3.1
.sp
A new builtin, \fBtime\fP, was introduced in the fish 3.1 releases. This
builtin is a reserved word (like \fBtest\fP, \fBfunction\fP, and others)
because of the way it is implemented, and functions can no longer be
named \fBtime\fP\&. This was not clear in the fish 3.1b1 changelog.

.sp
.ce
----

.ce 0
.sp
.SH FISH 3.1.0 (RELEASED FEBRUARY 12, 2020)
.sp
Compared to the beta release of fish 3.1b1, fish version 3.1.0:
.INDENT 0.0
.IP \(bu 2
Fixes a regression where spaces after a brace were removed despite
brace expansion not occurring (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6564'\fI\%#6564\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6564\fP>\X'tty: link').
.IP \(bu 2
Fixes a number of problems in compiling and testing on Cygwin
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/6549'\fI\%#6549\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6549\fP>\X'tty: link') and Solaris\-derived systems such as Illumos (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6553'\fI\%#6553\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6553\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/6554'\fI\%#6554\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6554\fP>\X'tty: link',
\X'tty: link https://github.com/fish-shell/fish-shell/issues/6555'\fI\%#6555\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6555\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/6556'\fI\%#6556\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6556\fP>\X'tty: link', and \X'tty: link https://github.com/fish-shell/fish-shell/issues/6558'\fI\%#6558\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6558\fP>\X'tty: link').
.IP \(bu 2
Fixes the process for building macOS packages.
.IP \(bu 2
Fixes a regression where excessive error messages are printed if
Unicode characters are emitted in non\-Unicode\-capable locales
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/6584'\fI\%#6584\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6584\fP>\X'tty: link').
.IP \(bu 2
Contains some improvements to the documentation and a small number
of completions.
.UNINDENT
.sp
If you are upgrading from version 3.0.0 or before, please also review
the release notes for 3.1b1 (included below).

.sp
.ce
----

.ce 0
.sp
.SH FISH 3.1B1 (RELEASED JANUARY 26, 2020)
.SS Notable improvements and fixes
.INDENT 0.0
.IP \(bu 2
A new \fB$pipestatus\fP variable contains a list of exit statuses of
the previous job, for each of the separate commands in a pipeline
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/5632'\fI\%#5632\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5632\fP>\X'tty: link').
.IP \(bu 2
fish no longer buffers pipes to the last function in a pipeline,
improving many cases where pipes appeared to block or hang (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1396'\fI\%#1396\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1396\fP>\X'tty: link').
.IP \(bu 2
An overhaul of error messages for builtin commands, including a
removal of the overwhelming usage summary, more readable stack traces
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/3404'\fI\%#3404\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3404\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/5434'\fI\%#5434\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5434\fP>\X'tty: link'), and stack traces for \fBtest\fP (aka \fB[\fP) (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5771'\fI\%#5771\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5771\fP>\X'tty: link').
.IP \(bu 2
fish’s debugging arguments have been significantly improved. The
\fB\-\-debug\-level\fP option has been removed, and a new \fB\-\-debug\fP
option replaces it. This option accepts various categories, which may
be listed via \fBfish \-\-print\-debug\-categories\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5879'\fI\%#5879\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5879\fP>\X'tty: link'). A new
\fB\-\-debug\-output\fP option allows for redirection of debug output.
.IP \(bu 2
\fBstring\fP has a new \fBcollect\fP subcommand for use in command
substitutions, producing a single output instead of splitting on new
lines (similar to \fB\(dq$(cmd)\(dq\fP in other shells) (\X'tty: link https://github.com/fish-shell/fish-shell/issues/159'\fI\%#159\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/159\fP>\X'tty: link').
.IP \(bu 2
The fish manual, tutorial and FAQ are now available in \fBman\fP format
as \fBfish\-doc\fP, \fBfish\-tutorial\fP and \fBfish\-faq\fP respectively
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/5521'\fI\%#5521\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5521\fP>\X'tty: link').
.IP \(bu 2
Like other shells, \fBcd\fP now always looks for its argument in the
current directory as a last resort, even if the \fBCDPATH\fP variable
does not include it or “.” (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4484'\fI\%#4484\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4484\fP>\X'tty: link').
.IP \(bu 2
fish now correctly handles \fBCDPATH\fP entries that start with \fB\&..\fP
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/6220'\fI\%#6220\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6220\fP>\X'tty: link') or contain \fB\&./\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5887'\fI\%#5887\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5887\fP>\X'tty: link').
.IP \(bu 2
The \fBfish_trace\fP variable may be set to trace execution (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3427'\fI\%#3427\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3427\fP>\X'tty: link').
This performs a similar role as \fBset \-x\fP in other shells.
.IP \(bu 2
fish uses the temporary directory determined by the system, rather
than relying on \fB/tmp\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3845'\fI\%#3845\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3845\fP>\X'tty: link').
.IP \(bu 2
The fish Web configuration tool (\fBfish_config\fP) prints a list of
commands it is executing, to help understanding and debugging
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/5584'\fI\%#5584\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5584\fP>\X'tty: link').
.IP \(bu 2
Major performance improvements when pasting (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5866'\fI\%#5866\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5866\fP>\X'tty: link'), executing lots
of commands (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5905'\fI\%#5905\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5905\fP>\X'tty: link'), importing history from bash (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6295'\fI\%#6295\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6295\fP>\X'tty: link'), and when
completing variables that might match \fB$history\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6288'\fI\%#6288\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6288\fP>\X'tty: link').
.UNINDENT
.SS Syntax changes and new commands
.INDENT 0.0
.IP \(bu 2
A new builtin command, \fBtime\fP, which allows timing of fish
functions and builtins as well as external commands (\X'tty: link https://github.com/fish-shell/fish-shell/issues/117'\fI\%#117\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/117\fP>\X'tty: link').
.IP \(bu 2
Brace expansion now only takes place if the braces include a “,” or a
variable expansion, meaning common commands such as
\fBgit reset HEAD@{0}\fP do not require escaping (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5869'\fI\%#5869\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5869\fP>\X'tty: link').
.IP \(bu 2
New redirections \fB&>\fP and \fB&|\fP may be used to redirect or pipe
stdout, and also redirect stderr to stdout (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6192'\fI\%#6192\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6192\fP>\X'tty: link').
.IP \(bu 2
\fBswitch\fP now allows arguments that expand to nothing, like empty
variables (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5677'\fI\%#5677\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5677\fP>\X'tty: link').
.IP \(bu 2
The \fBVAR=val cmd\fP syntax can now be used to run a command in a
modified environment (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6287'\fI\%#6287\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6287\fP>\X'tty: link').
.IP \(bu 2
\fBand\fP is no longer recognised as a command, so that nonsensical
constructs like \fBand and and\fP produce a syntax error (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6089'\fI\%#6089\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6089\fP>\X'tty: link').
.IP \(bu 2
\fBmath\fP‘s exponent operator,’\fB^\fP‘, was previously
left\-associative, but now uses the more commonly\-used
right\-associative behaviour (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6280'\fI\%#6280\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6280\fP>\X'tty: link'). This means that
\fBmath \(aq3^0.5^2\(aq\fP was previously calculated as’(3\s-2\u0.5)\d\s02’,
but is now calculated as ‘3\s-2\u(0.5\d\s02)’.
.IP \(bu 2
In fish 3.0, the variable used with \fBfor\fP loops inside command
substitutions could leak into enclosing scopes; this was an
inadvertent behaviour change and has been reverted (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6480'\fI\%#6480\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6480\fP>\X'tty: link').
.UNINDENT
.SS Scripting improvements
.INDENT 0.0
.IP \(bu 2
\fBstring split0\fP now returns 0 if it split something (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5701'\fI\%#5701\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5701\fP>\X'tty: link').
.IP \(bu 2
In the interest of consistency, \fBbuiltin \-q\fP and \fBcommand \-q\fP can
now be used to query if a builtin or command exists (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5631'\fI\%#5631\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5631\fP>\X'tty: link').
.IP \(bu 2
\fBmath\fP now accepts \fB\-\-scale=max\fP for the maximum scale (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5579'\fI\%#5579\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5579\fP>\X'tty: link').
.IP \(bu 2
\fBbuiltin $var\fP now works correctly, allowing a variable as the
builtin name (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5639'\fI\%#5639\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5639\fP>\X'tty: link').
.IP \(bu 2
\fBcd\fP understands the \fB\-\-\fP argument to make it possible to change
to directories starting with a hyphen (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6071'\fI\%#6071\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6071\fP>\X'tty: link').
.IP \(bu 2
\fBcomplete \-\-do\-complete\fP now also does fuzzy matches (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5467'\fI\%#5467\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5467\fP>\X'tty: link').
.IP \(bu 2
\fBcomplete \-\-do\-complete\fP can be used inside completions, allowing
limited recursion (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3474'\fI\%#3474\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3474\fP>\X'tty: link').
.IP \(bu 2
\fBcount\fP now also counts lines fed on standard input (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5744'\fI\%#5744\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5744\fP>\X'tty: link').
.IP \(bu 2
\fBeval\fP produces an exit status of 0 when given no arguments, like
other shells (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5692'\fI\%#5692\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5692\fP>\X'tty: link').
.IP \(bu 2
\fBprintf\fP prints what it can when input hasn’t been fully converted
to a number, but still prints an error (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5532'\fI\%#5532\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5532\fP>\X'tty: link').
.IP \(bu 2
\fBcomplete \-C foo\fP now works as expected, rather than requiring
\fBcomplete \-Cfoo\fP\&.
.IP \(bu 2
\fBcomplete\fP has a new \fB\-\-force\-files\fP option, to re\-enable file
completions. This allows \fBsudo \-E\fP and \fBpacman \-Qo\fP to complete
correctly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5646'\fI\%#5646\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5646\fP>\X'tty: link').
.IP \(bu 2
\fBargparse\fP now defaults to showing the current function name
(instead of \fBargparse\fP) in its errors, making \fB\-\-name\fP often
superfluous (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5835'\fI\%#5835\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5835\fP>\X'tty: link').
.IP \(bu 2
\fBargparse\fP has a new \fB\-\-ignore\-unknown\fP option to keep
unrecognized options, allowing multiple argparse passes to parse
options (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5367'\fI\%#5367\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5367\fP>\X'tty: link').
.IP \(bu 2
\fBargparse\fP correctly handles flag value validation of options that
only have short names (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5864'\fI\%#5864\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5864\fP>\X'tty: link').
.IP \(bu 2
\fBread \-S\fP (short option of \fB\-\-shell\fP) is recognised correctly
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/5660'\fI\%#5660\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5660\fP>\X'tty: link').
.IP \(bu 2
\fBread\fP understands \fB\-\-list\fP, which acts like \fB\-\-array\fP in
reading all arguments into a list inside a single variable, but is
better named (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5846'\fI\%#5846\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5846\fP>\X'tty: link').
.IP \(bu 2
\fBread\fP has a new option, \fB\-\-tokenize\fP, which splits a string into
variables according to the shell’s tokenization rules, considering
quoting, escaping, and so on (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3823'\fI\%#3823\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3823\fP>\X'tty: link').
.IP \(bu 2
\fBread\fP interacts more correctly with the deprecated \fB$IFS\fP
variable, in particular removing multiple separators when splitting a
variable into a list (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6406'\fI\%#6406\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6406\fP>\X'tty: link'), matching other shells.
.IP \(bu 2
\fBfish_indent\fP now handles semicolons better, including leaving them
in place for \fB; and\fP and \fB; or\fP instead of breaking the line
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/5859'\fI\%#5859\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5859\fP>\X'tty: link').
.IP \(bu 2
\fBfish_indent \-\-write\fP now supports multiple file arguments,
indenting them in turn.
.IP \(bu 2
The default read limit has been increased to 100MiB (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5267'\fI\%#5267\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5267\fP>\X'tty: link').
.IP \(bu 2
\fBmath\fP now also understands \fBx\fP for multiplication, provided it
is followed by whitespace (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5906'\fI\%#5906\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5906\fP>\X'tty: link').
.IP \(bu 2
\fBmath\fP reports the right error when incorrect syntax is used inside
parentheses (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6063'\fI\%#6063\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6063\fP>\X'tty: link'), and warns when unsupported logical operations
are used (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6096'\fI\%#6096\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6096\fP>\X'tty: link').
.IP \(bu 2
\fBfunctions \-\-erase\fP now also prevents fish from autoloading a
function for the first time (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5951'\fI\%#5951\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5951\fP>\X'tty: link').
.IP \(bu 2
\fBjobs \-\-last\fP returns 0 to indicate success when a job is found
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/6104'\fI\%#6104\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6104\fP>\X'tty: link').
.IP \(bu 2
\fBcommandline \-p\fP and \fBcommandline \-j\fP now split on \fB&&\fP and
\fB||\fP in addition to \fB;\fP and \fB&\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6214'\fI\%#6214\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6214\fP>\X'tty: link').
.IP \(bu 2
A bug where \fBstring split\fP would drop empty strings if the output
was only empty strings has been fixed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5987'\fI\%#5987\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5987\fP>\X'tty: link').
.IP \(bu 2
\fBeval\fP no long creates a new local variable scope, but affects
variables in the scope it is called from (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4443'\fI\%#4443\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4443\fP>\X'tty: link'). \fBsource\fP still
creates a new local scope.
.IP \(bu 2
\fBabbr\fP has a new \fB\-\-query\fP option to check for the existence of
an abbreviation.
.IP \(bu 2
Local values for \fBfish_complete_path\fP and \fBfish_function_path\fP
are now ignored; only their global values are respected.
.IP \(bu 2
Syntax error reports now display a marker in the correct position
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/5812'\fI\%#5812\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5812\fP>\X'tty: link').
.IP \(bu 2
Empty universal variables may now be exported (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5992'\fI\%#5992\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5992\fP>\X'tty: link').
.IP \(bu 2
Exported universal variables are no longer imported into the global
scope, preventing shadowing. This makes it easier to change such
variables for all fish sessions and avoids breakage when the value is
a list of multiple elements (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5258'\fI\%#5258\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5258\fP>\X'tty: link').
.IP \(bu 2
A bug where \fBfor\fP could use invalid variable names has been fixed
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/5800'\fI\%#5800\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5800\fP>\X'tty: link').
.IP \(bu 2
A bug where local variables would not be exported to functions has
been fixed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6153'\fI\%#6153\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6153\fP>\X'tty: link').
.IP \(bu 2
The null command (\fB:\fP) now always exits successfully, rather than
passing through the previous exit status (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6022'\fI\%#6022\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6022\fP>\X'tty: link').
.IP \(bu 2
The output of \fBfunctions FUNCTION\fP matches the declaration of the
function, correctly including comments or blank lines (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5285'\fI\%#5285\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5285\fP>\X'tty: link'), and
correctly includes any \fB\-\-wraps\fP flags (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1625'\fI\%#1625\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1625\fP>\X'tty: link').
.IP \(bu 2
\fBtype\fP supports a new option, \fB\-\-short\fP, which suppress function
expansion (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6403'\fI\%#6403\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6403\fP>\X'tty: link').
.IP \(bu 2
\fBtype \-\-path\fP with a function argument will now output the path to
the file containing the definition of that function, if it exists.
.IP \(bu 2
\fBtype \-\-force\-path\fP with an argument that cannot be found now
correctly outputs nothing, as documented (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6411'\fI\%#6411\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6411\fP>\X'tty: link').
.IP \(bu 2
The \fB$hostname\fP variable is no longer truncated to 32 characters
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/5758'\fI\%#5758\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5758\fP>\X'tty: link').
.IP \(bu 2
Line numbers in function backtraces are calculated correctly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6350'\fI\%#6350\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6350\fP>\X'tty: link').
.IP \(bu 2
A new \fBfish_cancel\fP event is emitted when the command line is
cancelled, which is useful for terminal integration (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5973'\fI\%#5973\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5973\fP>\X'tty: link').
.UNINDENT
.SS Interactive improvements
.INDENT 0.0
.IP \(bu 2
New Base16 color options are available through the Web\-based
configuration (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6504'\fI\%#6504\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6504\fP>\X'tty: link').
.IP \(bu 2
fish only parses \fB/etc/paths\fP on macOS in login shells, matching
the bash implementation (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5637'\fI\%#5637\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5637\fP>\X'tty: link') and avoiding changes to path ordering
in child shells (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5456'\fI\%#5456\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5456\fP>\X'tty: link'). It now ignores blank lines like the bash
implementation (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5809'\fI\%#5809\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5809\fP>\X'tty: link').
.IP \(bu 2
The locale is now reloaded when the \fBLOCPATH\fP variable is changed
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/5815'\fI\%#5815\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5815\fP>\X'tty: link').
.IP \(bu 2
\fBread\fP no longer keeps a history, making it suitable for operations
that shouldn’t end up there, like password entry (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5904'\fI\%#5904\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5904\fP>\X'tty: link').
.IP \(bu 2
\fBdirh\fP outputs its stack in the correct order (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5477'\fI\%#5477\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5477\fP>\X'tty: link'), and behaves
as documented when universal variables are used for its stack
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/5797'\fI\%#5797\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5797\fP>\X'tty: link').
.IP \(bu 2
\fBfunced\fP and the edit\-commandline\-in\-buffer bindings did not work
in fish 3.0 when the \fB$EDITOR\fP variable contained spaces; this has
been corrected (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5625'\fI\%#5625\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5625\fP>\X'tty: link').
.IP \(bu 2
Builtins now pipe their help output to a pager automatically (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6227'\fI\%#6227\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6227\fP>\X'tty: link').
.IP \(bu 2
\fBset_color\fP now colors the \fB\-\-print\-colors\fP output in the
matching colors if it is going to a terminal.
.IP \(bu 2
fish now underlines every valid entered path instead of just the last
one (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5872'\fI\%#5872\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5872\fP>\X'tty: link').
.IP \(bu 2
When syntax highlighting a string with an unclosed quote, only the
quote itself will be shown as an error, instead of the whole
argument.
.IP \(bu 2
Syntax highlighting works correctly with variables as commands
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/5658'\fI\%#5658\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5658\fP>\X'tty: link') and redirections to close file descriptors (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6092'\fI\%#6092\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6092\fP>\X'tty: link').
.IP \(bu 2
\fBhelp\fP works properly on Windows Subsytem for Linux (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5759'\fI\%#5759\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5759\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/6338'\fI\%#6338\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6338\fP>\X'tty: link').
.IP \(bu 2
A bug where \fBdisown\fP could crash the shell has been fixed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5720'\fI\%#5720\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5720\fP>\X'tty: link').
.IP \(bu 2
fish will not autosuggest files ending with \fB~\fP unless there are no
other candidates, as these are generally backup files (\X'tty: link https://github.com/fish-shell/fish-shell/issues/985'\fI\%#985\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/985\fP>\X'tty: link').
.IP \(bu 2
Escape in the pager works correctly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5818'\fI\%#5818\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5818\fP>\X'tty: link').
.IP \(bu 2
Key bindings that call \fBfg\fP no longer leave the terminal in a
broken state (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2114'\fI\%#2114\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2114\fP>\X'tty: link').
.IP \(bu 2
Brackets (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5831'\fI\%#5831\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5831\fP>\X'tty: link') and filenames containing \fB$\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6060'\fI\%#6060\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6060\fP>\X'tty: link') are completed
with appropriate escaping.
.IP \(bu 2
The output of \fBcomplete\fP and \fBfunctions\fP is now colorized in
interactive terminals.
.IP \(bu 2
The Web\-based configuration handles aliases that include single
quotes correctly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6120'\fI\%#6120\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6120\fP>\X'tty: link'), and launches correctly under Termux (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6248'\fI\%#6248\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6248\fP>\X'tty: link')
and OpenBSD (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6522'\fI\%#6522\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6522\fP>\X'tty: link').
.IP \(bu 2
\fBfunction\fP now correctly validates parameters for
\fB\-\-argument\-names\fP as valid variable names (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6147'\fI\%#6147\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6147\fP>\X'tty: link') and correctly
parses options following \fB\-\-argument\-names\fP, as in
“\fB\-\-argument\-names foo \-\-description bar\fP” (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6186'\fI\%#6186\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6186\fP>\X'tty: link').
.IP \(bu 2
History newly imported from bash includes command lines using \fB&&\fP
or \fB||\fP\&.
.IP \(bu 2
The automatic generation of completions from manual pages is better
described in job and process listings, and no longer produces a
warning when exiting fish (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6269'\fI\%#6269\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6269\fP>\X'tty: link').
.IP \(bu 2
In private mode, setting \fB$fish_greeting\fP to an empty string before
starting the private session will prevent the warning about history
not being saved from being printed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6299'\fI\%#6299\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6299\fP>\X'tty: link').
.IP \(bu 2
In the interactive editor, a line break (Enter) inside unclosed
brackets will insert a new line, rather than executing the command
and producing an error (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6316'\fI\%#6316\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6316\fP>\X'tty: link').
.IP \(bu 2
Ctrl\-C always repaints the prompt (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6394'\fI\%#6394\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6394\fP>\X'tty: link').
.IP \(bu 2
When run interactively from another program (such as Python), fish
will correctly start a new process group, like other shells (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5909'\fI\%#5909\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5909\fP>\X'tty: link').
.IP \(bu 2
Job identifiers (for example, for background jobs) are assigned more
logically (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6053'\fI\%#6053\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6053\fP>\X'tty: link').
.IP \(bu 2
A bug where history would appear truncated if an empty command was
executed was fixed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6032'\fI\%#6032\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6032\fP>\X'tty: link').
.UNINDENT
.SS New or improved bindings
.INDENT 0.0
.IP \(bu 2
Pasting strips leading spaces to avoid pasted commands being omitted
from the history (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4327'\fI\%#4327\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4327\fP>\X'tty: link').
.IP \(bu 2
Shift\-Left and Shift\-Right now default to moving backwards and
forwards by one bigword (words separated by whitespace) (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1505'\fI\%#1505\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1505\fP>\X'tty: link').
.IP \(bu 2
The default escape delay (to differentiate between the escape key and
an alt\-combination) has been reduced to 30ms, down from 300ms for the
default mode and 100ms for Vi mode (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3904'\fI\%#3904\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3904\fP>\X'tty: link').
.IP \(bu 2
The \fBforward\-bigword\fP binding now interacts correctly with
autosuggestions (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5336'\fI\%#5336\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5336\fP>\X'tty: link').
.IP \(bu 2
The \fBfish_clipboard_*\fP functions support Wayland by using
\X'tty: link https://github.com/bugaevc/wl-clipboard'\fI\%wl\-clipboard\fP <\fBhttps://github.com/bugaevc/wl-clipboard\fP>\X'tty: link'
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/5450'\fI\%#5450\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5450\fP>\X'tty: link').
.IP \(bu 2
The \fBnextd\fP and \fBprevd\fP functions no longer print “Hit end of
history”, instead using a bell. They correctly store working
directories containing symbolic links (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6395'\fI\%#6395\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6395\fP>\X'tty: link').
.IP \(bu 2
If a \fBfish_mode_prompt\fP function exists, Vi mode will only execute
it on mode\-switch instead of the entire prompt. This should make it
much more responsive with slow prompts (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5783'\fI\%#5783\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5783\fP>\X'tty: link').
.IP \(bu 2
The path\-component bindings (like Ctrl\-w) now also stop at “:” and
“@”, because those are used to denote user and host in commands such
as \fBssh\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5841'\fI\%#5841\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5841\fP>\X'tty: link').
.IP \(bu 2
The NULL character can now be bound via \fBbind \-k nul\fP\&. Terminals
often generate this character via control\-space. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3189'\fI\%#3189\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3189\fP>\X'tty: link').
.IP \(bu 2
A new readline command \fBexpand\-abbr\fP can be used to trigger
abbreviation expansion (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5762'\fI\%#5762\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5762\fP>\X'tty: link').
.IP \(bu 2
A new readline command, \fBdelete\-or\-exit\fP, removes a character to
the right of the cursor or exits the shell if the command line is
empty (moving this functionality out of the \fBdelete\-or\-exit\fP
function).
.IP \(bu 2
The \fBself\-insert\fP readline command will now insert the binding
sequence, if not empty.
.IP \(bu 2
A new binding to prepend \fBsudo\fP, bound to Alt\-S by default (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6140'\fI\%#6140\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6140\fP>\X'tty: link').
.IP \(bu 2
The Alt\-W binding to describe a command should now work better with
multiline prompts (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6110'\fI\%#6110\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6110\fP>\X'tty: link')
.IP \(bu 2
The Alt\-H binding to open a command’s man page now tries to ignore
\fBsudo\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6122'\fI\%#6122\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6122\fP>\X'tty: link').
.IP \(bu 2
A new pair of bind functions, \fBhistory\-prefix\-search\-backward\fP (and
\fBforward\fP), was introduced (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6143'\fI\%#6143\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6143\fP>\X'tty: link').
.IP \(bu 2
Vi mode now supports R to enter replace mode (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6342'\fI\%#6342\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6342\fP>\X'tty: link'), and \fBd0\fP to
delete the current line (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6292'\fI\%#6292\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6292\fP>\X'tty: link').
.IP \(bu 2
In Vi mode, hitting Enter in replace\-one mode no longer erases the
prompt (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6298'\fI\%#6298\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6298\fP>\X'tty: link').
.IP \(bu 2
Selections in Vi mode are inclusive, matching the actual behaviour of
Vi (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5770'\fI\%#5770\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5770\fP>\X'tty: link').
.UNINDENT
.SS Improved prompts
.INDENT 0.0
.IP \(bu 2
The Git prompt in informative mode now shows the number of stashes if
enabled.
.IP \(bu 2
The Git prompt now has an option
(\fB$__fish_git_prompt_use_informative_chars\fP) to use the (more
modern) informative characters without enabling informative mode.
.IP \(bu 2
The default prompt now also features VCS integration and will color
the host if running via SSH (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6375'\fI\%#6375\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6375\fP>\X'tty: link').
.IP \(bu 2
The default and example prompts print the pipe status if an earlier
command in the pipe fails.
.IP \(bu 2
The default and example prompts try to resolve exit statuses to
signal names when appropriate.
.UNINDENT
.SS Improved terminal output
.INDENT 0.0
.IP \(bu 2
New \fBfish_pager_color_\fP options have been added to control more
elements of the pager’s colors (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5524'\fI\%#5524\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5524\fP>\X'tty: link').
.IP \(bu 2
Better detection and support for using fish from various system
consoles, where limited colors and special characters are supported
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/5552'\fI\%#5552\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5552\fP>\X'tty: link').
.IP \(bu 2
fish now tries to guess if the system supports Unicode 9 (and
displays emoji as wide), eliminating the need to set
\fB$fish_emoji_width\fP in most cases (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5722'\fI\%#5722\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5722\fP>\X'tty: link').
.IP \(bu 2
Improvements to the display of wide characters, particularly Korean
characters and emoji (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5583'\fI\%#5583\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5583\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/5729'\fI\%#5729\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5729\fP>\X'tty: link').
.IP \(bu 2
The Vi mode cursor is correctly redrawn when regaining focus under
terminals that report focus (eg tmux) (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4788'\fI\%#4788\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4788\fP>\X'tty: link').
.IP \(bu 2
Variables that control background colors (such as
\fBfish_pager_color_search_match\fP) can now use \fB\-\-reverse\fP\&.
.UNINDENT
.SS Completions
.INDENT 0.0
.IP \(bu 2
Added completions for
.INDENT 2.0
.IP \(bu 2
\fBaws\fP
.IP \(bu 2
\fBbat\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6052'\fI\%#6052\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6052\fP>\X'tty: link')
.IP \(bu 2
\fBbosh\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5700'\fI\%#5700\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5700\fP>\X'tty: link')
.IP \(bu 2
\fBbtrfs\fP
.IP \(bu 2
\fBcamcontrol\fP
.IP \(bu 2
\fBcf\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5700'\fI\%#5700\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5700\fP>\X'tty: link')
.IP \(bu 2
\fBchronyc\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6496'\fI\%#6496\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6496\fP>\X'tty: link')
.IP \(bu 2
\fBcode\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6205'\fI\%#6205\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6205\fP>\X'tty: link')
.IP \(bu 2
\fBcryptsetup\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6488'\fI\%#6488\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6488\fP>\X'tty: link')
.IP \(bu 2
\fBcsc\fP and \fBcsi\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6016'\fI\%#6016\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6016\fP>\X'tty: link')
.IP \(bu 2
\fBcwebp\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6034'\fI\%#6034\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6034\fP>\X'tty: link')
.IP \(bu 2
\fBcygpath\fP and \fBcygstart\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6239'\fI\%#6239\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6239\fP>\X'tty: link')
.IP \(bu 2
\fBepkginfo\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5829'\fI\%#5829\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5829\fP>\X'tty: link')
.IP \(bu 2
\fBffmpeg\fP, \fBffplay\fP, and \fBffprobe\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5922'\fI\%#5922\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5922\fP>\X'tty: link')
.IP \(bu 2
\fBfsharpc\fP and \fBfsharpi\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6016'\fI\%#6016\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6016\fP>\X'tty: link')
.IP \(bu 2
\fBfzf\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6178'\fI\%#6178\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6178\fP>\X'tty: link')
.IP \(bu 2
\fBg++\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6217'\fI\%#6217\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6217\fP>\X'tty: link')
.IP \(bu 2
\fBgpg1\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6139'\fI\%#6139\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6139\fP>\X'tty: link')
.IP \(bu 2
\fBgpg2\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6062'\fI\%#6062\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6062\fP>\X'tty: link')
.IP \(bu 2
\fBgrub\-mkrescue\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6182'\fI\%#6182\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6182\fP>\X'tty: link')
.IP \(bu 2
\fBhledger\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6043'\fI\%#6043\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6043\fP>\X'tty: link')
.IP \(bu 2
\fBhwinfo\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6496'\fI\%#6496\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6496\fP>\X'tty: link')
.IP \(bu 2
\fBirb\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6260'\fI\%#6260\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6260\fP>\X'tty: link')
.IP \(bu 2
\fBiw\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6232'\fI\%#6232\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6232\fP>\X'tty: link')
.IP \(bu 2
\fBkak\fP
.IP \(bu 2
\fBkeepassxc\-cli\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6505'\fI\%#6505\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6505\fP>\X'tty: link')
.IP \(bu 2
\fBkeybase\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6410'\fI\%#6410\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6410\fP>\X'tty: link')
.IP \(bu 2
\fBloginctl\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6501'\fI\%#6501\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6501\fP>\X'tty: link')
.IP \(bu 2
\fBlz4\fP, \fBlz4c\fP and \fBlz4cat\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6364'\fI\%#6364\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6364\fP>\X'tty: link')
.IP \(bu 2
\fBmariner\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5718'\fI\%#5718\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5718\fP>\X'tty: link')
.IP \(bu 2
\fBnethack\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6240'\fI\%#6240\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6240\fP>\X'tty: link')
.IP \(bu 2
\fBpatool\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6083'\fI\%#6083\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6083\fP>\X'tty: link')
.IP \(bu 2
\fBphpunit\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6197'\fI\%#6197\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6197\fP>\X'tty: link')
.IP \(bu 2
\fBplutil\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6301'\fI\%#6301\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6301\fP>\X'tty: link')
.IP \(bu 2
\fBpzstd\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6364'\fI\%#6364\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6364\fP>\X'tty: link')
.IP \(bu 2
\fBqubes\-gpg\-client\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6067'\fI\%#6067\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6067\fP>\X'tty: link')
.IP \(bu 2
\fBresolvectl\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6501'\fI\%#6501\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6501\fP>\X'tty: link')
.IP \(bu 2
\fBrg\fP
.IP \(bu 2
\fBrustup\fP
.IP \(bu 2
\fBsfdx\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6149'\fI\%#6149\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6149\fP>\X'tty: link')
.IP \(bu 2
\fBspeedtest\fP and \fBspeedtest\-cli\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5840'\fI\%#5840\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5840\fP>\X'tty: link')
.IP \(bu 2
\fBsrc\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6026'\fI\%#6026\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6026\fP>\X'tty: link')
.IP \(bu 2
\fBtokei\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6085'\fI\%#6085\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6085\fP>\X'tty: link')
.IP \(bu 2
\fBtsc\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6016'\fI\%#6016\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6016\fP>\X'tty: link')
.IP \(bu 2
\fBunlz4\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6364'\fI\%#6364\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6364\fP>\X'tty: link')
.IP \(bu 2
\fBunzstd\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6364'\fI\%#6364\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6364\fP>\X'tty: link')
.IP \(bu 2
\fBvbc\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6016'\fI\%#6016\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6016\fP>\X'tty: link')
.IP \(bu 2
\fBzpaq\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6245'\fI\%#6245\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6245\fP>\X'tty: link')
.IP \(bu 2
\fBzstd\fP, \fBzstdcat\fP, \fBzstdgrep\fP, \fBzstdless\fP and \fBzstdmt\fP
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/6364'\fI\%#6364\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6364\fP>\X'tty: link')
.UNINDENT
.IP \(bu 2
Lots of improvements to completions.
.IP \(bu 2
Selecting short options which also have a long name from the
completion pager is possible (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5634'\fI\%#5634\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5634\fP>\X'tty: link').
.IP \(bu 2
Tab completion will no longer add trailing spaces if they already
exist (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6107'\fI\%#6107\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6107\fP>\X'tty: link').
.IP \(bu 2
Completion of subcommands to builtins like \fBand\fP or \fBnot\fP now
works correctly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6249'\fI\%#6249\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6249\fP>\X'tty: link').
.IP \(bu 2
Completion of arguments to short options works correctly when
multiple short options are used together (\X'tty: link https://github.com/fish-shell/fish-shell/issues/332'\fI\%#332\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/332\fP>\X'tty: link').
.IP \(bu 2
Activating completion in the middle of an invalid completion does not
move the cursor any more, making it easier to fix a mistake (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4124'\fI\%#4124\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4124\fP>\X'tty: link').
.IP \(bu 2
Completion in empty commandlines now lists all available commands.
.IP \(bu 2
Functions listed as completions could previously leak parts of the
function as other completions; this has been fixed.
.UNINDENT
.SS Deprecations and removed features
.INDENT 0.0
.IP \(bu 2
The vcs\-prompt functions have been promoted to names without
double\-underscore, so __fish_git_prompt is now fish_git_prompt,
__fish_vcs_prompt is now fish_vcs_prompt, __fish_hg_prompt is now
fish_hg_prompt and __fish_svn_prompt is now fish_svn_prompt. Shims
at the old names have been added, and the variables have kept their
old names (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5586'\fI\%#5586\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5586\fP>\X'tty: link').
.IP \(bu 2
\fBstring replace\fP has an additional round of escaping in the
replacement expression, so escaping backslashes requires many escapes
(eg \fBstring replace \-ra \(aq([ab])\(aq \(aq\e\e\e\e\e\e\e$1\(aq a\fP). The new feature
flag \fBregex\-easyesc\fP can be used to disable this, so that the same
effect can be achieved with
\fBstring replace \-ra \(aq([ab])\(aq \(aq\e\e\e\e$1\(aq a\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5556'\fI\%#5556\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5556\fP>\X'tty: link'). As a reminder,
the intention behind feature flags is that this will eventually
become the default and then only option, so scripts should be
updated.
.IP \(bu 2
The \fBfish_vi_mode\fP function, deprecated in fish 2.3, has been
removed. Use \fBfish_vi_key_bindings\fP instead (\X'tty: link https://github.com/fish-shell/fish-shell/issues/6372'\fI\%#6372\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6372\fP>\X'tty: link').
.UNINDENT
.SS For distributors and developers
.INDENT 0.0
.IP \(bu 2
fish 3.0 introduced a CMake\-based build system. In fish 3.1, both the
Autotools\-based build and legacy Xcode build system have been
removed, leaving only the CMake build system. All distributors and
developers must install CMake.
.IP \(bu 2
fish now depends on the common \fBtee\fP external command, for the
\fBpsub\fP process substitution function.
.IP \(bu 2
The documentation is now built with Sphinx. The old Doxygen\-based
documentation system has been removed. Developers, and distributors
who wish to rebuild the documentation, must install Sphinx.
.IP \(bu 2
The \fBINTERNAL_WCWIDTH\fP build option has been removed, as fish now
always uses an internal \fBwcwidth\fP function. It has a number of
configuration options that make it more suitable for general use
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/5777'\fI\%#5777\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5777\fP>\X'tty: link').
.IP \(bu 2
mandoc can now be used to format the output from \fB\-\-help\fP if
\fBnroff\fP is not installed, reducing the number of external
dependencies on systems with \fBmandoc\fP installed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5489'\fI\%#5489\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5489\fP>\X'tty: link').
.IP \(bu 2
Some bugs preventing building on Solaris\-derived systems such as
Illumos were fixed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5458'\fI\%#5458\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5458\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/5461'\fI\%#5461\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5461\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/5611'\fI\%#5611\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5611\fP>\X'tty: link').
.IP \(bu 2
Completions for \fBnpm\fP, \fBbower\fP and \fByarn\fP no longer require the
\fBjq\fP utility for full functionality, but will use Python instead if
it is available.
.IP \(bu 2
The paths for completions, functions and configuration snippets have
been extended. On systems that define \fBXDG_DATA_DIRS\fP, each of the
directories in this variable are searched in the subdirectories
\fBfish/vendor_completions.d\fP, \fBfish/vendor_functions.d\fP, and
\fBfish/vendor_conf.d\fP respectively. On systems that do not define
this variable in the environment, the vendor directories are searched
for in both the installation prefix and the default “extra”
directory, which now defaults to \fB/usr/local\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5029'\fI\%#5029\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5029\fP>\X'tty: link').
.UNINDENT

.sp
.ce
----

.ce 0
.sp
.SH FISH 3.0.2 (RELEASED FEBRUARY 19, 2019)
.sp
This release of fish fixes an issue discovered in fish 3.0.1.
.SS Fixes and improvements
.INDENT 0.0
.IP \(bu 2
The PWD environment variable is now ignored if it does not resolve to
the true working directory, fixing strange behaviour in terminals
started by editors and IDEs (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5647'\fI\%#5647\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5647\fP>\X'tty: link').
.UNINDENT
.sp
If you are upgrading from version 2.7.1 or before, please also review
the release notes for 3.0.1, 3.0.0 and 3.0b1 (included below).
.SH FISH 3.0.1 (RELEASED FEBRUARY 11, 2019)
.sp
This release of fish fixes a number of major issues discovered in fish
3.0.0.
.SS Fixes and improvements
.INDENT 0.0
.IP \(bu 2
\fBexec\fP does not complain about running foreground jobs when called
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/5449'\fI\%#5449\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5449\fP>\X'tty: link').
.IP \(bu 2
while loops now evaluate to the last executed command in the loop
body (or zero if the body was empty), matching POSIX semantics
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/4982'\fI\%#4982\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4982\fP>\X'tty: link').
.IP \(bu 2
\fBread \-\-silent\fP no longer echoes to the tty when run from a
non\-interactive script (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5519'\fI\%#5519\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5519\fP>\X'tty: link').
.IP \(bu 2
On macOS, path entries with spaces in \fB/etc/paths\fP and
\fB/etc/paths.d\fP now correctly set path entries with spaces.
Likewise, \fBMANPATH\fP is correctly set from \fB/etc/manpaths\fP and
\fB/etc/manpaths.d\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5481'\fI\%#5481\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5481\fP>\X'tty: link').
.IP \(bu 2
fish starts correctly under Cygwin/MSYS2 (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5426'\fI\%#5426\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5426\fP>\X'tty: link').
.IP \(bu 2
The \fBpager\-toggle\-search\fP binding (Ctrl\-S by default) will now
activate the search field, even when the pager is not focused.
.IP \(bu 2
The error when a command is not found is now printed a single time,
instead of once per argument (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5588'\fI\%#5588\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5588\fP>\X'tty: link').
.IP \(bu 2
Fixes and improvements to the git completions, including printing
correct paths with older git versions, fuzzy matching again, reducing
unnecessary offers of root paths (starting with \fB:/\fP) (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5578'\fI\%#5578\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5578\fP>\X'tty: link',
\X'tty: link https://github.com/fish-shell/fish-shell/issues/5574'\fI\%#5574\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5574\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/5476'\fI\%#5476\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5476\fP>\X'tty: link'), and ignoring shell aliases, so enterprising users can
set up the wrapping command (via
\fBset \-g __fish_git_alias_$command $whatitwraps\fP) (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5412'\fI\%#5412\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5412\fP>\X'tty: link').
.IP \(bu 2
Significant performance improvements to core shell functions (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5447'\fI\%#5447\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5447\fP>\X'tty: link')
and to the \fBkill\fP completions (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5541'\fI\%#5541\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5541\fP>\X'tty: link').
.IP \(bu 2
Starting in symbolically\-linked working directories works correctly
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/5525'\fI\%#5525\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5525\fP>\X'tty: link').
.IP \(bu 2
The default \fBfish_title\fP function no longer contains extra spaces
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/5517'\fI\%#5517\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5517\fP>\X'tty: link').
.IP \(bu 2
The \fBnim\fP prompt now works correctly when chosen in the Web\-based
configuration (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5490'\fI\%#5490\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5490\fP>\X'tty: link').
.IP \(bu 2
\fBstring\fP now prints help to stdout, like other builtins (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5495'\fI\%#5495\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5495\fP>\X'tty: link').
.IP \(bu 2
Killing the terminal while fish is in vi normal mode will no longer
send it spinning and eating CPU. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5528'\fI\%#5528\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5528\fP>\X'tty: link')
.IP \(bu 2
A number of crashes have been fixed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5550'\fI\%#5550\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5550\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/5548'\fI\%#5548\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5548\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/5479'\fI\%#5479\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5479\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/5453'\fI\%#5453\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5453\fP>\X'tty: link').
.IP \(bu 2
Improvements to the documentation and certain completions.
.UNINDENT
.SS Known issues
.sp
There is one significant known issue that was not corrected before the
release:
.INDENT 0.0
.IP \(bu 2
fish does not run correctly under Windows Services for Linux before
Windows 10 version 1809/17763, and the message warning of this may
not be displayed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5619'\fI\%#5619\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5619\fP>\X'tty: link').
.UNINDENT
.sp
If you are upgrading from version 2.7.1 or before, please also review
the release notes for 3.0.0 and 3.0b1 (included below).

.sp
.ce
----

.ce 0
.sp
.SH FISH 3.0.0 (RELEASED DECEMBER 28, 2018)
.sp
fish 3 is a major release, which introduces some breaking changes
alongside improved functionality. Although most existing scripts will
continue to work, they should be reviewed against the list contained in
the 3.0b1 release notes below.
.sp
Compared to the beta release of fish 3.0b1, fish version 3.0.0:
.INDENT 0.0
.IP \(bu 2
builds correctly against musl libc (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5407'\fI\%#5407\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5407\fP>\X'tty: link')
.IP \(bu 2
handles huge numeric arguments to \fBtest\fP correctly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5414'\fI\%#5414\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5414\fP>\X'tty: link')
.IP \(bu 2
removes the history colouring introduced in 3.0b1, which did not
always work correctly
.UNINDENT
.sp
There is one significant known issue which was not able to be corrected
before the release:
.INDENT 0.0
.IP \(bu 2
fish 3.0.0 builds on Cygwin (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5423'\fI\%#5423\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5423\fP>\X'tty: link'), but does not run correctly
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/5426'\fI\%#5426\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5426\fP>\X'tty: link') and will result in a hanging terminal when started. Cygwin
users are encouraged to continue using 2.7.1 until a release which
corrects this is available.
.UNINDENT
.sp
If you are upgrading from version 2.7.1 or before, please also review
the release notes for 3.0b1 (included below).

.sp
.ce
----

.ce 0
.sp
.SH FISH 3.0B1 (RELEASED DECEMBER 11, 2018)
.sp
fish 3 is a major release, which introduces some breaking changes
alongside improved functionality. Although most existing scripts will
continue to work, they should be reviewed against the list below.
.SS Notable non\-backward compatible changes
.INDENT 0.0
.IP \(bu 2
Process and job expansion has largely been removed. \fB%\fP will no
longer perform these expansions, except for \fB%self\fP for the PID of
the current shell. Additionally, job management commands (\fBdisown\fP,
\fBwait\fP, \fBbg\fP, \fBfg\fP and \fBkill\fP) will expand job specifiers
starting with \fB%\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4230'\fI\%#4230\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4230\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/1202'\fI\%#1202\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1202\fP>\X'tty: link').
.IP \(bu 2
\fBset x[1] x[2] a b\fP, to set multiple elements of an array at once,
is no longer valid syntax (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4236'\fI\%#4236\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4236\fP>\X'tty: link').
.IP \(bu 2
A literal \fB{}\fP now expands to itself, rather than nothing. This
makes working with \fBfind \-exec\fP easier (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1109'\fI\%#1109\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1109\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/4632'\fI\%#4632\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4632\fP>\X'tty: link').
.IP \(bu 2
Literally accessing a zero\-index is now illegal syntax and is caught
by the parser (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4862'\fI\%#4862\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4862\fP>\X'tty: link'). (fish indices start at 1)
.IP \(bu 2
Successive commas in brace expansions are handled in less surprising
manner. For example, \fB{,,,}\fP expands to four empty strings rather
than an empty string, a comma and an empty string again (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3002'\fI\%#3002\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3002\fP>\X'tty: link',
\X'tty: link https://github.com/fish-shell/fish-shell/issues/4632'\fI\%#4632\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4632\fP>\X'tty: link').
.IP \(bu 2
\fBfor\fP loop control variables are no longer local to the \fBfor\fP
block (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1935'\fI\%#1935\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1935\fP>\X'tty: link').
.IP \(bu 2
Variables set in \fBif\fP and \fBwhile\fP conditions are available
outside the block (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4820'\fI\%#4820\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4820\fP>\X'tty: link').
.IP \(bu 2
Local exported (\fBset \-lx\fP) vars are now visible to functions
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/1091'\fI\%#1091\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1091\fP>\X'tty: link').
.IP \(bu 2
The new \fBmath\fP builtin (see below) does not support logical
expressions; \fBtest\fP should be used instead (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4777'\fI\%#4777\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4777\fP>\X'tty: link').
.IP \(bu 2
Range expansion will now behave sensibly when given a single positive
and negative index (\fB$foo[5..\-1]\fP or \fB$foo[\-1..5]\fP), clamping to
the last valid index without changing direction if the list has fewer
elements than expected.
.IP \(bu 2
\fBread\fP now uses \fB\-s\fP as short for \fB\-\-silent\fP (à la \fBbash\fP);
\fB\-\-shell\fP’s abbreviation (formerly \fB\-s\fP) is now \fB\-S\fP instead
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/4490'\fI\%#4490\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4490\fP>\X'tty: link').
.IP \(bu 2
\fBcd\fP no longer resolves symlinks. fish now maintains a virtual
path, matching other shells (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3350'\fI\%#3350\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3350\fP>\X'tty: link').
.IP \(bu 2
\fBsource\fP now requires an explicit \fB\-\fP as the filename to read
from the terminal (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2633'\fI\%#2633\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2633\fP>\X'tty: link').
.IP \(bu 2
Arguments to \fBend\fP are now errors, instead of being silently
ignored.
.IP \(bu 2
The names \fBargparse\fP, \fBread\fP, \fBset\fP, \fBstatus\fP, \fBtest\fP and
\fB[\fP are now reserved and not allowed as function names. This
prevents users unintentionally breaking stuff (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3000'\fI\%#3000\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3000\fP>\X'tty: link').
.IP \(bu 2
The \fBfish_user_abbreviations\fP variable is no longer used;
abbreviations will be migrated to the new storage format
automatically.
.IP \(bu 2
The \fBFISH_READ_BYTE_LIMIT\fP variable is now called
\fBfish_byte_limit\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4414'\fI\%#4414\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4414\fP>\X'tty: link').
.IP \(bu 2
Environment variables are no longer split into arrays based on the
record separator character on startup. Instead, variables are not
split, unless their name ends in PATH, in which case they are split
on colons (\X'tty: link https://github.com/fish-shell/fish-shell/issues/436'\fI\%#436\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/436\fP>\X'tty: link').
.IP \(bu 2
The \fBhistory\fP builtin’s \fB\-\-with\-time\fP option has been removed;
this has been deprecated in favor of \fB\-\-show\-time\fP since 2.7.0
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/4403'\fI\%#4403\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4403\fP>\X'tty: link').
.IP \(bu 2
The internal variables \fB__fish_datadir\fP and \fB__fish_sysconfdir\fP
are now known as \fB__fish_data_dir\fP and \fB__fish_sysconf_dir\fP
respectively.
.UNINDENT
.SS Deprecations
.sp
With the release of fish 3, a number of features have been marked for
removal in the future. All users are encouraged to explore alternatives.
A small number of these features are currently behind feature flags,
which are turned on at present but may be turned off by default in the
future.
.sp
A new feature flags mechanism is added for staging deprecations and
breaking changes. Feature flags may be specified at launch with
\fBfish \-\-features ...\fP or by setting the universal \fBfish_features\fP
variable. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4940'\fI\%#4940\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4940\fP>\X'tty: link')
.INDENT 0.0
.IP \(bu 2
The use of the \fBIFS\fP variable for \fBread\fP is deprecated; \fBIFS\fP
will be ignored in the future (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4156'\fI\%#4156\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4156\fP>\X'tty: link'). Use the \fBread \-\-delimiter\fP
option instead.
.IP \(bu 2
The \fBfunction \-\-on\-process\-exit\fP switch will be removed in future
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/4700'\fI\%#4700\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4700\fP>\X'tty: link'). Use the \fBfish_exit\fP event instead:
\fBfunction \-\-on\-event fish_exit\fP\&.
.IP \(bu 2
\fB$_\fP is deprecated and will removed in the future (\X'tty: link https://github.com/fish-shell/fish-shell/issues/813'\fI\%#813\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/813\fP>\X'tty: link'). Use
\fBstatus current\-command\fP in a command substitution instead.
.IP \(bu 2
\fB^\fP as a redirection deprecated and will be removed in the future.
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/4394'\fI\%#4394\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4394\fP>\X'tty: link'). Use \fB2>\fP to redirect stderr. This is controlled by the
\fBstderr\-nocaret\fP feature flag.
.IP \(bu 2
\fB?\fP as a glob (wildcard) is deprecated and will be removed in the
future (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4520'\fI\%#4520\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4520\fP>\X'tty: link'). This is controlled by the \fBqmark\-noglob\fP feature
flag.
.UNINDENT
.SS Notable fixes and improvements
.SS Syntax changes and new commands
.INDENT 0.0
.IP \(bu 2
fish now supports \fB&&\fP (like \fBand\fP), \fB||\fP (like \fBor\fP), and
\fB!\fP (like \fBnot\fP), for better migration from POSIX\-compliant
shells (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4620'\fI\%#4620\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4620\fP>\X'tty: link').
.IP \(bu 2
Variables may be used as commands (\X'tty: link https://github.com/fish-shell/fish-shell/issues/154'\fI\%#154\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/154\fP>\X'tty: link').
.IP \(bu 2
fish may be started in private mode via \fBfish \-\-private\fP\&. Private
mode fish sessions do not have access to the history file and any
commands evaluated in private mode are not persisted for future
sessions. A session variable \fB$fish_private_mode\fP can be queried to
detect private mode and adjust the behavior of scripts accordingly to
respect the user’s wish for privacy.
.IP \(bu 2
A new \fBwait\fP command for waiting on backgrounded processes (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4498'\fI\%#4498\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4498\fP>\X'tty: link').
.IP \(bu 2
\fBmath\fP is now a builtin rather than a wrapper around \fBbc\fP
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/3157'\fI\%#3157\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3157\fP>\X'tty: link'). Floating point computations is now used by default, and can
be controlled with the new \fB\-\-scale\fP option (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4478'\fI\%#4478\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4478\fP>\X'tty: link').
.IP \(bu 2
Setting \fB$PATH\fP no longer warns on non\-existent directories,
allowing for a single $PATH to be shared across machines (eg via
dotfiles) (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2969'\fI\%#2969\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2969\fP>\X'tty: link').
.IP \(bu 2
\fBwhile\fP sets \fB$status\fP to a non\-zero value if the loop is not
executed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4982'\fI\%#4982\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4982\fP>\X'tty: link').
.IP \(bu 2
Command substitution output is now limited to 10 MB by default,
controlled by the \fBfish_read_limit\fP variable (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3822'\fI\%#3822\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3822\fP>\X'tty: link'). Notably, this
is larger than most operating systems’ argument size limit, so trying
to pass argument lists this size to external commands has never
worked.
.IP \(bu 2
The machine hostname, where available, is now exposed as the
\fB$hostname\fP reserved variable. This removes the dependency on the
\fBhostname\fP executable (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4422'\fI\%#4422\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4422\fP>\X'tty: link').
.IP \(bu 2
Bare \fBbind\fP invocations in config.fish now work. The
\fBfish_user_key_bindings\fP function is no longer necessary, but will
still be executed if it exists (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5191'\fI\%#5191\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5191\fP>\X'tty: link').
.IP \(bu 2
\fB$fish_pid\fP and \fB$last_pid\fP are available as replacements for
\fB%self\fP and \fB%last\fP\&.
.UNINDENT
.SS New features in commands
.INDENT 0.0
.IP \(bu 2
\fBalias\fP has a new \fB\-\-save\fP option to save the generated function
immediately (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4878'\fI\%#4878\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4878\fP>\X'tty: link').
.IP \(bu 2
\fBbind\fP has a new \fB\-\-silent\fP option to ignore bind requests for
named keys not available under the current terminal (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4188'\fI\%#4188\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4188\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/4431'\fI\%#4431\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4431\fP>\X'tty: link').
.IP \(bu 2
\fBcomplete\fP has a new \fB\-\-keep\-order\fP option to show the provided
or dynamically\-generated argument list in the same order as
specified, rather than alphabetically (\X'tty: link https://github.com/fish-shell/fish-shell/issues/361'\fI\%#361\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/361\fP>\X'tty: link').
.IP \(bu 2
\fBexec\fP prompts for confirmation if background jobs are running.
.IP \(bu 2
\fBfunced\fP has a new \fB\-\-save\fP option to automatically save the
edited function after successfully editing (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4668'\fI\%#4668\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4668\fP>\X'tty: link').
.IP \(bu 2
\fBfunctions\fP has a new \fB\-\-handlers\fP option to show functions
registered as event handlers (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4694'\fI\%#4694\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4694\fP>\X'tty: link').
.IP \(bu 2
\fBhistory search\fP supports globs for wildcard searching (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3136'\fI\%#3136\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3136\fP>\X'tty: link') and
has a new \fB\-\-reverse\fP option to show entries from oldest to newest
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/4375'\fI\%#4375\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4375\fP>\X'tty: link').
.IP \(bu 2
\fBjobs\fP has a new \fB\-\-quiet\fP option to silence the output.
.IP \(bu 2
\fBread\fP has a new \fB\-\-delimiter\fP option for splitting input into
arrays (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4256'\fI\%#4256\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4256\fP>\X'tty: link').
.IP \(bu 2
\fBread\fP writes directly to stdout if called without arguments
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/4407'\fI\%#4407\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4407\fP>\X'tty: link').
.IP \(bu 2
\fBread\fP can now read individual lines into separate variables
without consuming the input in its entirety via the new \fB/\-\-line\fP
option.
.IP \(bu 2
\fBset\fP has new \fB\-\-append\fP and \fB\-\-prepend\fP options (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1326'\fI\%#1326\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1326\fP>\X'tty: link').
.IP \(bu 2
\fBstring match\fP with an empty pattern and \fB\-\-entire\fP in glob mode
now matches everything instead of nothing (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4971'\fI\%#4971\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4971\fP>\X'tty: link').
.IP \(bu 2
\fBstring split\fP supports a new \fB\-\-no\-empty\fP option to exclude
empty strings from the result (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4779'\fI\%#4779\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4779\fP>\X'tty: link').
.IP \(bu 2
\fBstring\fP has new subcommands \fBsplit0\fP and \fBjoin0\fP for working
with NUL\-delimited output.
.IP \(bu 2
\fBstring\fP no longer stops processing text after NUL characters
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/4605'\fI\%#4605\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4605\fP>\X'tty: link')
.IP \(bu 2
\fBstring escape\fP has a new \fB\-\-style regex\fP option for escaping
strings to be matched literally in \fBstring\fP regex operations.
.IP \(bu 2
\fBtest\fP now supports floating point values in numeric comparisons.
.UNINDENT
.SS Interactive improvements
.INDENT 0.0
.IP \(bu 2
A pipe at the end of a line now allows the job to continue on the
next line (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1285'\fI\%#1285\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1285\fP>\X'tty: link').
.IP \(bu 2
Italics and dim support out of the box on macOS for Terminal.app and
iTerm (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4436'\fI\%#4436\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4436\fP>\X'tty: link').
.IP \(bu 2
\fBcd\fP tab completions no longer descend into the deepest unambiguous
path (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4649'\fI\%#4649\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4649\fP>\X'tty: link').
.IP \(bu 2
Pager navigation has been improved. Most notably, moving down now
wraps around, moving up from the commandline now jumps to the last
element and moving right and left now reverse each other even when
wrapping around (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4680'\fI\%#4680\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4680\fP>\X'tty: link').
.IP \(bu 2
Typing normal characters while the completion pager is active no
longer shows the search field. Instead it enters them into the
command line, and ends paging (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2249'\fI\%#2249\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2249\fP>\X'tty: link').
.IP \(bu 2
A new input binding \fBpager\-toggle\-search\fP toggles the search field
in the completions pager on and off. By default, this is bound to
Ctrl\-S.
.IP \(bu 2
Searching in the pager now does a full fuzzy search (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5213'\fI\%#5213\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5213\fP>\X'tty: link').
.IP \(bu 2
The pager will now show the full command instead of just its last
line if the number of completions is large (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4702'\fI\%#4702\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4702\fP>\X'tty: link').
.IP \(bu 2
Abbreviations can be tab\-completed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3233'\fI\%#3233\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3233\fP>\X'tty: link').
.IP \(bu 2
Tildes in file names are now properly escaped in completions (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2274'\fI\%#2274\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2274\fP>\X'tty: link').
.IP \(bu 2
Wrapping completions (from \fBcomplete \-\-wraps\fP or
\fBfunction \-\-wraps\fP) can now inject arguments. For example,
\fBcomplete gco \-\-wraps \(aqgit checkout\(aq\fP now works properly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1976'\fI\%#1976\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1976\fP>\X'tty: link').
The \fBalias\fP function has been updated to respect this behavior.
.IP \(bu 2
Path completions now support expansions, meaning expressions like
\fBpython ~/<TAB>\fP now provides file suggestions just like any other
relative or absolute path. (This includes support for other
expansions, too.)
.IP \(bu 2
Autosuggestions try to avoid arguments that are already present in
the command line.
.IP \(bu 2
Notifications about crashed processes are now always shown, even in
command substitutions (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4962'\fI\%#4962\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4962\fP>\X'tty: link').
.IP \(bu 2
The screen is no longer reset after a BEL, fixing graphical glitches
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/3693'\fI\%#3693\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3693\fP>\X'tty: link').
.IP \(bu 2
vi\-mode now supports ‘;’ and ‘,’ motions. This introduces new
{forward,backward}\-jump\-till and repeat\-jump{,\-reverse} bind
functions (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5140'\fI\%#5140\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5140\fP>\X'tty: link').
.IP \(bu 2
The \fB*y\fP vi\-mode binding now works (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5100'\fI\%#5100\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5100\fP>\X'tty: link').
.IP \(bu 2
True color is now enabled in neovim by default (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2792'\fI\%#2792\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2792\fP>\X'tty: link').
.IP \(bu 2
Terminal size variables (\fB$COLUMNS\fP/\fB$LINES\fP) are now updated
before \fBfish_prompt\fP is called, allowing the prompt to react
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/904'\fI\%#904\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/904\fP>\X'tty: link').
.IP \(bu 2
Multi\-line prompts no longer repeat when the terminal is resized
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/2320'\fI\%#2320\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2320\fP>\X'tty: link').
.IP \(bu 2
\fBxclip\fP support has been added to the clipboard integration
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/5020'\fI\%#5020\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5020\fP>\X'tty: link').
.IP \(bu 2
The Alt\-P keybinding paginates the last command if the command line
is empty.
.IP \(bu 2
\fB$cmd_duration\fP is no longer reset when no command is executed
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/5011'\fI\%#5011\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5011\fP>\X'tty: link').
.IP \(bu 2
Deleting a one\-character word no longer erases the next word as well
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/4747'\fI\%#4747\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4747\fP>\X'tty: link').
.IP \(bu 2
Token history search (Alt\-Up) omits duplicate entries (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4795'\fI\%#4795\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4795\fP>\X'tty: link').
.IP \(bu 2
The \fBfish_escape_delay_ms\fP timeout, allowing the use of the escape
key both on its own and as part of a control sequence, was applied to
all control characters; this has been reduced to just the escape key.
.IP \(bu 2
Completing a function shows the description properly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5206'\fI\%#5206\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5206\fP>\X'tty: link').
.IP \(bu 2
\fBcommandline\fP can now be used to set the commandline for the next command, restoring a behavior in 3.4.1 (\X'tty: link https://github.com/fish-shell/fish-shell/issues/8807'\fI\%#8807\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/8807\fP>\X'tty: link').
.IP \(bu 2
Added completions for
.INDENT 2.0
.IP \(bu 2
\fBansible\fP, including \fBansible\-galaxy\fP, \fBansible\-playbook\fP
and \fBansible\-vault\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4697'\fI\%#4697\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4697\fP>\X'tty: link')
.IP \(bu 2
\fBbb\-power\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4800'\fI\%#4800\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4800\fP>\X'tty: link')
.IP \(bu 2
\fBbd\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4472'\fI\%#4472\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4472\fP>\X'tty: link')
.IP \(bu 2
\fBbower\fP
.IP \(bu 2
\fBclang\fP and \fBclang++\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4174'\fI\%#4174\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4174\fP>\X'tty: link')
.IP \(bu 2
\fBconda\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4837'\fI\%#4837\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4837\fP>\X'tty: link')
.IP \(bu 2
\fBconfigure\fP (for autoconf\-generated files only)
.IP \(bu 2
\fBcurl\fP
.IP \(bu 2
\fBdoas\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5196'\fI\%#5196\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5196\fP>\X'tty: link')
.IP \(bu 2
\fBebuild\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4911'\fI\%#4911\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4911\fP>\X'tty: link')
.IP \(bu 2
\fBemaint\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4758'\fI\%#4758\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4758\fP>\X'tty: link')
.IP \(bu 2
\fBeopkg\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4600'\fI\%#4600\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4600\fP>\X'tty: link')
.IP \(bu 2
\fBexercism\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4495'\fI\%#4495\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4495\fP>\X'tty: link')
.IP \(bu 2
\fBhjson\fP
.IP \(bu 2
\fBhugo\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4529'\fI\%#4529\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4529\fP>\X'tty: link')
.IP \(bu 2
\fBj\fP (from autojump \X'tty: link https://github.com/fish-shell/fish-shell/issues/4344'\fI\%#4344\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4344\fP>\X'tty: link')
.IP \(bu 2
\fBjbake\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4814'\fI\%#4814\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4814\fP>\X'tty: link')
.IP \(bu 2
\fBjhipster\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4472'\fI\%#4472\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4472\fP>\X'tty: link')
.IP \(bu 2
\fBkitty\fP
.IP \(bu 2
\fBkldload\fP
.IP \(bu 2
\fBkldunload\fP
.IP \(bu 2
\fBmakensis\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5242'\fI\%#5242\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5242\fP>\X'tty: link')
.IP \(bu 2
\fBmeson\fP
.IP \(bu 2
\fBmkdocs\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4906'\fI\%#4906\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4906\fP>\X'tty: link')
.IP \(bu 2
\fBngrok\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4642'\fI\%#4642\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4642\fP>\X'tty: link')
.IP \(bu 2
OpenBSD’s \fBpkg_add\fP, \fBpkg_delete\fP, \fBpkg_info\fP, \fBpfctl\fP,
\fBrcctl\fP, \fBsignify\fP, and \fBvmctl\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4584'\fI\%#4584\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4584\fP>\X'tty: link')
.IP \(bu 2
\fBopenocd\fP
.IP \(bu 2
\fBoptipng\fP
.IP \(bu 2
\fBopkg\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5168'\fI\%#5168\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5168\fP>\X'tty: link')
.IP \(bu 2
\fBpandoc\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2937'\fI\%#2937\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2937\fP>\X'tty: link')
.IP \(bu 2
\fBport\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4737'\fI\%#4737\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4737\fP>\X'tty: link')
.IP \(bu 2
\fBpowerpill\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4800'\fI\%#4800\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4800\fP>\X'tty: link')
.IP \(bu 2
\fBpstack\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5135'\fI\%#5135\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5135\fP>\X'tty: link')
.IP \(bu 2
\fBserve\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5026'\fI\%#5026\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5026\fP>\X'tty: link')
.IP \(bu 2
\fBttx\fP
.IP \(bu 2
\fBunzip\fP
.IP \(bu 2
\fBvirsh\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5113'\fI\%#5113\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5113\fP>\X'tty: link')
.IP \(bu 2
\fBxclip\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5126'\fI\%#5126\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5126\fP>\X'tty: link')
.IP \(bu 2
\fBxsv\fP
.IP \(bu 2
\fBzfs\fP and \fBzpool\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4608'\fI\%#4608\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4608\fP>\X'tty: link')
.UNINDENT
.IP \(bu 2
Lots of improvements to completions (especially \fBdarcs\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5112'\fI\%#5112\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5112\fP>\X'tty: link'),
\fBgit\fP, \fBhg\fP and \fBsudo\fP).
.IP \(bu 2
Completions for \fByarn\fP and \fBnpm\fP now require the
\fBall\-the\-package\-names\fP NPM package for full functionality.
.IP \(bu 2
Completions for \fBbower\fP and \fByarn\fP now require the \fBjq\fP utility
for full functionality.
.IP \(bu 2
Improved French translations.
.UNINDENT
.SS Other fixes and improvements
.INDENT 0.0
.IP \(bu 2
Significant performance improvements to \fBabbr\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4048'\fI\%#4048\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4048\fP>\X'tty: link'), setting
variables (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4200'\fI\%#4200\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4200\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/4341'\fI\%#4341\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4341\fP>\X'tty: link'), executing functions, globs (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4579'\fI\%#4579\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4579\fP>\X'tty: link'),
\fBstring\fP reading from standard input (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4610'\fI\%#4610\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4610\fP>\X'tty: link'), and slicing history
(in particular, \fB$history[1]\fP for the last executed command).
.IP \(bu 2
Fish’s internal wcwidth function has been updated to deal with newer
Unicode, and the width of some characters can be configured via the
\fBfish_ambiguous_width\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5149'\fI\%#5149\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5149\fP>\X'tty: link') and \fBfish_emoji_width\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2652'\fI\%#2652\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2652\fP>\X'tty: link')
variables. Alternatively, a new build\-time option INTERNAL_WCWIDTH
can be used to use the system’s wcwidth instead (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4816'\fI\%#4816\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4816\fP>\X'tty: link').
.IP \(bu 2
\fBfunctions\fP correctly supports \fB\-d\fP as the short form of
\fB\-\-description\fP\&. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/5105'\fI\%#5105\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5105\fP>\X'tty: link')
.IP \(bu 2
\fB/etc/paths\fP is now parsed like macOS’ bash \fBpath_helper\fP, fixing
$PATH order (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4336'\fI\%#4336\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4336\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/4852'\fI\%#4852\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4852\fP>\X'tty: link') on macOS.
.IP \(bu 2
Using a read\-only variable in a \fBfor\fP loop produces an error,
rather than silently producing incorrect results (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4342'\fI\%#4342\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4342\fP>\X'tty: link').
.IP \(bu 2
The universal variables filename no longer contains the hostname or
MAC address. It is now at the fixed location
\fB\&.config/fish/fish_variables\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1912'\fI\%#1912\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1912\fP>\X'tty: link').
.IP \(bu 2
Exported variables in the global or universal scope no longer have
their exported status affected by local variables (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2611'\fI\%#2611\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2611\fP>\X'tty: link').
.IP \(bu 2
Major rework of terminal and job handling to eliminate bugs (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3805'\fI\%#3805\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3805\fP>\X'tty: link',
\X'tty: link https://github.com/fish-shell/fish-shell/issues/3952'\fI\%#3952\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3952\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/4178'\fI\%#4178\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4178\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/4235'\fI\%#4235\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4235\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/4238'\fI\%#4238\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4238\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/4540'\fI\%#4540\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4540\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/4929'\fI\%#4929\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4929\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/5210'\fI\%#5210\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5210\fP>\X'tty: link').
.IP \(bu 2
Improvements to the manual page completion generator (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2937'\fI\%#2937\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2937\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/4313'\fI\%#4313\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4313\fP>\X'tty: link').
.IP \(bu 2
\fBsuspend \-\-force\fP now works correctly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4672'\fI\%#4672\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4672\fP>\X'tty: link').
.IP \(bu 2
Pressing Ctrl\-C while running a script now reliably terminates fish
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/5253'\fI\%#5253\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/5253\fP>\X'tty: link').
.UNINDENT
.SS For distributors and developers
.INDENT 0.0
.IP \(bu 2
fish ships with a new build system based on CMake. CMake 3.2 is the
minimum required version. Although the autotools\-based Makefile and
the Xcode project are still shipped with this release, they will be
removed in the near future. All distributors and developers are
encouraged to migrate to the CMake build.
.IP \(bu 2
Build scripts for most platforms no longer require bash, using the
standard sh instead.
.IP \(bu 2
The \fBhostname\fP command is no longer required for fish to operate.
.UNINDENT
.sp
–
.SH FISH 2.7.1 (RELEASED DECEMBER 23, 2017)
.sp
This release of fish fixes an issue where iTerm 2 on macOS would display
a warning about paste bracketing being left on when starting a new fish
session (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4521'\fI\%#4521\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4521\fP>\X'tty: link').
.sp
If you are upgrading from version 2.6.0 or before, please also review
the release notes for 2.7.0 and 2.7b1 (included below).
.sp
–
.SH FISH 2.7.0 (RELEASED NOVEMBER 23, 2017)
.sp
There are no major changes between 2.7b1 and 2.7.0. If you are upgrading
from version 2.6.0 or before, please also review the release notes for
2.7b1 (included below).
.sp
Xcode builds and macOS packages could not be produced with 2.7b1, but
this is fixed in 2.7.0.
.sp
–
.SH FISH 2.7B1 (RELEASED OCTOBER 31, 2017)
.SS Notable improvements
.INDENT 0.0
.IP \(bu 2
A new \fBcdh\fP (change directory using recent history) command
provides a more friendly alternative to prevd/nextd and pushd/popd
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/2847'\fI\%#2847\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2847\fP>\X'tty: link').
.IP \(bu 2
A new \fBargparse\fP command is available to allow fish script to parse
arguments with the same behavior as builtin commands. This also
includes the \fBfish_opt\fP helper command. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4190'\fI\%#4190\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4190\fP>\X'tty: link').
.IP \(bu 2
Invalid array indexes are now silently ignored (\X'tty: link https://github.com/fish-shell/fish-shell/issues/826'\fI\%#826\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/826\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/4127'\fI\%#4127\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4127\fP>\X'tty: link').
.IP \(bu 2
Improvements to the debugging facility, including a prompt specific
to the debugger (\fBfish_breakpoint_prompt\fP) and a
\fBstatus is\-breakpoint\fP subcommand (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1310'\fI\%#1310\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1310\fP>\X'tty: link').
.IP \(bu 2
\fBstring\fP supports new \fBlower\fP and \fBupper\fP subcommands, for
altering the case of strings (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4080'\fI\%#4080\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4080\fP>\X'tty: link'). The case changing is not
locale\-aware yet.\- \fBstring escape\fP has a new \fB\-\-style=xxx\fP flag
where \fBxxx\fP can be \fBscript\fP, \fBvar\fP, or \fBurl\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4150'\fI\%#4150\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4150\fP>\X'tty: link'), and can
be reversed with \fBstring unescape\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3543'\fI\%#3543\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3543\fP>\X'tty: link').
.IP \(bu 2
History can now be split into sessions with the \fBfish_history\fP
variable, or not saved to disk at all (\X'tty: link https://github.com/fish-shell/fish-shell/issues/102'\fI\%#102\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/102\fP>\X'tty: link').
.IP \(bu 2
Read history is now controlled by the \fBfish_history\fP variable
rather than the \fB\-\-mode\-name\fP flag (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1504'\fI\%#1504\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1504\fP>\X'tty: link').
.IP \(bu 2
\fBcommand\fP now supports an \fB\-\-all\fP flag to report all directories
with the command. \fBwhich\fP is no longer a runtime dependency
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/2778'\fI\%#2778\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2778\fP>\X'tty: link').
.IP \(bu 2
fish can run commands before starting an interactive session using
the new \fB\-\-init\-command\fP/\fB\-C\fP options (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4164'\fI\%#4164\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4164\fP>\X'tty: link').
.IP \(bu 2
\fBset\fP has a new \fB\-\-show\fP option to show lots of information about
variables (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4265'\fI\%#4265\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4265\fP>\X'tty: link').
.UNINDENT
.SS Other significant changes
.INDENT 0.0
.IP \(bu 2
The \fBCOLUMNS\fP and \fBLINES\fP environment variables are now correctly
set the first time \fBfish_prompt\fP is run (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4141'\fI\%#4141\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4141\fP>\X'tty: link').
.IP \(bu 2
\fBcomplete\fP’s \fB\-\-no\-files\fP option works as intended (\X'tty: link https://github.com/fish-shell/fish-shell/issues/112'\fI\%#112\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/112\fP>\X'tty: link').
.IP \(bu 2
\fBecho \-h\fP now correctly echoes \fB\-h\fP in line with other shells
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/4120'\fI\%#4120\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4120\fP>\X'tty: link').
.IP \(bu 2
The \fBexport\fP compatibility function now returns zero on success,
rather than always returning 1 (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4435'\fI\%#4435\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4435\fP>\X'tty: link').
.IP \(bu 2
Stop converting empty elements in MANPATH to “.” (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4158'\fI\%#4158\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4158\fP>\X'tty: link'). The
behavior being changed was introduced in fish 2.6.0.
.IP \(bu 2
\fBcount \-h\fP and \fBcount \-\-help\fP now return 1 rather than produce
command help output (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4189'\fI\%#4189\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4189\fP>\X'tty: link').
.IP \(bu 2
An attempt to \fBread\fP which stops because too much data is available
still defines the variables given as parameters (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4180'\fI\%#4180\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4180\fP>\X'tty: link').
.IP \(bu 2
A regression in fish 2.4.0 which prevented \fBpushd +1\fP from working
has been fixed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4091'\fI\%#4091\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4091\fP>\X'tty: link').
.IP \(bu 2
A regression in fish 2.6.0 where multiple \fBread\fP commands in
non\-interactive scripts were broken has been fixed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4206'\fI\%#4206\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4206\fP>\X'tty: link').
.IP \(bu 2
A regression in fish 2.6.0 involving universal variables with
side\-effects at startup such as \fBset \-U fish_escape_delay_ms 10\fP
has been fixed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4196'\fI\%#4196\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4196\fP>\X'tty: link').
.IP \(bu 2
Added completions for:
.INDENT 2.0
.IP \(bu 2
\fBas\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4130'\fI\%#4130\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4130\fP>\X'tty: link')
.IP \(bu 2
\fBcdh\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2847'\fI\%#2847\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2847\fP>\X'tty: link')
.IP \(bu 2
\fBdhcpd\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4115'\fI\%#4115\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4115\fP>\X'tty: link')
.IP \(bu 2
\fBezjail\-admin\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4324'\fI\%#4324\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4324\fP>\X'tty: link')
.IP \(bu 2
Fabric’s \fBfab\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4153'\fI\%#4153\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4153\fP>\X'tty: link')
.IP \(bu 2
\fBgrub\-file\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4119'\fI\%#4119\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4119\fP>\X'tty: link')
.IP \(bu 2
\fBgrub\-install\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4119'\fI\%#4119\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4119\fP>\X'tty: link')
.IP \(bu 2
\fBjest\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4142'\fI\%#4142\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4142\fP>\X'tty: link')
.IP \(bu 2
\fBkdeconnect\-cli\fP
.IP \(bu 2
\fBmagneto\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4043'\fI\%#4043\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4043\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/4108'\fI\%#4108\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4108\fP>\X'tty: link')
.IP \(bu 2
\fBmdadm\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4198'\fI\%#4198\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4198\fP>\X'tty: link')
.IP \(bu 2
\fBpasswd\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4209'\fI\%#4209\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4209\fP>\X'tty: link')
.IP \(bu 2
\fBpip\fP and \fBpipenv\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4448'\fI\%#4448\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4448\fP>\X'tty: link')
.IP \(bu 2
\fBs3cmd\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4332'\fI\%#4332\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4332\fP>\X'tty: link')
.IP \(bu 2
\fBsbt\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4347'\fI\%#4347\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4347\fP>\X'tty: link')
.IP \(bu 2
\fBsnap\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4215'\fI\%#4215\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4215\fP>\X'tty: link')
.IP \(bu 2
Sublime Text 3’s \fBsubl\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4277'\fI\%#4277\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4277\fP>\X'tty: link')
.UNINDENT
.IP \(bu 2
Lots of improvements to completions.
.IP \(bu 2
Updated Chinese and French translations.
.IP \(bu 2
Improved completions for:
.INDENT 2.0
.IP \(bu 2
\fBapt\fP
.IP \(bu 2
\fBcd\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4061'\fI\%#4061\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4061\fP>\X'tty: link')
.IP \(bu 2
\fBcomposer\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4295'\fI\%#4295\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4295\fP>\X'tty: link')
.IP \(bu 2
\fBeopkg\fP
.IP \(bu 2
\fBflatpak\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4456'\fI\%#4456\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4456\fP>\X'tty: link')
.IP \(bu 2
\fBgit\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4117'\fI\%#4117\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4117\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/4147'\fI\%#4147\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4147\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/4329'\fI\%#4329\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4329\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/4368'\fI\%#4368\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4368\fP>\X'tty: link')
.IP \(bu 2
\fBgphoto2\fP
.IP \(bu 2
\fBkillall\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4052'\fI\%#4052\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4052\fP>\X'tty: link')
.IP \(bu 2
\fBln\fP
.IP \(bu 2
\fBnpm\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4241'\fI\%#4241\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4241\fP>\X'tty: link')
.IP \(bu 2
\fBssh\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4377'\fI\%#4377\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4377\fP>\X'tty: link')
.IP \(bu 2
\fBtail\fP
.IP \(bu 2
\fBxdg\-mime\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4333'\fI\%#4333\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4333\fP>\X'tty: link')
.IP \(bu 2
\fBzypper\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4325'\fI\%#4325\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4325\fP>\X'tty: link')
.UNINDENT
.UNINDENT
.SH FISH 2.6.0 (RELEASED JUNE 3, 2017)
.sp
Since the beta release of fish 2.6b1, fish version 2.6.0 contains a
number of minor fixes, new completions for \fBmagneto\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4043'\fI\%#4043\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4043\fP>\X'tty: link'), and
improvements to the documentation.
.SS Known issues
.INDENT 0.0
.IP \(bu 2
Apple macOS Sierra 10.12.5 introduced a problem with launching web
browsers from other programs using AppleScript. This affects the fish
Web configuration (\fBfish_config\fP); users on these platforms will
need to manually open the address displayed in the terminal, such as
by copying and pasting it into a browser. This problem will be fixed
with macOS 10.12.6.
.UNINDENT
.sp
If you are upgrading from version 2.5.0 or before, please also review
the release notes for 2.6b1 (included below).

.sp
.ce
----

.ce 0
.sp
.SH FISH 2.6B1 (RELEASED MAY 14, 2017)
.SS Notable fixes and improvements
.INDENT 0.0
.IP \(bu 2
Jobs running in the background can now be removed from the list of
jobs with the new \fBdisown\fP builtin, which behaves like the same
command in other shells (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2810'\fI\%#2810\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2810\fP>\X'tty: link').
.IP \(bu 2
Command substitutions now have access to the terminal, like in other
shells. This allows tools like \fBfzf\fP to work properly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1362'\fI\%#1362\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1362\fP>\X'tty: link',
\X'tty: link https://github.com/fish-shell/fish-shell/issues/3922'\fI\%#3922\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3922\fP>\X'tty: link').
.IP \(bu 2
In cases where the operating system does not report the size of the
terminal, the \fBCOLUMNS\fP and \fBLINES\fP environment variables are
used; if they are unset, a default of 80x24 is assumed.
.IP \(bu 2
New French (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3772'\fI\%#3772\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3772\fP>\X'tty: link' & \X'tty: link https://github.com/fish-shell/fish-shell/issues/3788'\fI\%#3788\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3788\fP>\X'tty: link') and improved German (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3834'\fI\%#3834\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3834\fP>\X'tty: link') translations.
.IP \(bu 2
fish no longer depends on the \fBwhich\fP external command.
.UNINDENT
.SS Other significant changes
.INDENT 0.0
.IP \(bu 2
Performance improvements in launching processes, including major
reductions in signal blocking. Although this has been heavily tested,
it may cause problems in some circumstances; set the
\fBFISH_NO_SIGNAL_BLOCK\fP variable to 0 in your fish configuration
file to return to the old behaviour (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2007'\fI\%#2007\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2007\fP>\X'tty: link').
.IP \(bu 2
Performance improvements in prompts and functions that set lots of
colours (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3793'\fI\%#3793\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3793\fP>\X'tty: link').
.IP \(bu 2
The Delete key no longer deletes backwards (a regression in 2.5.0).
.IP \(bu 2
\fBfunctions\fP supports a new \fB\-\-details\fP option, which identifies
where the function was loaded from (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3295'\fI\%#3295\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3295\fP>\X'tty: link'), and a
\fB\-\-details \-\-verbose\fP option which includes the function
description (\X'tty: link https://github.com/fish-shell/fish-shell/issues/597'\fI\%#597\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/597\fP>\X'tty: link').
.IP \(bu 2
\fBread\fP will read up to 10 MiB by default, leaving the target
variable empty and exiting with status 122 if the line is too long.
You can set a different limit with the \fBFISH_READ_BYTE_LIMIT\fP
variable.
.IP \(bu 2
\fBread\fP supports a new \fB\-\-silent\fP option to hide the characters
typed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/838'\fI\%#838\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/838\fP>\X'tty: link'), for when reading sensitive data from the terminal.
\fBread\fP also now accepts simple strings for the prompt (rather than
scripts) with the new \fB\-P\fP and \fB\-\-prompt\-str\fP options (\X'tty: link https://github.com/fish-shell/fish-shell/issues/802'\fI\%#802\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/802\fP>\X'tty: link').
.IP \(bu 2
\fBexport\fP and \fBsetenv\fP now understand colon\-separated \fBPATH\fP,
\fBCDPATH\fP and \fBMANPATH\fP variables.
.IP \(bu 2
\fBsetenv\fP is no longer a simple alias for \fBset \-gx\fP and will
complain, just like the csh version, if given more than one value
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/4103'\fI\%#4103\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4103\fP>\X'tty: link').
.IP \(bu 2
\fBbind\fP supports a new \fB\-\-list\-modes\fP option (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3872'\fI\%#3872\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3872\fP>\X'tty: link').
.IP \(bu 2
\fBbg\fP will check all of its arguments before backgrounding any jobs;
any invalid arguments will cause a failure, but non\-existent (eg
recently exited) jobs are ignored (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3909'\fI\%#3909\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3909\fP>\X'tty: link').
.IP \(bu 2
\fBfunced\fP warns if the function being edited has not been modified
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/3961'\fI\%#3961\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3961\fP>\X'tty: link').
.IP \(bu 2
\fBprintf\fP correctly outputs “long long” integers (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3352'\fI\%#3352\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3352\fP>\X'tty: link').
.IP \(bu 2
\fBstatus\fP supports a new \fBcurrent\-function\fP subcommand to print
the current function name (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1743'\fI\%#1743\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1743\fP>\X'tty: link').
.IP \(bu 2
\fBstring\fP supports a new \fBrepeat\fP subcommand (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3864'\fI\%#3864\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3864\fP>\X'tty: link').
\fBstring match\fP supports a new \fB\-\-entire\fP option to emit the
entire line matched by a pattern (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3957'\fI\%#3957\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3957\fP>\X'tty: link'). \fBstring replace\fP supports
a new \fB\-\-filter\fP option to only emit lines which underwent a
replacement (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3348'\fI\%#3348\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3348\fP>\X'tty: link').
.IP \(bu 2
\fBtest\fP supports the \fB\-k\fP option to test for sticky bits (\X'tty: link https://github.com/fish-shell/fish-shell/issues/733'\fI\%#733\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/733\fP>\X'tty: link').
.IP \(bu 2
\fBumask\fP understands symbolic modes (\X'tty: link https://github.com/fish-shell/fish-shell/issues/738'\fI\%#738\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/738\fP>\X'tty: link').
.IP \(bu 2
Empty components in the \fBCDPATH\fP, \fBMANPATH\fP and \fBPATH\fP
variables are now converted to “.” (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2106'\fI\%#2106\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2106\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/3914'\fI\%#3914\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3914\fP>\X'tty: link').
.IP \(bu 2
New versions of ncurses (6.0 and up) wipe terminal scrollback buffers
with certain commands; the \fBC\-l\fP binding tries to avoid this
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/2855'\fI\%#2855\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2855\fP>\X'tty: link').
.IP \(bu 2
Some systems’ \fBsu\fP implementations do not set the \fBUSER\fP
environment variable; it is now reset for root users (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3916'\fI\%#3916\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3916\fP>\X'tty: link').
.IP \(bu 2
Under terminals which support it, bracketed paste is enabled,
escaping problematic characters for security and convience (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3871'\fI\%#3871\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3871\fP>\X'tty: link').
Inside single quotes (\fB\(aq\fP), single quotes and backslashes in pasted
text are escaped (\X'tty: link https://github.com/fish-shell/fish-shell/issues/967'\fI\%#967\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/967\fP>\X'tty: link'). The \fBfish_clipboard_paste\fP function (bound
to \fBC\-v\fP by default) is still the recommended pasting method where
possible as it includes this functionality and more.
.IP \(bu 2
Processes in pipelines are no longer signalled as soon as one command
in the pipeline has completed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1926'\fI\%#1926\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1926\fP>\X'tty: link'). This behaviour matches other
shells mre closely.
.IP \(bu 2
All functions requiring Python work with whichever version of Python
is installed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3970'\fI\%#3970\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3970\fP>\X'tty: link'). Python 3 is preferred, but Python 2.6 remains
the minimum version required.
.IP \(bu 2
The color of the cancellation character can be controlled by the
\fBfish_color_cancel\fP variable (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3963'\fI\%#3963\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3963\fP>\X'tty: link').
.IP \(bu 2
Added completions for:
.IP \(bu 2
\fBcaddy\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4008'\fI\%#4008\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4008\fP>\X'tty: link')
.IP \(bu 2
\fBcastnow\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3744'\fI\%#3744\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3744\fP>\X'tty: link')
.IP \(bu 2
\fBclimate\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3760'\fI\%#3760\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3760\fP>\X'tty: link')
.IP \(bu 2
\fBflatpak\fP
.IP \(bu 2
\fBgradle\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3859'\fI\%#3859\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3859\fP>\X'tty: link')
.IP \(bu 2
\fBgsettings\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4001'\fI\%#4001\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4001\fP>\X'tty: link')
.IP \(bu 2
\fBhelm\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3829'\fI\%#3829\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3829\fP>\X'tty: link')
.IP \(bu 2
\fBi3\-msg\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3787'\fI\%#3787\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3787\fP>\X'tty: link')
.IP \(bu 2
\fBipset\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3924'\fI\%#3924\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3924\fP>\X'tty: link')
.IP \(bu 2
\fBjq\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3804'\fI\%#3804\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3804\fP>\X'tty: link')
.IP \(bu 2
\fBlight\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3752'\fI\%#3752\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3752\fP>\X'tty: link')
.IP \(bu 2
\fBminikube\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3778'\fI\%#3778\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3778\fP>\X'tty: link')
.IP \(bu 2
\fBmocha\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3828'\fI\%#3828\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3828\fP>\X'tty: link')
.IP \(bu 2
\fBmkdosfs\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/4017'\fI\%#4017\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/4017\fP>\X'tty: link')
.IP \(bu 2
\fBpv\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3773'\fI\%#3773\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3773\fP>\X'tty: link')
.IP \(bu 2
\fBsetsid\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3791'\fI\%#3791\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3791\fP>\X'tty: link')
.IP \(bu 2
\fBterraform\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3960'\fI\%#3960\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3960\fP>\X'tty: link')
.IP \(bu 2
\fBusermod\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3775'\fI\%#3775\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3775\fP>\X'tty: link')
.IP \(bu 2
\fBxinput\fP
.IP \(bu 2
\fByarn\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3816'\fI\%#3816\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3816\fP>\X'tty: link')
.IP \(bu 2
Improved completions for \fBadb\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3853'\fI\%#3853\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3853\fP>\X'tty: link'), \fBapt\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3771'\fI\%#3771\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3771\fP>\X'tty: link'), \fBbzr\fP
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/3769'\fI\%#3769\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3769\fP>\X'tty: link'), \fBdconf\fP, \fBgit\fP (including \X'tty: link https://github.com/fish-shell/fish-shell/issues/3743'\fI\%#3743\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3743\fP>\X'tty: link'), \fBgrep\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3789'\fI\%#3789\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3789\fP>\X'tty: link'),
\fBgo\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3789'\fI\%#3789\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3789\fP>\X'tty: link'), \fBhelp\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3789'\fI\%#3789\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3789\fP>\X'tty: link'), \fBhg\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3975'\fI\%#3975\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3975\fP>\X'tty: link'), \fBhtop\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3789'\fI\%#3789\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3789\fP>\X'tty: link'),
\fBkillall\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3996'\fI\%#3996\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3996\fP>\X'tty: link'), \fBlua\fP, \fBman\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3762'\fI\%#3762\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3762\fP>\X'tty: link'), \fBmount\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3764'\fI\%#3764\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3764\fP>\X'tty: link' &
\X'tty: link https://github.com/fish-shell/fish-shell/issues/3841'\fI\%#3841\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3841\fP>\X'tty: link'), \fBobnam\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3924'\fI\%#3924\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3924\fP>\X'tty: link'), \fBperl\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3856'\fI\%#3856\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3856\fP>\X'tty: link'), \fBportmaster\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3950'\fI\%#3950\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3950\fP>\X'tty: link'),
\fBpython\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3840'\fI\%#3840\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3840\fP>\X'tty: link'), \fBssh\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3781'\fI\%#3781\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3781\fP>\X'tty: link'), \fBscp\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3781'\fI\%#3781\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3781\fP>\X'tty: link'), \fBsystemctl\fP
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/3757'\fI\%#3757\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3757\fP>\X'tty: link') and \fBudisks\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3764'\fI\%#3764\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3764\fP>\X'tty: link').
.UNINDENT

.sp
.ce
----

.ce 0
.sp
.SH FISH 2.5.0 (RELEASED FEBRUARY 3, 2017)
.sp
There are no major changes between 2.5b1 and 2.5.0. If you are upgrading
from version 2.4.0 or before, please also review the release notes for
2.5b1 (included below).
.SS Notable fixes and improvements
.INDENT 0.0
.IP \(bu 2
The Home, End, Insert, Delete, Page Up and Page Down keys work in
Vi\-style key bindings (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3731'\fI\%#3731\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3731\fP>\X'tty: link').
.UNINDENT

.sp
.ce
----

.ce 0
.sp
.SH FISH 2.5B1 (RELEASED JANUARY 14, 2017)
.SS Platform Changes
.sp
Starting with version 2.5, fish requires a more up\-to\-date version of
C++, specifically C++11 (from 2011). This affects some older platforms:
.SS Linux
.sp
For users building from source, GCC’s g++ 4.8 or later, or LLVM’s clang
3.3 or later, are known to work. Older platforms may require a newer
compiler installed.
.sp
Unfortunately, because of the complexity of the toolchain, binary
packages are no longer published by the fish\-shell developers for the
following platforms:
.INDENT 0.0
.IP \(bu 2
Red Hat Enterprise Linux and CentOS 5 & 6 for 64\-bit builds
.IP \(bu 2
Ubuntu 12.04 (EoLTS April 2017)
.IP \(bu 2
Debian 7 (EoLTS May 2018)
.UNINDENT
.sp
Installing newer version of fish on these systems will require building
from source.
.SS OS X SnowLeopard
.sp
Starting with version 2.5, fish requires a C++11 standard library on OS
X 10.6 (“SnowLeopard”). If this library is not installed, you will see
this error: \fBdyld: Library not loaded: /usr/lib/libc++.1.dylib\fP
.sp
MacPorts is the easiest way to obtain this library. After installing the
SnowLeopard MacPorts release from the install page, run:
.INDENT 0.0
.INDENT 3.5
.sp
.EX
sudo port \-v install libcxx
.EE
.UNINDENT
.UNINDENT
.sp
Now fish should launch successfully. (Please open an issue if it does
not.)
.sp
This is only necessary on 10.6. OS X 10.7 and later include the required
library by default.
.SS Other significant changes
.INDENT 0.0
.IP \(bu 2
Attempting to exit with running processes in the background produces
a warning, then signals them to terminate if a second attempt to exit
is made. This brings the behaviour for running background processes
into line with stopped processes. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3497'\fI\%#3497\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3497\fP>\X'tty: link')
.IP \(bu 2
\fBrandom\fP can now have start, stop and step values specified, or the
new \fBchoice\fP subcommand can be used to pick an argument from a list
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/3619'\fI\%#3619\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3619\fP>\X'tty: link').
.IP \(bu 2
A new key bindings preset, \fBfish_hybrid_key_bindings\fP, including
all the Emacs\-style and Vi\-style bindings, which behaves like
\fBfish_vi_key_bindings\fP in fish 2.3.0 (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3556'\fI\%#3556\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3556\fP>\X'tty: link').
.IP \(bu 2
\fBfunction\fP now returns an error when called with invalid options,
rather than defining the function anyway (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3574'\fI\%#3574\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3574\fP>\X'tty: link'). This was a
regression present in fish 2.3 and 2.4.0.
.IP \(bu 2
fish no longer prints a warning when it identifies a running instance
of an old version (2.1.0 and earlier). Changes to universal variables
may not propagate between these old versions and 2.5b1.
.IP \(bu 2
Improved compatiblity with Android (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3585'\fI\%#3585\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3585\fP>\X'tty: link'), MSYS/mingw (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2360'\fI\%#2360\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2360\fP>\X'tty: link'), and
Solaris (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3456'\fI\%#3456\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3456\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/3340'\fI\%#3340\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3340\fP>\X'tty: link').
.IP \(bu 2
Like other shells, the \fBtest\fP builting now returns an error for
numeric operations on invalid integers (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3346'\fI\%#3346\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3346\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/3581'\fI\%#3581\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3581\fP>\X'tty: link').
.IP \(bu 2
\fBcomplete\fP no longer recognises \fB\-\-authoritative\fP and
\fB\-\-unauthoritative\fP options, and they are marked as obsolete.
.IP \(bu 2
\fBstatus\fP accepts subcommands, and should be used like
\fBstatus is\-interactive\fP\&. The old options continue to be supported
for the foreseeable future (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3526'\fI\%#3526\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3526\fP>\X'tty: link'), although only one subcommand or
option can be specified at a time.
.IP \(bu 2
Selection mode (used with “begin\-selection”) no longer selects a
character the cursor does not move over (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3684'\fI\%#3684\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3684\fP>\X'tty: link').
.IP \(bu 2
List indexes are handled better, and a bit more liberally in some
cases (\fBecho $PATH[1 .. 3]\fP is now valid) (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3579'\fI\%#3579\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3579\fP>\X'tty: link').
.IP \(bu 2
The \fBfish_mode_prompt\fP function is now simply a stub around
\fBfish_default_mode_prompt\fP, which allows the mode prompt to be
included more easily in customised prompt functions (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3641'\fI\%#3641\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3641\fP>\X'tty: link').
.UNINDENT
.SS Notable fixes and improvements
.INDENT 0.0
.IP \(bu 2
\fBalias\fP, run without options or arguments, lists all defined
aliases, and aliases now include a description in the function
signature that identifies them.
.IP \(bu 2
\fBcomplete\fP accepts empty strings as descriptions (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3557'\fI\%#3557\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3557\fP>\X'tty: link').
.IP \(bu 2
\fBcommand\fP accepts \fB\-q\fP/\fB\-\-quiet\fP in combination with
\fB\-\-search\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3591'\fI\%#3591\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3591\fP>\X'tty: link'), providing a simple way of checking whether a
command exists in scripts.
.IP \(bu 2
Abbreviations can now be renamed with
\fBabbr \-\-rename OLD_KEY NEW_KEY\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3610'\fI\%#3610\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3610\fP>\X'tty: link').
.IP \(bu 2
The command synopses printed by \fB\-\-help\fP options work better with
copying and pasting (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2673'\fI\%#2673\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2673\fP>\X'tty: link').
.IP \(bu 2
\fBhelp\fP launches the browser specified by the
\fB$fish_help_browser variable\fP if it is set (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3131'\fI\%#3131\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3131\fP>\X'tty: link').
.IP \(bu 2
History merging could lose items under certain circumstances and is
now fixed (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3496'\fI\%#3496\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3496\fP>\X'tty: link').
.IP \(bu 2
The \fB$status\fP variable is now set to 123 when a syntactically
invalid command is entered (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3616'\fI\%#3616\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3616\fP>\X'tty: link').
.IP \(bu 2
Exiting fish now signals all background processes to terminate, not
just stopped jobs (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3497'\fI\%#3497\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3497\fP>\X'tty: link').
.IP \(bu 2
A new \fBprompt_hostname\fP function which prints a hostname suitable
for use in prompts (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3482'\fI\%#3482\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3482\fP>\X'tty: link').
.IP \(bu 2
The \fB__fish_man_page\fP function (bound to Alt\-h by default) now
tries to recognize subcommands (e.g.\ \fBgit add\fP will now open the
“git\-add” man page) (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3678'\fI\%#3678\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3678\fP>\X'tty: link').
.IP \(bu 2
A new function \fBedit_command_buffer\fP (bound to Alt\-e & Alt\-v by
default) to edit the command buffer in an external editor (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1215'\fI\%#1215\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1215\fP>\X'tty: link',
\X'tty: link https://github.com/fish-shell/fish-shell/issues/3627'\fI\%#3627\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3627\fP>\X'tty: link').
.IP \(bu 2
\fBset_color\fP now supports italics (\fB\-\-italics\fP), dim (\fB\-\-dim\fP)
and reverse (\fB\-\-reverse\fP) modes (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3650'\fI\%#3650\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3650\fP>\X'tty: link').
.IP \(bu 2
Filesystems with very slow locking (eg incorrectly\-configured NFS)
will no longer slow fish down (\X'tty: link https://github.com/fish-shell/fish-shell/issues/685'\fI\%#685\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/685\fP>\X'tty: link').
.IP \(bu 2
Improved completions for \fBapt\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3695'\fI\%#3695\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3695\fP>\X'tty: link'), \fBfusermount\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3642'\fI\%#3642\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3642\fP>\X'tty: link'),
\fBmake\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3628'\fI\%#3628\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3628\fP>\X'tty: link'), \fBnetctl\-auto\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3378'\fI\%#3378\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3378\fP>\X'tty: link'), \fBnmcli\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3648'\fI\%#3648\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3648\fP>\X'tty: link'),
\fBpygmentize\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3378'\fI\%#3378\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3378\fP>\X'tty: link'), and \fBtar\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3719'\fI\%#3719\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3719\fP>\X'tty: link').
.IP \(bu 2
Added completions for:
.IP \(bu 2
\fBVBoxHeadless\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3378'\fI\%#3378\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3378\fP>\X'tty: link')
.IP \(bu 2
\fBVBoxSDL\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3378'\fI\%#3378\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3378\fP>\X'tty: link')
.IP \(bu 2
\fBbase64\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3378'\fI\%#3378\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3378\fP>\X'tty: link')
.IP \(bu 2
\fBcaffeinate\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3524'\fI\%#3524\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3524\fP>\X'tty: link')
.IP \(bu 2
\fBdconf\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3638'\fI\%#3638\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3638\fP>\X'tty: link')
.IP \(bu 2
\fBdig\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3495'\fI\%#3495\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3495\fP>\X'tty: link')
.IP \(bu 2
\fBdpkg\-reconfigure\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3521'\fI\%#3521\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3521\fP>\X'tty: link' & \X'tty: link https://github.com/fish-shell/fish-shell/issues/3522'\fI\%#3522\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3522\fP>\X'tty: link')
.IP \(bu 2
\fBfeh\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3378'\fI\%#3378\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3378\fP>\X'tty: link')
.IP \(bu 2
\fBlaunchctl\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3682'\fI\%#3682\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3682\fP>\X'tty: link')
.IP \(bu 2
\fBlxc\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3554'\fI\%#3554\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3554\fP>\X'tty: link' & \X'tty: link https://github.com/fish-shell/fish-shell/issues/3564'\fI\%#3564\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3564\fP>\X'tty: link'),
.IP \(bu 2
\fBmddiagnose\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3524'\fI\%#3524\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3524\fP>\X'tty: link')
.IP \(bu 2
\fBmdfind\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3524'\fI\%#3524\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3524\fP>\X'tty: link')
.IP \(bu 2
\fBmdimport\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3524'\fI\%#3524\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3524\fP>\X'tty: link')
.IP \(bu 2
\fBmdls\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3524'\fI\%#3524\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3524\fP>\X'tty: link')
.IP \(bu 2
\fBmdutil\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3524'\fI\%#3524\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3524\fP>\X'tty: link')
.IP \(bu 2
\fBmkvextract\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3492'\fI\%#3492\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3492\fP>\X'tty: link')
.IP \(bu 2
\fBnvram\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3524'\fI\%#3524\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3524\fP>\X'tty: link')
.IP \(bu 2
\fBobjdump\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3378'\fI\%#3378\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3378\fP>\X'tty: link')
.IP \(bu 2
\fBsysbench\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3491'\fI\%#3491\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3491\fP>\X'tty: link')
.IP \(bu 2
\fBtmutil\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3524'\fI\%#3524\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3524\fP>\X'tty: link')
.UNINDENT

.sp
.ce
----

.ce 0
.sp
.SH FISH 2.4.0 (RELEASED NOVEMBER 8, 2016)
.sp
There are no major changes between 2.4b1 and 2.4.0.
.SS Notable fixes and improvements
.INDENT 0.0
.IP \(bu 2
The documentation is now generated properly and with the correct
version identifier.
.IP \(bu 2
Automatic cursor changes are now only enabled on the subset of XTerm
versions known to support them, resolving a problem where older
versions printed garbage to the terminal before and after every
prompt (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3499'\fI\%#3499\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3499\fP>\X'tty: link').
.IP \(bu 2
Improved the title set in Apple Terminal.app.
.IP \(bu 2
Added completions for \fBdefaults\fP and improved completions for
\fBdiskutil\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3478'\fI\%#3478\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3478\fP>\X'tty: link').
.UNINDENT

.sp
.ce
----

.ce 0
.sp
.SH FISH 2.4B1 (RELEASED OCTOBER 18, 2016)
.SS Significant changes
.INDENT 0.0
.IP \(bu 2
The clipboard integration has been revamped with explicit bindings.
The killring commands no longer copy from, or paste to, the X11
clipboard \- use the new copy (\fBC\-x\fP) and paste (\fBC\-v\fP) bindings
instead. The clipboard is now available on OS X as well as systems
using X11 (e.g.\ Linux). (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3061'\fI\%#3061\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3061\fP>\X'tty: link')
.IP \(bu 2
\fBhistory\fP uses subcommands (\fBhistory delete\fP) rather than options
(\fBhistory \-\-delete\fP) for its actions (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3367'\fI\%#3367\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3367\fP>\X'tty: link'). You can no longer
specify multiple actions via flags (e.g.,
\fBhistory \-\-delete \-\-save something\fP).
.IP \(bu 2
New \fBhistory\fP options have been added, including \fB\-\-max=n\fP to
limit the number of history entries, \fB\-\-show\-time\fP option to show
timestamps (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3175'\fI\%#3175\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3175\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/3244'\fI\%#3244\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3244\fP>\X'tty: link'), and \fB\-\-null\fP to null terminate history
entries in the search output.
.IP \(bu 2
\fBhistory search\fP is now case\-insensitive by default (which also
affects \fBhistory delete\fP) (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3236'\fI\%#3236\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3236\fP>\X'tty: link').
.IP \(bu 2
\fBhistory delete\fP now correctly handles multiline commands (\X'tty: link https://github.com/fish-shell/fish-shell/issues/31'\fI\%#31\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/31\fP>\X'tty: link').
.IP \(bu 2
Vi\-style bindings no longer include all of the default emacs\-style
bindings; instead, they share some definitions (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3068'\fI\%#3068\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3068\fP>\X'tty: link').
.IP \(bu 2
If there is no locale set in the environment, various known system
configuration files will be checked for a default. If no locale can
be found, \fBen_US\-UTF.8\fP will be used (\X'tty: link https://github.com/fish-shell/fish-shell/issues/277'\fI\%#277\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/277\fP>\X'tty: link').
.IP \(bu 2
A number followed by a caret (e.g.\ \fB5^\fP) is no longer treated as a
redirection (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1873'\fI\%#1873\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1873\fP>\X'tty: link').
.IP \(bu 2
The \fB$version\fP special variable can be overwritten, so that it can
be used for other purposes if required.
.UNINDENT
.SS Notable fixes and improvements
.INDENT 0.0
.IP \(bu 2
The \fBfish_realpath\fP builtin has been renamed to \fBrealpath\fP and
made compatible with GNU \fBrealpath\fP when run without arguments
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/3400'\fI\%#3400\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3400\fP>\X'tty: link'). It is used only for systems without a \fBrealpath\fP or
\fBgrealpath\fP utility (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3374'\fI\%#3374\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3374\fP>\X'tty: link').
.IP \(bu 2
Improved color handling on terminals/consoles with 8\-16 colors,
particularly the use of bright named color (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3176'\fI\%#3176\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3176\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/3260'\fI\%#3260\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3260\fP>\X'tty: link').
.IP \(bu 2
\fBfish_indent\fP can now read from files given as arguments, rather
than just standard input (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3037'\fI\%#3037\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3037\fP>\X'tty: link').
.IP \(bu 2
Fuzzy tab completions behave in a less surprising manner (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3090'\fI\%#3090\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3090\fP>\X'tty: link',
\X'tty: link https://github.com/fish-shell/fish-shell/issues/3211'\fI\%#3211\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3211\fP>\X'tty: link').
.IP \(bu 2
\fBjobs\fP should only print its header line once (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3127'\fI\%#3127\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3127\fP>\X'tty: link').
.IP \(bu 2
Wildcards in redirections are highlighted appropriately (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2789'\fI\%#2789\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2789\fP>\X'tty: link').
.IP \(bu 2
Suggestions will be offered more often, like after removing
characters (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3069'\fI\%#3069\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3069\fP>\X'tty: link').
.IP \(bu 2
\fBhistory \-\-merge\fP now correctly interleaves items in chronological
order (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2312'\fI\%#2312\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2312\fP>\X'tty: link').
.IP \(bu 2
Options for \fBfish_indent\fP have been aligned with the other binaries
\- in particular, \fB\-d\fP now means \fB\-\-debug\fP\&. The \fB\-\-dump\fP option
has been renamed to \fB\-\-dump\-parse\-tree\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3191'\fI\%#3191\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3191\fP>\X'tty: link').
.IP \(bu 2
The display of bindings in the Web\-based configuration has been
greatly improved (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3325'\fI\%#3325\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3325\fP>\X'tty: link'), as has the rendering of prompts (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2924'\fI\%#2924\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2924\fP>\X'tty: link').
.IP \(bu 2
fish should no longer hang using 100% CPU in the C locale (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3214'\fI\%#3214\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3214\fP>\X'tty: link').
.IP \(bu 2
A bug in FreeBSD 11 & 12, Dragonfly BSD & illumos prevented fish from
working correctly on these platforms under UTF\-8 locales; fish now
avoids the buggy behaviour (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3050'\fI\%#3050\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3050\fP>\X'tty: link').
.IP \(bu 2
Prompts which show git repository information (via
\fB__fish_git_prompt\fP) are faster in large repositories (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3294'\fI\%#3294\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3294\fP>\X'tty: link') and
slow filesystems (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3083'\fI\%#3083\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3083\fP>\X'tty: link').
.IP \(bu 2
fish 2.3.0 reintroduced a problem where the greeting was printed even
when using \fBread\fP; this has been corrected again (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3261'\fI\%#3261\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3261\fP>\X'tty: link').
.IP \(bu 2
Vi mode changes the cursor depending on the current mode (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3215'\fI\%#3215\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3215\fP>\X'tty: link').
.IP \(bu 2
Command lines with escaped space characters at the end tab\-complete
correctly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2447'\fI\%#2447\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2447\fP>\X'tty: link').
.IP \(bu 2
Added completions for:
.INDENT 2.0
.IP \(bu 2
\fBarcanist\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3256'\fI\%#3256\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3256\fP>\X'tty: link')
.IP \(bu 2
\fBconnmanctl\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3419'\fI\%#3419\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3419\fP>\X'tty: link')
.IP \(bu 2
\fBfiglet\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3378'\fI\%#3378\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3378\fP>\X'tty: link')
.IP \(bu 2
\fBmdbook\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3378'\fI\%#3378\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3378\fP>\X'tty: link')
.IP \(bu 2
\fBninja\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3415'\fI\%#3415\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3415\fP>\X'tty: link')
.IP \(bu 2
\fBp4\fP, the Perforce client (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3314'\fI\%#3314\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3314\fP>\X'tty: link')
.IP \(bu 2
\fBpygmentize\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3378'\fI\%#3378\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3378\fP>\X'tty: link')
.IP \(bu 2
\fBranger\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3378'\fI\%#3378\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3378\fP>\X'tty: link')
.UNINDENT
.IP \(bu 2
Improved completions for \fBaura\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3297'\fI\%#3297\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3297\fP>\X'tty: link'), \fBabbr\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3267'\fI\%#3267\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3267\fP>\X'tty: link'), \fBbrew\fP
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/3309'\fI\%#3309\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3309\fP>\X'tty: link'), \fBchown\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3380'\fI\%#3380\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3380\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/3383'\fI\%#3383\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3383\fP>\X'tty: link'),\fBcygport\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3392'\fI\%#3392\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3392\fP>\X'tty: link'), \fBgit\fP
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/3274'\fI\%#3274\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3274\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/3226'\fI\%#3226\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3226\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/3225'\fI\%#3225\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3225\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/3094'\fI\%#3094\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3094\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/3087'\fI\%#3087\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3087\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/3035'\fI\%#3035\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3035\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/3021'\fI\%#3021\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3021\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/2982'\fI\%#2982\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2982\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/3230'\fI\%#3230\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3230\fP>\X'tty: link'),
\fBkill\fP & \fBpkill\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3200'\fI\%#3200\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3200\fP>\X'tty: link'), \fBscreen\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3271'\fI\%#3271\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3271\fP>\X'tty: link'), \fBwget\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3470'\fI\%#3470\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3470\fP>\X'tty: link'),
and \fBxz\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3378'\fI\%#3378\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3378\fP>\X'tty: link').
.IP \(bu 2
Distributors, packagers and developers will notice that the build
process produces more succinct output by default; use \fBmake V=1\fP to
get verbose output (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3248'\fI\%#3248\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3248\fP>\X'tty: link').
.IP \(bu 2
Improved compatibility with minor platforms including musl (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2988'\fI\%#2988\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2988\fP>\X'tty: link'),
Cygwin (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2993'\fI\%#2993\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2993\fP>\X'tty: link'), Android (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3441'\fI\%#3441\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3441\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/3442'\fI\%#3442\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3442\fP>\X'tty: link'), Haiku (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3322'\fI\%#3322\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3322\fP>\X'tty: link') and Solaris .
.UNINDENT

.sp
.ce
----

.ce 0
.sp
.SH FISH 2.3.1 (RELEASED JULY 3, 2016)
.sp
This is a functionality and bugfix release. This release does not
contain all the changes to fish since the last release, but fixes a
number of issues directly affecting users at present and includes a
small number of new features.
.SS Significant changes
.INDENT 0.0
.IP \(bu 2
A new \fBfish_key_reader\fP binary for decoding interactive keypresses
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/2991'\fI\%#2991\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2991\fP>\X'tty: link').
.IP \(bu 2
\fBfish_mode_prompt\fP has been updated to reflect the changes in the
way the Vi input mode is set up (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3067'\fI\%#3067\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3067\fP>\X'tty: link'), making this more reliable.
.IP \(bu 2
\fBfish_config\fP can now properly be launched from the OS X app bundle
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/3140'\fI\%#3140\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3140\fP>\X'tty: link').
.UNINDENT
.SS Notable fixes and improvements
.INDENT 0.0
.IP \(bu 2
Extra lines were sometimes inserted into the output under Windows
(Cygwin and Microsoft Windows Subsystem for Linux) due to TTY
timestamps not being updated (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2859'\fI\%#2859\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2859\fP>\X'tty: link').
.IP \(bu 2
The \fBstring\fP builtin’s \fBmatch\fP mode now handles the combination
of \fB\-rnv\fP (match, invert and count) correctly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3098'\fI\%#3098\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3098\fP>\X'tty: link').
.IP \(bu 2
Improvements to TTY special character handling (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3064'\fI\%#3064\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3064\fP>\X'tty: link'), locale
handling (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3124'\fI\%#3124\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3124\fP>\X'tty: link') and terminal environment variable handling (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3060'\fI\%#3060\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3060\fP>\X'tty: link').
.IP \(bu 2
Work towards handling the terminal modes for external commands
launched from initialisation files (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2980'\fI\%#2980\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2980\fP>\X'tty: link').
.IP \(bu 2
Ease the upgrade path from fish 2.2.0 and before by warning users to
restart fish if the \fBstring\fP builtin is not available (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3057'\fI\%#3057\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3057\fP>\X'tty: link').
.IP \(bu 2
\fBtype \-a\fP now syntax\-colorizes function source output.
.IP \(bu 2
Added completions for \fBalsamixer\fP, \fBgodoc\fP, \fBgofmt\fP,
\fBgoimports\fP, \fBgorename\fP, \fBlscpu\fP, \fBmkdir\fP, \fBmodinfo\fP,
\fBnetctl\-auto\fP, \fBpoweroff\fP, \fBtermite\fP, \fBudisksctl\fP and \fBxz\fP
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/3123'\fI\%#3123\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3123\fP>\X'tty: link').
.IP \(bu 2
Improved completions for \fBapt\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3097'\fI\%#3097\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3097\fP>\X'tty: link'), \fBaura\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3102'\fI\%#3102\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3102\fP>\X'tty: link'),\fBgit\fP
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/3114'\fI\%#3114\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3114\fP>\X'tty: link'), \fBnpm\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3158'\fI\%#3158\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3158\fP>\X'tty: link'), \fBstring\fP and \fBsuspend\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3154'\fI\%#3154\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3154\fP>\X'tty: link').
.UNINDENT

.sp
.ce
----

.ce 0
.sp
.SH FISH 2.3.0 (RELEASED MAY 20, 2016)
.sp
There are no significant changes between 2.3.0 and 2.3b2.
.SS Other notable fixes and improvements
.INDENT 0.0
.IP \(bu 2
\fBabbr\fP now allows non\-letter keys (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2996'\fI\%#2996\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2996\fP>\X'tty: link').
.IP \(bu 2
Define a few extra colours on first start (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2987'\fI\%#2987\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2987\fP>\X'tty: link').
.IP \(bu 2
Multiple documentation updates.
.IP \(bu 2
Added completions for rmmod (\X'tty: link https://github.com/fish-shell/fish-shell/issues/3007'\fI\%#3007\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/3007\fP>\X'tty: link').
.IP \(bu 2
Improved completions for git (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2998'\fI\%#2998\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2998\fP>\X'tty: link').
.UNINDENT
.SS Known issues
.INDENT 0.0
.IP \(bu 2
Interactive commands started from fish configuration files or from
the \fB\-c\fP option may, under certain circumstances, be started with
incorrect terminal modes and fail to behave as expected. A fix is
planned but requires further testing (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2619'\fI\%#2619\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2619\fP>\X'tty: link').
.UNINDENT

.sp
.ce
----

.ce 0
.sp
.SH FISH 2.3B2 (RELEASED MAY 5, 2016)
.SS Significant changes
.INDENT 0.0
.IP \(bu 2
A new \fBfish_realpath\fP builtin and associated function to allow the
use of \fBrealpath\fP even on those platforms that don’t ship an
appropriate command (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2932'\fI\%#2932\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2932\fP>\X'tty: link').
.IP \(bu 2
Alt\-# toggles the current command line between commented and
uncommented states, making it easy to save a command in history
without executing it.
.IP \(bu 2
The \fBfish_vi_mode\fP function is now deprecated in favour of
\fBfish_vi_key_bindings\fP\&.
.UNINDENT
.SS Other notable fixes and improvements
.INDENT 0.0
.IP \(bu 2
Fix the build on Cygwin (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2952'\fI\%#2952\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2952\fP>\X'tty: link') and RedHat Enterprise Linux/CentOS 5
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/2955'\fI\%#2955\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2955\fP>\X'tty: link').
.IP \(bu 2
Avoid confusing the terminal line driver with non\-printing characters
in \fBfish_title\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2453'\fI\%#2453\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2453\fP>\X'tty: link').
.IP \(bu 2
Improved completions for busctl, git (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2585'\fI\%#2585\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2585\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/2879'\fI\%#2879\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2879\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/2984'\fI\%#2984\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2984\fP>\X'tty: link'), and
netctl.
.UNINDENT

.sp
.ce
----

.ce 0
.sp
.SH FISH 2.3B1 (RELEASED APRIL 19, 2016)
.SS Significant Changes
.INDENT 0.0
.IP \(bu 2
A new \fBstring\fP builtin to handle… strings! This builtin will
measure, split, search and replace text strings, including using
regular expressions. It can also be used to turn lists into plain
strings using \fBjoin\fP\&. \fBstring\fP can be used in place of \fBsed\fP,
\fBgrep\fP, \fBtr\fP, \fBcut\fP, and \fBawk\fP in many situations. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2296'\fI\%#2296\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2296\fP>\X'tty: link')
.IP \(bu 2
Allow using escape as the Meta modifier key, by waiting after seeing
an escape character wait up to 300ms for an additional character.
This is consistent with readline (e.g.\ bash) and can be configured
via the \fBfish_escape_delay_ms variable\fP\&. This allows using escape
as the Meta modifier. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1356'\fI\%#1356\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1356\fP>\X'tty: link')
.IP \(bu 2
Add new directories for vendor functions and configuration snippets
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/2500'\fI\%#2500\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2500\fP>\X'tty: link')
.IP \(bu 2
A new \fBfish_realpath\fP builtin and associated \fBrealpath\fP function
should allow scripts to resolve path names via \fBrealpath\fP
regardless of whether there is an external command of that name;
albeit with some limitations. See the associated documentation.
.UNINDENT
.SS Backward\-incompatible changes
.INDENT 0.0
.IP \(bu 2
Unmatched globs will now cause an error, except when used with
\fBfor\fP, \fBset\fP or \fBcount\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2719'\fI\%#2719\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2719\fP>\X'tty: link')
.IP \(bu 2
\fBand\fP and \fBor\fP will now bind to the closest \fBif\fP or \fBwhile\fP,
allowing compound conditions without \fBbegin\fP and \fBend\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1428'\fI\%#1428\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1428\fP>\X'tty: link')
.IP \(bu 2
\fBset \-ql\fP now searches up to function scope for variables (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2502'\fI\%#2502\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2502\fP>\X'tty: link')
.IP \(bu 2
\fBstatus \-f\fP will now behave the same when run as the main script or
using \fBsource\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2643'\fI\%#2643\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2643\fP>\X'tty: link')
.IP \(bu 2
\fBsource\fP no longer puts the file name in \fB$argv\fP if no arguments
are given (\X'tty: link https://github.com/fish-shell/fish-shell/issues/139'\fI\%#139\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/139\fP>\X'tty: link')
.IP \(bu 2
History files are stored under the \fBXDG_DATA_HOME\fP hierarchy (by
default, in \fB~/.local/share\fP), and existing history will be moved
on first use (\X'tty: link https://github.com/fish-shell/fish-shell/issues/744'\fI\%#744\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/744\fP>\X'tty: link')
.UNINDENT
.SS Other notable fixes and improvements
.INDENT 0.0
.IP \(bu 2
Fish no longer silences errors in config.fish (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2702'\fI\%#2702\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2702\fP>\X'tty: link')
.IP \(bu 2
Directory autosuggestions will now descend as far as possible if
there is only one child directory (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2531'\fI\%#2531\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2531\fP>\X'tty: link')
.IP \(bu 2
Add support for bright colors (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1464'\fI\%#1464\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1464\fP>\X'tty: link')
.IP \(bu 2
Allow Ctrl\-J (\fB\ecj\fP) to be bound separately from Ctrl\-M
(\fB\ecm\fP) (\X'tty: link https://github.com/fish-shell/fish-shell/issues/217'\fI\%#217\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/217\fP>\X'tty: link')
.IP \(bu 2
psub now has a “\-s”/“–suffix” option to name the temporary file with
that suffix
.IP \(bu 2
Enable 24\-bit colors on select terminals (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2495'\fI\%#2495\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2495\fP>\X'tty: link')
.IP \(bu 2
Support for SVN status in the prompt (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2582'\fI\%#2582\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2582\fP>\X'tty: link')
.IP \(bu 2
Mercurial and SVN support have been added to the Classic + Git (now
Classic + VCS) prompt (via the new __fish_vcs_prompt function)
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/2592'\fI\%#2592\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2592\fP>\X'tty: link')
.IP \(bu 2
export now handles variables with a “=” in the value (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2403'\fI\%#2403\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2403\fP>\X'tty: link')
.IP \(bu 2
New completions for:
.INDENT 2.0
.IP \(bu 2
alsactl
.IP \(bu 2
Archlinux’s asp, makepkg
.IP \(bu 2
Atom’s apm (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2390'\fI\%#2390\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2390\fP>\X'tty: link')
.IP \(bu 2
entr \- the “Event Notify Test Runner” (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2265'\fI\%#2265\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2265\fP>\X'tty: link')
.IP \(bu 2
Fedora’s dnf (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2638'\fI\%#2638\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2638\fP>\X'tty: link')
.IP \(bu 2
OSX diskutil (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2738'\fI\%#2738\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2738\fP>\X'tty: link')
.IP \(bu 2
pkgng (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2395'\fI\%#2395\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2395\fP>\X'tty: link')
.IP \(bu 2
pulseaudio’s pacmd and pactl
.IP \(bu 2
rust’s rustc and cargo (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2409'\fI\%#2409\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2409\fP>\X'tty: link')
.IP \(bu 2
sysctl (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2214'\fI\%#2214\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2214\fP>\X'tty: link')
.IP \(bu 2
systemd’s machinectl (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2158'\fI\%#2158\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2158\fP>\X'tty: link'), busctl (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2144'\fI\%#2144\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2144\fP>\X'tty: link'), systemd\-nspawn,
systemd\-analyze, localectl, timedatectl
.IP \(bu 2
and more
.UNINDENT
.IP \(bu 2
Fish no longer has a function called sgrep, freeing it for user
customization (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2245'\fI\%#2245\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2245\fP>\X'tty: link')
.IP \(bu 2
A rewrite of the completions for cd, fixing a few bugs (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2299'\fI\%#2299\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2299\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/2300'\fI\%#2300\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2300\fP>\X'tty: link',
\X'tty: link https://github.com/fish-shell/fish-shell/issues/562'\fI\%#562\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/562\fP>\X'tty: link')
.IP \(bu 2
Linux VTs now run in a simplified mode to avoid issues (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2311'\fI\%#2311\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2311\fP>\X'tty: link')
.IP \(bu 2
The vi\-bindings now inherit from the emacs bindings
.IP \(bu 2
Fish will also execute \fBfish_user_key_bindings\fP when in vi\-mode
.IP \(bu 2
\fBfunced\fP will now also check $VISUAL (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2268'\fI\%#2268\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2268\fP>\X'tty: link')
.IP \(bu 2
A new \fBsuspend\fP function (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2269'\fI\%#2269\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2269\fP>\X'tty: link')
.IP \(bu 2
Subcommand completion now works better with split /usr (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2141'\fI\%#2141\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2141\fP>\X'tty: link')
.IP \(bu 2
The command\-not\-found\-handler can now be overridden by defining a
function called \fB__fish_command_not_found_handler\fP in config.fish
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/2332'\fI\%#2332\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2332\fP>\X'tty: link')
.IP \(bu 2
A few fixes to the Sorin theme
.IP \(bu 2
PWD shortening in the prompt can now be configured via the
\fBfish_prompt_pwd_dir_length\fP variable, set to the length per path
component (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2473'\fI\%#2473\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2473\fP>\X'tty: link')
.IP \(bu 2
fish no longer requires \fB/etc/fish/config.fish\fP to correctly start,
and now ships a skeleton file that only contains some documentation
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/2799'\fI\%#2799\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2799\fP>\X'tty: link')
.UNINDENT

.sp
.ce
----

.ce 0
.sp
.SH FISH 2.2.0 (RELEASED JULY 12, 2015)
.SS Significant changes
.INDENT 0.0
.IP \(bu 2
Abbreviations: the new \fBabbr\fP command allows for
interactively\-expanded abbreviations, allowing quick access to
frequently\-used commands (\X'tty: link https://github.com/fish-shell/fish-shell/issues/731'\fI\%#731\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/731\fP>\X'tty: link').
.IP \(bu 2
Vi mode: run \fBfish_vi_mode\fP to switch fish into the key bindings
and prompt familiar to users of the Vi editor (\X'tty: link https://github.com/fish-shell/fish-shell/issues/65'\fI\%#65\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/65\fP>\X'tty: link').
.IP \(bu 2
New inline and interactive pager, which will be familiar to users of
zsh (\X'tty: link https://github.com/fish-shell/fish-shell/issues/291'\fI\%#291\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/291\fP>\X'tty: link').
.IP \(bu 2
Underlying architectural changes: the \fBfishd\fP universal variable
server has been removed as it was a source of many bugs and security
problems. Notably, old fish sessions will not be able to communicate
universal variable changes with new fish sessions. For best results,
restart all running instances of \fBfish\fP\&.
.IP \(bu 2
The web\-based configuration tool has been redesigned, featuring a
prompt theme chooser and other improvements.
.IP \(bu 2
New German, Brazilian Portuguese, and Chinese translations.
.UNINDENT
.SS Backward\-incompatible changes
.sp
These are kept to a minimum, but either change undocumented features or
are too hard to use in their existing forms. These changes may break
existing scripts.
.INDENT 0.0
.IP \(bu 2
\fBcommandline\fP no longer interprets functions “in reverse”, instead
behaving as expected (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1567'\fI\%#1567\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1567\fP>\X'tty: link').
.IP \(bu 2
The previously\-undocumented \fBCMD_DURATION\fP variable is now set for
all commands and contains the execution time of the last command in
milliseconds (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1585'\fI\%#1585\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1585\fP>\X'tty: link'). It is no longer exported to other commands
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/1896'\fI\%#1896\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1896\fP>\X'tty: link').
.IP \(bu 2
\fBif\fP / \fBelse\fP conditional statements now return values consistent
with the Single Unix Specification, like other shells (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1443'\fI\%#1443\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1443\fP>\X'tty: link').
.IP \(bu 2
A new “top\-level” local scope has been added, allowing local
variables declared on the commandline to be visible to subsequent
commands. (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1908'\fI\%#1908\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1908\fP>\X'tty: link')
.UNINDENT
.SS Other notable fixes and improvements
.INDENT 0.0
.IP \(bu 2
New documentation design (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1662'\fI\%#1662\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1662\fP>\X'tty: link'), which requires a Doxygen version
1.8.7 or newer to build.
.IP \(bu 2
Fish now defines a default directory for other packages to provide
completions. By default this is
\fB/usr/share/fish/vendor\-completions.d\fP; on systems with
\fBpkgconfig\fP installed this path is discoverable with
\fBpkg\-config \-\-variable completionsdir fish\fP\&.
.IP \(bu 2
A new parser removes many bugs; all existing syntax should keep
working.
.IP \(bu 2
New \fBfish_preexec\fP and \fBfish_postexec\fP events are fired before
and after job execution respectively (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1549'\fI\%#1549\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1549\fP>\X'tty: link').
.IP \(bu 2
Unmatched wildcards no longer prevent a job from running. Wildcards
used interactively will still print an error, but the job will
proceed and the wildcard will expand to zero arguments (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1482'\fI\%#1482\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1482\fP>\X'tty: link').
.IP \(bu 2
The \fB\&.\fP command is deprecated and the \fBsource\fP command is
preferred (\X'tty: link https://github.com/fish-shell/fish-shell/issues/310'\fI\%#310\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/310\fP>\X'tty: link').
.IP \(bu 2
\fBbind\fP supports “bind modes”, which allows bindings to be set for a
particular named mode, to support the implementation of Vi mode.
.IP \(bu 2
A new \fBexport\fP alias, which behaves like other shells (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1833'\fI\%#1833\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1833\fP>\X'tty: link').
.IP \(bu 2
\fBcommand\fP has a new \fB\-\-search\fP option to print the name of the
disk file that would be executed, like other shells’ \fBcommand \-v\fP
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/1540'\fI\%#1540\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1540\fP>\X'tty: link').
.IP \(bu 2
\fBcommandline\fP has a new \fB\-\-paging\-mode\fP option to support the new
pager.
.IP \(bu 2
\fBcomplete\fP has a new \fB\-\-wraps\fP option, which allows a command to
(recursively) inherit the completions of a wrapped command (\X'tty: link https://github.com/fish-shell/fish-shell/issues/393'\fI\%#393\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/393\fP>\X'tty: link'),
and \fBcomplete \-e\fP now correctly erases completions (\X'tty: link https://github.com/fish-shell/fish-shell/issues/380'\fI\%#380\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/380\fP>\X'tty: link').
.IP \(bu 2
Completions are now generated from manual pages by default on the
first run of fish (\X'tty: link https://github.com/fish-shell/fish-shell/issues/997'\fI\%#997\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/997\fP>\X'tty: link').
.IP \(bu 2
\fBfish_indent\fP can now produce colorized (\fB\-\-ansi\fP) and HTML
(\fB\-\-html\fP) output (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1827'\fI\%#1827\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1827\fP>\X'tty: link').
.IP \(bu 2
\fBfunctions \-\-erase\fP now prevents autoloaded functions from being
reloaded in the current session.
.IP \(bu 2
\fBhistory\fP has a new \fB\-\-merge\fP option, to incorporate history from
other sessions into the current session (\X'tty: link https://github.com/fish-shell/fish-shell/issues/825'\fI\%#825\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/825\fP>\X'tty: link').
.IP \(bu 2
\fBjobs\fP returns 1 if there are no active jobs (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1484'\fI\%#1484\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1484\fP>\X'tty: link').
.IP \(bu 2
\fBread\fP has several new options:
.IP \(bu 2
\fB\-\-array\fP to break input into an array (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1540'\fI\%#1540\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1540\fP>\X'tty: link')
.IP \(bu 2
\fB\-\-null\fP to break lines on NUL characters rather than newlines
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/1694'\fI\%#1694\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1694\fP>\X'tty: link')
.IP \(bu 2
\fB\-\-nchars\fP to read a specific number of characters (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1616'\fI\%#1616\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1616\fP>\X'tty: link')
.IP \(bu 2
\fB\-\-right\-prompt\fP to display a right\-hand\-side prompt during
interactive read (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1698'\fI\%#1698\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1698\fP>\X'tty: link').
.IP \(bu 2
\fBtype\fP has a new \fB\-q\fP option to suppress output (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1540'\fI\%#1540\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1540\fP>\X'tty: link' and, like
other shells, \fBtype \-a\fP now prints all matches for a command
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/261'\fI\%#261\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/261\fP>\X'tty: link').
.IP \(bu 2
Pressing \fBf1\fP now shows the manual page for the current command
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/1063'\fI\%#1063\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1063\fP>\X'tty: link').
.IP \(bu 2
\fBfish_title\fP functions have access to the arguments of the
currently running argument as \fB$argv[1]\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1542'\fI\%#1542\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1542\fP>\X'tty: link').
.IP \(bu 2
The OS command\-not\-found handler is used on Arch Linux (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1925'\fI\%#1925\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1925\fP>\X'tty: link'), nixOS
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/1852'\fI\%#1852\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1852\fP>\X'tty: link'), openSUSE and Fedora (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1280'\fI\%#1280\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1280\fP>\X'tty: link').
.IP \(bu 2
\fBAlt\fP+\fB\&.\fP searches backwards in the token history, mapping to
the same behavior as inserting the last argument of the previous
command, like other shells (\X'tty: link https://github.com/fish-shell/fish-shell/issues/89'\fI\%#89\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/89\fP>\X'tty: link').
.IP \(bu 2
The \fBSHLVL\fP environment variable is incremented correctly (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1634'\fI\%#1634\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1634\fP>\X'tty: link' &
\X'tty: link https://github.com/fish-shell/fish-shell/issues/1693'\fI\%#1693\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1693\fP>\X'tty: link').
.IP \(bu 2
Added completions for \fBadb\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1165'\fI\%#1165\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1165\fP>\X'tty: link' & \X'tty: link https://github.com/fish-shell/fish-shell/issues/1211'\fI\%#1211\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1211\fP>\X'tty: link'), \fBapt\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2018'\fI\%#2018\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2018\fP>\X'tty: link'),
\fBaura\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1292'\fI\%#1292\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1292\fP>\X'tty: link'), \fBcomposer\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1607'\fI\%#1607\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1607\fP>\X'tty: link'), \fBcygport\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1841'\fI\%#1841\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1841\fP>\X'tty: link'),
\fBdropbox\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1533'\fI\%#1533\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1533\fP>\X'tty: link'), \fBelixir\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1167'\fI\%#1167\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1167\fP>\X'tty: link'), \fBfossil\fP, \fBheroku\fP
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/1790'\fI\%#1790\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1790\fP>\X'tty: link'), \fBiex\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1167'\fI\%#1167\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1167\fP>\X'tty: link'), \fBkitchen\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/2000'\fI\%#2000\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/2000\fP>\X'tty: link'), \fBnix\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1167'\fI\%#1167\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1167\fP>\X'tty: link'),
\fBnode\fP/\fBnpm\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1566'\fI\%#1566\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1566\fP>\X'tty: link'), \fBopam\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1615'\fI\%#1615\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1615\fP>\X'tty: link'), \fBsetfacl\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1752'\fI\%#1752\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1752\fP>\X'tty: link'),
\fBtmuxinator\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1863'\fI\%#1863\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1863\fP>\X'tty: link'), and \fByast2\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1739'\fI\%#1739\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1739\fP>\X'tty: link').
.IP \(bu 2
Improved completions for \fBbrew\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1090'\fI\%#1090\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1090\fP>\X'tty: link' & \X'tty: link https://github.com/fish-shell/fish-shell/issues/1810'\fI\%#1810\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1810\fP>\X'tty: link'), \fBbundler\fP
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/1779'\fI\%#1779\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1779\fP>\X'tty: link'), \fBcd\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1135'\fI\%#1135\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1135\fP>\X'tty: link'), \fBemerge\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1840'\fI\%#1840\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1840\fP>\X'tty: link'),\fBgit\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1680'\fI\%#1680\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1680\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/1834'\fI\%#1834\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1834\fP>\X'tty: link' &
\X'tty: link https://github.com/fish-shell/fish-shell/issues/1951'\fI\%#1951\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1951\fP>\X'tty: link'), \fBman\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/960'\fI\%#960\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/960\fP>\X'tty: link'), \fBmodprobe\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1124'\fI\%#1124\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1124\fP>\X'tty: link'), \fBpacman\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1292'\fI\%#1292\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1292\fP>\X'tty: link'),
\fBrpm\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1236'\fI\%#1236\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1236\fP>\X'tty: link'), \fBrsync\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1872'\fI\%#1872\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1872\fP>\X'tty: link'), \fBscp\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1145'\fI\%#1145\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1145\fP>\X'tty: link'), \fBssh\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1234'\fI\%#1234\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1234\fP>\X'tty: link'),
\fBsshfs\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1268'\fI\%#1268\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1268\fP>\X'tty: link'), \fBsystemctl\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1462'\fI\%#1462\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1462\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/1950'\fI\%#1950\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1950\fP>\X'tty: link' & \X'tty: link https://github.com/fish-shell/fish-shell/issues/1972'\fI\%#1972\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1972\fP>\X'tty: link'), \fBtmux\fP
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/1853'\fI\%#1853\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1853\fP>\X'tty: link'), \fBvagrant\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1748'\fI\%#1748\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1748\fP>\X'tty: link'), \fByum\fP (\X'tty: link https://github.com/fish-shell/fish-shell/issues/1269'\fI\%#1269\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1269\fP>\X'tty: link'), and \fBzypper\fP
(\X'tty: link https://github.com/fish-shell/fish-shell/issues/1787'\fI\%#1787\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1787\fP>\X'tty: link').
.UNINDENT

.sp
.ce
----

.ce 0
.sp
.SH FISH 2.1.2 (RELEASED FEB 24, 2015)
.sp
fish 2.1.2 contains a workaround for a filesystem bug in Mac OS X
Yosemite. \X'tty: link https://github.com/fish-shell/fish-shell/issues/1859'\fI\%#1859\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1859\fP>\X'tty: link'
.sp
Specifically, after installing fish 2.1.1 and then rebooting, “Verify
Disk” in Disk Utility will report “Invalid number of hard links.” We
don’t have any reports of data loss or other adverse consequences. fish
2.1.2 avoids triggering the bug, but does not repair an already affected
filesystem. To repair the filesystem, you can boot into Recovery Mode
and use Repair Disk from Disk Utility. Linux and versions of OS X prior
to Yosemite are believed to be unaffected.
.sp
There are no other changes in this release.

.sp
.ce
----

.ce 0
.sp
.SH FISH 2.1.1 (RELEASED SEPTEMBER 26, 2014)
.sp
\fBImportant:\fP if you are upgrading, stop all running instances of
\fBfishd\fP as soon as possible after installing this release; it will be
restarted automatically. On most systems, there will be no further
action required. Note that some environments (where \fBXDG_RUNTIME_DIR\fP
is set), such as Fedora 20, will require a restart of all running fish
processes before universal variables work as intended.
.sp
Distributors are highly encouraged to call \fBkillall fishd\fP,
\fBpkill fishd\fP or similar in installation scripts, or to warn their
users to do so.
.SS Security fixes
.INDENT 0.0
.IP \(bu 2
The fish_config web interface now uses an authentication token to
protect requests and only responds to requests from the local machine
with this token, preventing a remote code execution attack. (closing
CVE\-2014\-2914). \X'tty: link https://github.com/fish-shell/fish-shell/issues/1438'\fI\%#1438\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1438\fP>\X'tty: link'
.IP \(bu 2
\fBpsub\fP and \fBfunced\fP are no longer vulnerable to attacks which
allow local privilege escalation and data tampering (closing
CVE\-2014\-2906 and CVE\-2014\-3856). \X'tty: link https://github.com/fish-shell/fish-shell/issues/1437'\fI\%#1437\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1437\fP>\X'tty: link'
.IP \(bu 2
\fBfishd\fP uses a secure path for its socket, preventing a local
privilege escalation attack (closing CVE\-2014\-2905). \X'tty: link https://github.com/fish-shell/fish-shell/issues/1436'\fI\%#1436\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1436\fP>\X'tty: link'
.IP \(bu 2
\fB__fish_print_packages\fP is no longer vulnerable to attacks which
would allow local privilege escalation and data tampering (closing
CVE\-2014\-3219). \X'tty: link https://github.com/fish-shell/fish-shell/issues/1440'\fI\%#1440\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1440\fP>\X'tty: link'
.UNINDENT
.SS Other fixes
.INDENT 0.0
.IP \(bu 2
\fBfishd\fP now ignores SIGPIPE, fixing crashes using tools like GNU
Parallel and which occurred more often as a result of the other
\fBfishd\fP changes. \X'tty: link https://github.com/fish-shell/fish-shell/issues/1084'\fI\%#1084\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1084\fP>\X'tty: link' & \X'tty: link https://github.com/fish-shell/fish-shell/issues/1690'\fI\%#1690\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1690\fP>\X'tty: link'
.UNINDENT

.sp
.ce
----

.ce 0
.sp
.SH FISH 2.1.0
.SS Significant Changes
.INDENT 0.0
.IP \(bu 2
\fBTab completions will fuzzy\-match files.\fP \X'tty: link https://github.com/fish-shell/fish-shell/issues/568'\fI\%#568\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/568\fP>\X'tty: link'
.sp
When tab\-completing a file, fish will first attempt prefix matches
(\fBfoo\fP matches \fBfoobar\fP), then substring matches (\fBooba\fP
matches \fBfoobar\fP), and lastly subsequence matches (\fBfbr\fP matches
\fBfoobar\fP). For example, in a directory with files foo1.txt,
foo2.txt, foo3.txt…, you can type only the numeric part and hit tab
to fill in the rest.
.sp
This feature is implemented for files and executables. It is not yet
implemented for options (like \fB\-\-foobar\fP), and not yet implemented
across path components (like \fB/u/l/b\fP to match \fB/usr/local/bin\fP).
.IP \(bu 2
\fBRedirections now work better across pipelines.\fP \X'tty: link https://github.com/fish-shell/fish-shell/issues/110'\fI\%#110\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/110\fP>\X'tty: link', \X'tty: link https://github.com/fish-shell/fish-shell/issues/877'\fI\%#877\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/877\fP>\X'tty: link'
.sp
In particular, you can pipe stderr and stdout together, for example,
with \fBcmd ^&1 | tee log.txt\fP, or the more familiar
\fBcmd 2>&1 | tee log.txt\fP\&.
.IP \(bu 2
\fBA single \(ga\(ga%\(ga\(ga now expands to the last job backgrounded.\fP \X'tty: link https://github.com/fish-shell/fish-shell/issues/1008'\fI\%#1008\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/1008\fP>\X'tty: link'
.sp
Previously, a single \fB%\fP would pid\-expand to either all
backgrounded jobs, or all jobs owned by your user. Now it expands to
the last job backgrounded. If no job is in the background, it will
fail to expand. In particular, \fBfg %\fP can be used to put the most
recent background job in the foreground.
.UNINDENT
.SS Other Notable Fixes
.INDENT 0.0
.IP \(bu 2
alt\-U and alt+C now uppercase and capitalize words, respectively.
\X'tty: link https://github.com/fish-shell/fish-shell/issues/995'\fI\%#995\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/995\fP>\X'tty: link'
.IP \(bu 2
VTE based terminals should now know the working directory. \X'tty: link https://github.com/fish-shell/fish-shell/issues/906'\fI\%#906\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/906\fP>\X'tty: link'
.IP \(bu 2
The autotools build now works on Mavericks. \X'tty: link https://github.com/fish-shell/fish-shell/issues/968'\fI\%#968\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/968\fP>\X'tty: link'
.IP \(bu 2
The end\-of\-line binding (ctrl+E) now accepts autosuggestions. \X'tty: link https://github.com/fish-shell/fish-shell/issues/932'\fI\%#932\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/932\fP>\X'tty: link'
.IP \(bu 2
Directories in \fB/etc/paths\fP (used on OS X) are now prepended
instead of appended, similar to other shells. \X'tty: link https://github.com/fish-shell/fish-shell/issues/927'\fI\%#927\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/927\fP>\X'tty: link'
.IP \(bu 2
Option\-right\-arrow (used for partial autosuggestion completion) now
works on iTerm2. \X'tty: link https://github.com/fish-shell/fish-shell/issues/920'\fI\%#920\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/920\fP>\X'tty: link'
.IP \(bu 2
Tab completions now work properly within nested subcommands. \X'tty: link https://github.com/fish-shell/fish-shell/issues/913'\fI\%#913\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/913\fP>\X'tty: link'
.IP \(bu 2
\fBprintf\fP supports \fB\ee\fP, the escape character. \X'tty: link https://github.com/fish-shell/fish-shell/issues/910'\fI\%#910\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/910\fP>\X'tty: link'
.IP \(bu 2
\fBfish_config history\fP no longer shows duplicate items. \X'tty: link https://github.com/fish-shell/fish-shell/issues/900'\fI\%#900\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/900\fP>\X'tty: link'
.IP \(bu 2
\fB$fish_user_paths\fP is now prepended to $PATH instead of appended.
\X'tty: link https://github.com/fish-shell/fish-shell/issues/888'\fI\%#888\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/888\fP>\X'tty: link'
.IP \(bu 2
Jobs complete when all processes complete. \X'tty: link https://github.com/fish-shell/fish-shell/issues/876'\fI\%#876\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/876\fP>\X'tty: link'
.sp
For example, in previous versions of fish, \fBsleep 10 | echo Done\fP
returns control immediately, because echo does not read from stdin.
Now it does not complete until sleep exits (presumably after 10
seconds).
.IP \(bu 2
Better error reporting for square brackets. \X'tty: link https://github.com/fish-shell/fish-shell/issues/875'\fI\%#875\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/875\fP>\X'tty: link'
.IP \(bu 2
fish no longer tries to add \fB/bin\fP to \fB$PATH\fP unless PATH is
totally empty. \X'tty: link https://github.com/fish-shell/fish-shell/issues/852'\fI\%#852\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/852\fP>\X'tty: link'
.IP \(bu 2
History token substitution (alt\-up) now works correctly inside
subshells. \X'tty: link https://github.com/fish-shell/fish-shell/issues/833'\fI\%#833\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/833\fP>\X'tty: link'
.IP \(bu 2
Flow control is now disabled, freeing up ctrl\-S and ctrl\-Q for other
uses. \X'tty: link https://github.com/fish-shell/fish-shell/issues/814'\fI\%#814\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/814\fP>\X'tty: link'
.IP \(bu 2
sh\-style variable setting like \fBfoo=bar\fP now produces better error
messages. \X'tty: link https://github.com/fish-shell/fish-shell/issues/809'\fI\%#809\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/809\fP>\X'tty: link'
.IP \(bu 2
Commands with wildcards no longer produce autosuggestions. \X'tty: link https://github.com/fish-shell/fish-shell/issues/785'\fI\%#785\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/785\fP>\X'tty: link'
.IP \(bu 2
funced no longer freaks out when supplied with no arguments. \X'tty: link https://github.com/fish-shell/fish-shell/issues/780'\fI\%#780\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/780\fP>\X'tty: link'
.IP \(bu 2
fish.app now works correctly in a directory containing spaces. \X'tty: link https://github.com/fish-shell/fish-shell/issues/774'\fI\%#774\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/774\fP>\X'tty: link'
.IP \(bu 2
Tab completion cycling no longer occasionally fails to repaint. \X'tty: link https://github.com/fish-shell/fish-shell/issues/765'\fI\%#765\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/765\fP>\X'tty: link'
.IP \(bu 2
Comments now work in eval’d strings. \X'tty: link https://github.com/fish-shell/fish-shell/issues/684'\fI\%#684\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/684\fP>\X'tty: link'
.IP \(bu 2
History search (up\-arrow) now shows the item matching the
autosuggestion, if that autosuggestion was truncated. \X'tty: link https://github.com/fish-shell/fish-shell/issues/650'\fI\%#650\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/650\fP>\X'tty: link'
.IP \(bu 2
Ctrl\-T now transposes characters, as in other shells. \X'tty: link https://github.com/fish-shell/fish-shell/issues/128'\fI\%#128\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/128\fP>\X'tty: link'
.UNINDENT

.sp
.ce
----

.ce 0
.sp
.SH FISH 2.0.0
.SS Significant Changes
.INDENT 0.0
.IP \(bu 2
\fBCommand substitutions now modify \(ga\(ga$status\(ga\(ga :issue:\(ga547\(ga.\fP Previously the
exit status of command substitutions (like \fB(pwd)\fP) was ignored;
however now it modifies $status. Furthermore, the \fBset\fP command now
only sets $status on failure; it is untouched on success. This allows
for the following pattern:
.INDENT 2.0
.INDENT 3.5
.sp
.EX
if set python_path (which python)
   ...
end
.EE
.UNINDENT
.UNINDENT
.sp
Because set does not modify $status on success, the if branch
effectively tests whether \fBwhich\fP succeeded, and if so, whether the
\fBset\fP also succeeded.
.IP \(bu 2
Improvements to PATH handling. There is a new variable, fish_user_paths,
which can be set universally, and whose contents are appended to
$PATH \X'tty: link https://github.com/fish-shell/fish-shell/issues/527'\fI\%#527\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/527\fP>\X'tty: link'
.INDENT 2.0
.IP \(bu 2
/etc/paths and /etc/paths.d are now respected on OS X
.IP \(bu 2
fish no longer modifies $PATH to find its own binaries
.UNINDENT
.IP \(bu 2
\fBLong lines no longer use ellipsis for line breaks\fP, and copy and
paste should no longer include a newline even if the line was broken
\X'tty: link https://github.com/fish-shell/fish-shell/issues/300'\fI\%#300\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/300\fP>\X'tty: link'
.IP \(bu 2
\fBNew syntax for index ranges\fP (sometimes known as “slices”) \X'tty: link https://github.com/fish-shell/fish-shell/issues/212'\fI\%#212\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/212\fP>\X'tty: link'
.IP \(bu 2
\fBfish now supports an \(ga\(gaelse if\(ga\(ga statement\fP \X'tty: link https://github.com/fish-shell/fish-shell/issues/134'\fI\%#134\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/134\fP>\X'tty: link'
.IP \(bu 2
\fBProcess and pid completion now works on OS X\fP \X'tty: link https://github.com/fish-shell/fish-shell/issues/129'\fI\%#129\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/129\fP>\X'tty: link'
.IP \(bu 2
\fBfish is now relocatable\fP, and no longer depends on compiled\-in
paths \X'tty: link https://github.com/fish-shell/fish-shell/issues/125'\fI\%#125\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/125\fP>\X'tty: link'
.IP \(bu 2
\fBfish now supports a right prompt (RPROMPT)\fP through the
fish_right_prompt function \X'tty: link https://github.com/fish-shell/fish-shell/issues/80'\fI\%#80\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/80\fP>\X'tty: link'
.IP \(bu 2
\fBfish now uses posix_spawn instead of fork when possible\fP, which is
much faster on BSD and OS X \X'tty: link https://github.com/fish-shell/fish-shell/issues/11'\fI\%#11\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/11\fP>\X'tty: link'
.UNINDENT
.SS Other Notable Fixes
.INDENT 0.0
.IP \(bu 2
Updated VCS completions (darcs, cvs, svn, etc.)
.IP \(bu 2
Avoid calling getcwd on the main thread, as it can hang \X'tty: link https://github.com/fish-shell/fish-shell/issues/696'\fI\%#696\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/696\fP>\X'tty: link'
.IP \(bu 2
Control\-D (forward delete) no longer stops at a period \X'tty: link https://github.com/fish-shell/fish-shell/issues/667'\fI\%#667\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/667\fP>\X'tty: link'
.IP \(bu 2
Completions for many new commands
.IP \(bu 2
fish now respects rxvt’s unique keybindings \X'tty: link https://github.com/fish-shell/fish-shell/issues/657'\fI\%#657\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/657\fP>\X'tty: link'
.IP \(bu 2
xsel is no longer built as part of fish. It will still be invoked if
installed separately \X'tty: link https://github.com/fish-shell/fish-shell/issues/633'\fI\%#633\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/633\fP>\X'tty: link'
.IP \(bu 2
__fish_filter_mime no longer spews \X'tty: link https://github.com/fish-shell/fish-shell/issues/628'\fI\%#628\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/628\fP>\X'tty: link'
.IP \(bu 2
The –no\-execute option to fish no longer falls over when reaching the
end of a block \X'tty: link https://github.com/fish-shell/fish-shell/issues/624'\fI\%#624\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/624\fP>\X'tty: link'
.IP \(bu 2
fish_config knows how to find fish even if it’s not in the $PATH \X'tty: link https://github.com/fish-shell/fish-shell/issues/621'\fI\%#621\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/621\fP>\X'tty: link'
.IP \(bu 2
A leading space now prevents writing to history, as is done in bash
and zsh \X'tty: link https://github.com/fish-shell/fish-shell/issues/615'\fI\%#615\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/615\fP>\X'tty: link'
.IP \(bu 2
Hitting enter after a backslash only goes to a new line if it is
followed by whitespace or the end of the line \X'tty: link https://github.com/fish-shell/fish-shell/issues/613'\fI\%#613\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/613\fP>\X'tty: link'
.IP \(bu 2
printf is now a builtin \X'tty: link https://github.com/fish-shell/fish-shell/issues/611'\fI\%#611\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/611\fP>\X'tty: link'
.IP \(bu 2
Event handlers should no longer fire if signals are blocked \X'tty: link https://github.com/fish-shell/fish-shell/issues/608'\fI\%#608\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/608\fP>\X'tty: link'
.IP \(bu 2
set_color is now a builtin \X'tty: link https://github.com/fish-shell/fish-shell/issues/578'\fI\%#578\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/578\fP>\X'tty: link'
.IP \(bu 2
man page completions are now located in a new generated_completions
directory, instead of your completions directory \X'tty: link https://github.com/fish-shell/fish-shell/issues/576'\fI\%#576\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/576\fP>\X'tty: link'
.IP \(bu 2
tab now clears autosuggestions \X'tty: link https://github.com/fish-shell/fish-shell/issues/561'\fI\%#561\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/561\fP>\X'tty: link'
.IP \(bu 2
tab completion from within a pair of quotes now attempts to
“appropriate” the closing quote \X'tty: link https://github.com/fish-shell/fish-shell/issues/552'\fI\%#552\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/552\fP>\X'tty: link'
.IP \(bu 2
$EDITOR can now be a list: for example, \fBset EDITOR gvim \-f\fP) \X'tty: link https://github.com/fish-shell/fish-shell/issues/541'\fI\%#541\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/541\fP>\X'tty: link'
.IP \(bu 2
\fBcase\fP bodies are now indented \X'tty: link https://github.com/fish-shell/fish-shell/issues/530'\fI\%#530\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/530\fP>\X'tty: link'
.IP \(bu 2
The profile switch \fB\-p\fP no longer crashes \X'tty: link https://github.com/fish-shell/fish-shell/issues/517'\fI\%#517\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/517\fP>\X'tty: link'
.IP \(bu 2
You can now control\-C out of \fBread\fP \X'tty: link https://github.com/fish-shell/fish-shell/issues/516'\fI\%#516\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/516\fP>\X'tty: link'
.IP \(bu 2
\fBumask\fP is now functional on OS X \X'tty: link https://github.com/fish-shell/fish-shell/issues/515'\fI\%#515\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/515\fP>\X'tty: link'
.IP \(bu 2
Avoid calling getpwnam on the main thread, as it can hang \X'tty: link https://github.com/fish-shell/fish-shell/issues/512'\fI\%#512\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/512\fP>\X'tty: link'
.IP \(bu 2
Alt\-F or Alt\-right\-arrow (Option\-F or option\-right\-arrow) now accepts
one word of an autosuggestion \X'tty: link https://github.com/fish-shell/fish-shell/issues/435'\fI\%#435\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/435\fP>\X'tty: link'
.IP \(bu 2
Setting fish as your login shell no longer kills OpenSUSE \X'tty: link https://github.com/fish-shell/fish-shell/issues/367'\fI\%#367\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/367\fP>\X'tty: link'
.IP \(bu 2
Backslashes now join lines, instead of creating multiple commands
\X'tty: link https://github.com/fish-shell/fish-shell/issues/347'\fI\%#347\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/347\fP>\X'tty: link'
.IP \(bu 2
echo now implements the \-e flag to interpret escapes \X'tty: link https://github.com/fish-shell/fish-shell/issues/337'\fI\%#337\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/337\fP>\X'tty: link'
.IP \(bu 2
When the last token in the user’s input contains capital letters, use
its case in preference to that of the autosuggestion \X'tty: link https://github.com/fish-shell/fish-shell/issues/335'\fI\%#335\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/335\fP>\X'tty: link'
.IP \(bu 2
Descriptions now have their own muted color \X'tty: link https://github.com/fish-shell/fish-shell/issues/279'\fI\%#279\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/279\fP>\X'tty: link'
.IP \(bu 2
Wildcards beginning with a . (for example, \fBls .*\fP) no longer match
\&. and .. \X'tty: link https://github.com/fish-shell/fish-shell/issues/270'\fI\%#270\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/270\fP>\X'tty: link'
.IP \(bu 2
Recursive wildcards now handle symlink loops \X'tty: link https://github.com/fish-shell/fish-shell/issues/268'\fI\%#268\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/268\fP>\X'tty: link'
.IP \(bu 2
You can now delete history items from the fish_config web interface
\X'tty: link https://github.com/fish-shell/fish-shell/issues/250'\fI\%#250\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/250\fP>\X'tty: link'
.IP \(bu 2
The OS X build now weak links \fBwcsdup\fP and \fBwcscasecmp\fP \X'tty: link https://github.com/fish-shell/fish-shell/issues/240'\fI\%#240\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/240\fP>\X'tty: link'
.IP \(bu 2
fish now saves and restores the process group, which prevents certain
processes from being erroneously reported as stopped \X'tty: link https://github.com/fish-shell/fish-shell/issues/197'\fI\%#197\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/197\fP>\X'tty: link'
.IP \(bu 2
funced now takes an editor option \X'tty: link https://github.com/fish-shell/fish-shell/issues/187'\fI\%#187\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/187\fP>\X'tty: link'
.IP \(bu 2
Alternating row colors are available in fish pager through
\fBfish_pager_color_secondary\fP \X'tty: link https://github.com/fish-shell/fish-shell/issues/186'\fI\%#186\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/186\fP>\X'tty: link'
.IP \(bu 2
Universal variable values are now stored based on your MAC address,
not your hostname \X'tty: link https://github.com/fish-shell/fish-shell/issues/183'\fI\%#183\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/183\fP>\X'tty: link'
.IP \(bu 2
The caret ^ now only does a stderr redirection if it is the first
character of a token, making git users happy \X'tty: link https://github.com/fish-shell/fish-shell/issues/168'\fI\%#168\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/168\fP>\X'tty: link'
.IP \(bu 2
Autosuggestions will no longer cause line wrapping \X'tty: link https://github.com/fish-shell/fish-shell/issues/167'\fI\%#167\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/167\fP>\X'tty: link'
.IP \(bu 2
Better handling of Unicode combining characters \X'tty: link https://github.com/fish-shell/fish-shell/issues/155'\fI\%#155\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/155\fP>\X'tty: link'
.IP \(bu 2
fish SIGHUPs processes more often \X'tty: link https://github.com/fish-shell/fish-shell/issues/138'\fI\%#138\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/138\fP>\X'tty: link'
.IP \(bu 2
fish no longer causes \fBsudo\fP to ask for a password every time
.IP \(bu 2
fish behaves better under Midnight Commander \X'tty: link https://github.com/fish-shell/fish-shell/issues/121'\fI\%#121\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/121\fP>\X'tty: link'
.IP \(bu 2
\fBset \-e\fP no longer crashes \X'tty: link https://github.com/fish-shell/fish-shell/issues/100'\fI\%#100\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/100\fP>\X'tty: link'
.IP \(bu 2
fish now will automatically import history from bash, if there is no
fish history \X'tty: link https://github.com/fish-shell/fish-shell/issues/66'\fI\%#66\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/66\fP>\X'tty: link'
.IP \(bu 2
Backslashed\-newlines inside quoted strings now behave more
intuitively \X'tty: link https://github.com/fish-shell/fish-shell/issues/52'\fI\%#52\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/52\fP>\X'tty: link'
.IP \(bu 2
Tab titles should be shown correctly in iTerm2 \X'tty: link https://github.com/fish-shell/fish-shell/issues/47'\fI\%#47\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/47\fP>\X'tty: link'
.IP \(bu 2
scp remote path completion now sometimes works \X'tty: link https://github.com/fish-shell/fish-shell/issues/42'\fI\%#42\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/42\fP>\X'tty: link'
.IP \(bu 2
The \fBread\fP builtin no longer shows autosuggestions \X'tty: link https://github.com/fish-shell/fish-shell/issues/29'\fI\%#29\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/29\fP>\X'tty: link'
.IP \(bu 2
Custom key bindings can now be set via the \fBfish_user_key_bindings\fP
function \X'tty: link https://github.com/fish-shell/fish-shell/issues/21'\fI\%#21\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/21\fP>\X'tty: link'
.IP \(bu 2
All Python scripts now run correctly under both Python 2 and Python 3
\X'tty: link https://github.com/fish-shell/fish-shell/issues/14'\fI\%#14\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/14\fP>\X'tty: link'
.IP \(bu 2
The “accept autosuggestion” key can now be configured \X'tty: link https://github.com/fish-shell/fish-shell/issues/19'\fI\%#19\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/19\fP>\X'tty: link'
.IP \(bu 2
Autosuggestions will no longer suggest invalid commands \X'tty: link https://github.com/fish-shell/fish-shell/issues/6'\fI\%#6\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/6\fP>\X'tty: link'
.UNINDENT

.sp
.ce
----

.ce 0
.sp
.SH FISHFISH BETA R2
.SS Bug Fixes
.INDENT 0.0
.IP \(bu 2
\fBImplicit cd\fP is back, for paths that start with one or two dots, a
slash, or a tilde.
.IP \(bu 2
\fBOverrides of default functions should be fixed.\fP The “internalized
scripts” feature is disabled for now.
.IP \(bu 2
\fBDisabled delayed suspend.\fP This is a strange job\-control feature
of BSD systems, including OS X. Disabling it frees up Control Y for
other purposes; in particular, for yank, which now works on OS X.
.IP \(bu 2
\fBfish_indent is fixed.\fP In particular, the \fBfunced\fP and
\fBfuncsave\fP functions work again.
.IP \(bu 2
A SIGTERM now ends the whole execution stack again (resolving \X'tty: link https://github.com/fish-shell/fish-shell/issues/13'\fI\%#13\fP <\fBhttps://github.com/fish-shell/fish-shell/issues/13\fP>\X'tty: link').
.IP \(bu 2
Bumped the __fish_config_interactive version number so the default
fish_color_autosuggestion kicks in.
.IP \(bu 2
fish_config better handles combined term256 and classic colors like
“555 yellow”.
.UNINDENT
.SS New Features
.INDENT 0.0
.IP \(bu 2
\fBA history builtin\fP, and associated interactive function that
enables deleting history items. Example usage: * Print all history
items beginning with echo: \fBhistory \-\-prefix echo\fP * Print all
history items containing foo: \fBhistory \-\-contains foo\fP *
Interactively delete some items containing foo:
\fBhistory \-\-delete \-\-contains foo\fP
.UNINDENT
.sp
Credit to @siteshwar for implementation. Thanks @siteshwar!

.sp
.ce
----

.ce 0
.sp
.SH FISHFISH BETA R1
.SS Scripting
.INDENT 0.0
.IP \(bu 2
No changes! All existing fish scripts, config files, completions,
etc. from trunk should continue to work.
.UNINDENT
.SS New Features
.INDENT 0.0
.IP \(bu 2
\fBAutosuggestions\fP\&. Think URL fields in browsers. When you type a
command, fish will suggest the rest of the command after the cursor,
in a muted gray when possible. You can accept the suggestion with the
right arrow key or Ctrl\-F. Suggestions come from command history,
completions, and some custom code for cd; there’s a lot of potential
for improvement here. The suggestions are computed on a background
pthread, so they never slow down your typing. The autosuggestion
feature is incredible. I miss it dearly every time I use anything
else.
.IP \(bu 2
\fBterm256 support\fP where available, specifically modern xterms and
OS X Lion. You can specify colors the old way (‘set_color cyan’) or
by specifying RGB hex values (‘set_color FF3333’); fish will pick the
closest supported color. Some xterms do not advertise term256 support
either in the $TERM or terminfo max_colors field, but nevertheless
support it. For that reason, fish will default into using it on any
xterm (but it can be disabled with an environment variable).
.IP \(bu 2
\fBWeb\-based configuration\fP page. There is a new function
‘fish_config’. This spins up a simple Python web server and opens a
browser window to it. From this web page, you can set your shell
colors and view your functions, variables, and history; all changes
apply immediately to all running shells. Eventually all configuration
ought to be supported via this mechanism (but in addition to, not
instead of, command line mechanisms).
.IP \(bu 2
\fBMan page completions\fP\&. There is a new function
‘fish_update_completions’. This function reads all the man1 files
from your manpath, removes the roff formatting, parses them to find
the commands and options, and outputs fish completions into
~/.config/fish/completions. It won’t overwrite existing completion
files (except ones that it generated itself).
.UNINDENT
.SS Programmatic Changes
.INDENT 0.0
.IP \(bu 2
fish is now entirely in C++. I have no particular love for C++, but
it provides a ready memory\-model to replace halloc. We’ve made an
effort to keep it to a sane and portable subset (no C++11, no boost,
no going crazy with templates or smart pointers), but we do use the
STL and a little tr1.
.IP \(bu 2
halloc is entirely gone, replaced by normal C++ ownership semantics.
If you don’t know what halloc is, well, now you have two reasons to
be happy.
.IP \(bu 2
All the crufty C data structures are entirely gone. array_list_t,
priority_queue_t, hash_table_t, string_buffer_t have been removed and
replaced by STL equivalents like std::vector, std::map, and
std::wstring. A lot of the string handling now uses std::wstring
instead of wchar_t *
.IP \(bu 2
fish now spawns pthreads for tasks like syntax highlighting that
require blocking I/O.
.IP \(bu 2
History has been completely rewritten. History files now use an
extensible YAML\-style syntax. History “merging” (multiple shells
writing to the same history file) now works better. There is now a
maximum history length of about 250k items (256 * 1024).
.IP \(bu 2
The parser has been “instanced,” so you can now create more than one.
.IP \(bu 2
Total #LoC has shrunk slightly even with the new features.
.UNINDENT
.SS Performance
.INDENT 0.0
.IP \(bu 2
fish now runs syntax highlighting in a background thread, so typing
commands is always responsive even on slow filesystems.
.IP \(bu 2
echo, test, and pwd are now builtins, which eliminates many forks.
.IP \(bu 2
The files in share/functions and share/completions now get
‘internalized’ into C strings that get compiled in with fish. This
substantially reduces the number of files touched at startup. A
consequence is that you cannot change these functions without
recompiling, but often other functions depend on these “standard”
functions, so changing them is perhaps not a good idea anyways.
.UNINDENT
.sp
Here are some system call counts for launching and then exiting fish
with the default configuration, on OS X. The first column is fish trunk,
the next column is with our changes, and the last column is bash for
comparison. This data was collected via dtrace.
.sp
before
.sp
after
.sp
bash
.sp
open
.sp
9
.sp
4
.sp
5
.sp
fork
.sp
28
.sp
14
.sp
0
.sp
stat
.sp
131
.sp
85
.sp
11
.sp
lstat
.sp
670
.sp
0
.sp
0
.sp
read
.sp
332
.sp
80
.sp
4
.sp
write
.sp
172
.sp
149
.sp
0
.sp
The large number of forks relative to bash are due to fish’s insanely
expensive default prompt, which is unchanged in my version. If we switch
to a prompt comparable to bash’s (lame) default, the forks drop to 16
with trunk, 4 after our changes.
.sp
The large reduction in lstat() numbers is due to fish no longer needing
to call ttyname() on OS X.
.sp
We’ve got some work to do to be as lean as bash, but we’re on the right
track.
.SH AUTHOR
fish-shell developers
.SH COPYRIGHT
2024, fish-shell developers
.\" Generated by docutils manpage writer.
.
